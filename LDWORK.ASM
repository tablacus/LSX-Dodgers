
;	LSX-Dodgers WORK0
;
;	CP/M互換BIOS
;	BOOT:アドレス下位1バイトが0になるように
AT_WORK:
	DS	WORKAD-AT_WORK

CPM_BOOT:
	JP	0
_SYS00:		;(BDOS)プログラム終了
CPM_WBOOT:
	JP	WBOOT1
CPM_CONST:
	JP	CONSTX
_SYS07:		;(BDOS)コンソール直接入力
CPM_CONIN:
	JP	FLGET
CPM_CONOUT:
	JP	CONOUT1

DECBF:
	DS	5
FDRV	DB	0
FNAME	DS	36
SFILE:	DS	33		;DRV FILENAME
HLBUF:	DS	3		;Random record buffer

LEFTX:	DW	0
DTAX:	DW	0

BEEPD:	DB	0,08EH,1,0,00BH,0,00CH,010H
	DB	007H,03EH,008H,010H,00DH,0,0FFH

CHECK:	DB	0

OK:	DB	"OK$"
SKIP:	DB	"Skip$"
COMERM:	DB	"Error!$"
;	システムワークエリア
;	_CYL0:アドレス下位1バイトが080Hになるように
_CYL0:	DB	0FFH	;Cylinder
_CYL1:	DB	0FFH	;Cylinder
_CYL2:	DB	0FFH	;Cylinder
_CYL3:	DB	0FFH	;Cylinder
_DRIVE:	DB	0	;unit number
_SEEKSP:DB	0	;Seek speed
_ISEEK:	DB	0FFH	;
_DVSW:	DB	0
_DRV:	DB	0
_DSK:	DB	0FFH
_DTA:	DW	00080H
_CTC:	DW	0
_TXADR:	DW	0
_KEYPS:	DW	0
_KEYD:	DW	0FF00H	;キーデータ
_KEYSP:	DW	010C2H
_COLORF:DB	COLORF	;色
_LINE:	DB	LINE

_FCB:	DW	0
_FBPS:	DW	0	;SEARCH FILES
_FBAD:	DW	0	;    //
_FBCNT:	DB	0	;    //
_FILEN:	DB	0
_DIRF:	DB	0	;bit7:ディレクトリ bit0-6:セクタインデックス
_MAXCYL:DB	0
_WTFATF:DB	0	;FATバッファの更新フラグ
		DS	1
_WTDBF:	DB	0	;データバッファの更新フラグ
_DBDRV:	DB	0FFH	;データバッファにあるデータを読み込んだドライブ
_DBSEC:	DW	0	;データバッファにあるデータを読み込んだセクタ番号
_DPB:	DW	0
_FATDRV:
	DB	0FFH	;FATバッファに読み込んでいるドライブ
_FATIX:	DB	0	;FATバッファに読み込んでいるインデックス
_FAKEFREE:
	DW	0	;偽の残量（FATサイズが大きくなると重くなるのでその対策）

	DS	2

CRTCD:	DB	06FH,WIDTH,059H,038H,01FH,002H,019H,01CH
	DB	000H,007H
	DW	0-WIDTH*LINE,0-WIDTH
	DB	00CH
WK1FD0:	DB	020H

CTC0:	DW	INTCTCE
CTC1:	DW	INTCTCE
CTC2:	DW	INTCTC2
CTC3:	DW	INTCTCE
INTVEC:	DW	INT

;	LSX-Dodgers 独自BIOS

_INKEY:	JP	INKEY
_PRINT:	JP	PRINT
_SCRN:	JP	SCRN
_POS:	JP	POS
_LOC:	JP	LOC
_CHGDRV:
	JP	CHGDRV
_GETDPB:
	JP	GETDPB
_FFLUSH:
	JP	FFLUSH
_RDFATX:
	JP	RDFATX
_RDFAT:	JP	RDFAT
_WTTRK:	JP	WTTRK
_FDRD:	JP	FDRD
_FDWT:	JP	FDWT
_BPB2DPB:
	JP	BPB2DPB
	DS	3
_GNCL:
GNCPAT:	JP	GNCL		; self-modifying code
_SNCL:
SNCPAT:	JP	SNCL		; self-modifying code
_COMANL:JP	COMANL

_WE:
