;	LSX-Dodgers FDIPL
;	MSX
	JR	INIT_FDD_BOOT
	ORG	0407FH
	RET
INIT_FDD_BOOT:
	DI
	IM	1
	LD	A,(RAMAD1)
	LD	H,040H
	CALL	_ENASLT
	LD	HL,AT_START2+04000H
	LD	DE,START2
	LD	BC,MSX_E-START2
	LDIR
	LD	HL,_DEVICE+4*32		;E
	LD	DE,_DEVICE		;A
	LD	BC,32*4
	LDIR
	LD	HL,_DEVICE+6*32+DPB_NAME+3
	LD	A,7
FDD_INIT1:
	ADD	A,'0'-1
	LD	(HL),A
	LD	DE,DPB_UNITNO-(DPB_NAME+3)
	ADD	HL,DE
	SUB	'0'
	LD	(HL),A
	LD	DE,-DPB_UNITNO-1
	ADD	HL,DE		;ここでZフラグは変化しない
	JR	NZ,FDD_INIT1
	LD	HL,INIT_FDD_BOOT

	CALL	SET_BDOS
	LD	HL,ROMCHECKED
	LD	(INIT_SWC),HL
	LD	A,0C3H		;JP
	LD	(FDD_BDOS_JP),A
	LD	HL,BDOS0
	LD	(FDD_BDOS_ADR),HL
	LD	HL,FDD_BDOS_JP
	LD	(00006H),HL	;BDOS
	JP	START2
