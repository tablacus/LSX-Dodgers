			  Z80 ASSEMBLER - ZASM VER 1.6
  0000                	.Z80
                      	;	LSX-Dodgers for X1/turbo/Z
                      	;	Programmed by
                      	;	Gaku (Lovers/Tablacus)
                      	
  C600                	RUN	EQU	0C600h
                      	
                      	;	MSX BINARY HEADER
  0000  FE            		DB	0FEH
                      	;	MSX BINARY START ADDRESS
  0001  00C6          		DW	RUN
                      	;	MSX BINARY END ADDRESS
  0003  E0ED          		DW	LDEND
                      	;	MSX BINARY EXEC ADDRESS
  0005  00C6          		DW	RUN
                      	
  C600                		ORG	RUN
                      	
                      		
                      	;	LSX-Dodgers DEF
                      	
  1D80                	MAC	EQU	01D80H		;X1
  0001                	VER_1   EQU 1
  0002                	VER_2   EQU 2
  0005                	VER_3   EQU 5
  0125                	VER	EQU	VER_1 * 256 + VER_2 * 16 + VER_3
                      	
  0000                	STACK	EQU	00000H
  0005                	SYSTEM	EQU	00005H
  000F                	[HL]	EQU	0000FH
  005C                	FCB1	EQU	0005CH
  006C                	FCB2	EQU	0006CH
  0080                	DTA1	EQU	00080H
  00DB                	FDRV	EQU	00100H-37
  00DC                	FNAME	EQU	FDRV+1
  00D6                	DECBF	EQU	FDRV-5
  EE00                	FATBF	EQU	0EE00H
  FA00                	DTBUF	EQU	0FA00H
  FE00                	KEYBF	EQU	0FE00H
  FF00                	KBUF	EQU	0FF00H
  FF51                	DTA	EQU	KBUF+81
  FFD4                	EXTSP	EQU	0FFD4H
  0018                	LINE	EQU	24
                      	
                      		
                      	;	LSX-Dodgers INIT
                      	
  C600  C307C6        		JP	START
  C603  801D          	MACHINE:DW	MAC
  C605  2501          	VERSION:DW	VER
                      	
  C607                	START:
  C607  F3            		DI
  C608  ED5E          		IM	2
  C60A  310000        		LD	SP,STACK
  C60D  3E1E          		LD	A,01EH
  C60F  D300          		OUT	(0),A
                      	
  C611  010000        		LD	BC,0
  C614  ED438CEC      		LD	(_CTC),BC
  C618  01040A        		LD	BC,00A04H
  C61B  CD48C9        		CALL	CHKCTC
  C61E  010407        		LD	BC,00704H
  C621  CD48C9        		CALL	CHKCTC
  C624  01A81F        		LD	BC,01FA8H
  C627  CD48C9        		CALL	CHKCTC
  C62A  01A01F        		LD	BC,01FA0H
  C62D  CD48C9        		CALL	CHKCTC
                      	;
  C630                	INISIO:
  C630  01911F        		LD	BC,01F91H	;INIT SIO
  C633  1601          		LD	D,1
  C635  ED51          		OUT	(C),D
  C637  ED71          		DB	0EDH,071H
  C639  0E93          		LD	C,093H
  C63B  ED51          		OUT	(C),D
  C63D  ED71          		DB	0EDH,071H
  C63F  0E99          		LD	C,099H		;INIT SIO
  C641  1601          		LD	D,1
  C643  ED51          		OUT	(C),D
  C645  ED71          		DB	0EDH,071H
  C647  0E9B          		LD	C,09BH
  C649  ED51          		OUT	(C),D
  C64B  ED71          		DB	0EDH,071H
                      	
  C64D  0E80          		LD	C,080H		;INIT DMA
  C64F  2106C3        		LD	HL,0C306H
  C652                	INIDMA:
  C652  ED61          		OUT	(C),H
  C654  2D            		DEC	L
  C655  20FB          		JR	NZ,INIDMA
                      	
  C657  3EE4          		LD	A,0E4H
  C659  CD59DA        		CALL	COMOUT
  C65C  AF            		XOR	A
  C65D  CD33DA        		CALL	OT49SB
                      	
  C660  3EEC          		LD	A,INTVEC/256
  C662  ED47          		LD	I,A
                      	
  C664  ED4B8CEC      		LD	BC,(_CTC)
  C668  0B            		DEC	BC
  C669  0B            		DEC	BC
                      	
  C66A  ED71          		DB	0EDH,071H
  C66C  3EC0          		LD	A,CTC0
  C66E  ED79          		OUT	(C),A
                      	
  C670  0C            		INC	C
  C671  3E47          		LD	A,047H
  C673  ED79          		OUT	(C),A
  C675  3E0D          		LD	A,13		;Baudrate 9600-13
  C677  ED79          		OUT	(C),A
                      	
  C679  79            		LD	A,C
  C67A  D610          		SUB	010H
  C67C  4F            		LD	C,A
  C67D  ED43BCD6      		LD	(SIOAD+1),BC
  C681  ED43E5D6      		LD	(SIOAD0+1),BC
  C685  ED43EBD6      		LD	(SIOAD1+1),BC
                      	
  C689  21F1C9        		LD	HL,SIODATA
  C68C                	SINIT1:
  C68C  7E            		LD	A,(HL)
  C68D  23            		INC	HL
  C68E  FEFF          		CP	0FFH
  C690  2804          		JR	Z,SINIT2
  C692  ED79          		OUT	(C),A
  C694  18F6          		JR	SINIT1
  C696                	SINIT2:
  C696  3EE4          		LD	A,0E4H
  C698  CD59DA        		CALL	COMOUT
  C69B  3EC8          		LD	A,INTVEC
  C69D  CD33DA        		CALL	OT49SB
                      	;
  C6A0  01C41F        		LD	BC,01FC4H
  C6A3  3E0C          		LD	A,00CH
  C6A5  ED79          		OUT	(C),A
                      	
  C6A7  0EC0          		LD	C,0C0H
  C6A9  ED71          		DB	0EDH,071H
                      	
  C6AB  0C            		INC	C
  C6AC  3E28          		LD	A,40
  C6AE  ED79          		OUT	(C),A
                      	
  C6B0  0C            		INC	C
  C6B1  ED71          		DB	0EDH,071H
                      	
  C6B3  0C            		INC	C
  C6B4  ED71          		DB	0EDH,071H
                      	
  C6B6  0EC5          		LD	C,0C5H
  C6B8  ED71          		DB	0EDH,071H
                      	
  C6BA                	TEXT:
  C6BA  0EB0          		LD	C,0B0H
  C6BC  3E80          		LD	A,080H
  C6BE  ED79          		OUT	(C),A
  C6C0  1607          		LD	D,7
  C6C2  0EB9          		LD	C,0B9H
  C6C4  21EAC9        		LD	HL,TEXTDT
  C6C7                	TEXT1:
  C6C7  04            		INC	B
  C6C8  EDA3          		OUTI
  C6CA  0C            		INC	C
  C6CB  15            		DEC	D
  C6CC  20F9          		JR	NZ,TEXT1
  C6CE  01B01F        		LD	BC,01FB0H
  C6D1  ED71          		DB	0EDH,071H
                      	
  C6D3  0EC4          		LD	C,0C4H
  C6D5  ED71          		DB	0EDH,071H
                      	
  C6D7  01011A        		LD	BC,01A01H
  C6DA  ED78          		IN	A,(C)
  C6DC  E608          		AND	8
  C6DE  2809          		JR	Z,PRN
  C6E0  0E03          		LD	C,003H
  C6E2  3E0F          		LD	A,00FH
  C6E4  ED79          		OUT	(C),A
  C6E6  01040A        		LD	BC,00A04H
  C6E9                	PRN:
  C6E9  110100        		LD	DE,1
  C6EC  62            		LD	H,D
  C6ED  6A            		LD	L,D
  C6EE  017F00        		LD	BC,07FH
  C6F1  36FF          		LD	(HL),0FFH
  C6F3  EDB0          		LDIR
  C6F5  017F00        		LD	BC,07FH
  C6F8  3600          		LD	(HL),0
  C6FA  EDB0          		LDIR
                      	
  C6FC  3EC3          		LD	A,0C3H		;JP
  C6FE  21F4D9        		LD	HL,WBOOT
  C701  320000        		LD	(00000H),A
  C704  220100        		LD	(00001H),HL	;IPL
                      	
  C707  2A03C6        		LD	HL,(MACHINE)	;3 bit7  DPB Original(1)
  C70A  220300        		LD	(00003H),HL	;  bit6-0 Machine X1(0)
                      	;				;4 LSX-Dodgers(01DH)
  C70D  2106CC        		LD	HL,BDOS
  C710  320500        		LD	(00005H),A
  C713  220600        		LD	(00006H),HL	;BDOS
                      	
  C716  2174D5        		LD	HL,BIOS
  C719  321800        		LD	(00018H),A	;BIOS-ROM
  C71C  221900        		LD	(00019H),HL
                      	
  C71F  210000        		LD	HL,0
  C722  323800        		LD	(00038H),A	;RST038H
  C725  223900        		LD	(00039H),HL
                      	
  C728  3EEC          		LD	A,STABLE/256
  C72A  320B00        		LD	(0000BH),A
                      	
  C72D  3EE9          		LD	A,0E9H		;JP (HL)
  C72F  320F00        		LD	(0000FH),A
                      	
  C732  3A7DEC        		LD	A,(_FATBF+1)
  C735  321300        		LD	(00013H),A
                      	
  C738  3A7FEC        		LD	A,(_DTBUF+1)
  C73B  321700        		LD	(00017H),A
                      	
  C73E  3EFE          		LD	A,KEYBF/256
  C740  321B00        		LD	(0001BH),A
                      	
  C743  3EFF          		LD	A,KBUF/256
  C745  321F00        		LD	(0001FH),A
                      	
  C748  2A05C6        		LD	HL,(VERSION)
  C74B  225A00        		LD	(0005AH),HL
                      	
  C74E  3EE6          		LD	A,0E6H
  C750  CD59DA        		CALL	COMOUT
  C753  CD3EDA        		CALL	IN49SB
  C756  F5            		PUSH	AF
  C757  CD3EDA        		CALL	IN49SB
  C75A  F1            		POP	AF
  C75B  F5            		PUSH	AF
  C75C  E612          		AND	012H
  C75E  2005          		JR	NZ,KEYR
  C760  3E01          		LD	A,1
  C762  329DC8        		LD	(KEYREP+1),A
  C765                	KEYR:
  C765  F1            		POP	AF
  C766  E603          		AND	3
  C768  280E          		JR	Z,NON
                      	
  C76A  01D03F        		LD	BC,03FD0H
  C76D  ED49          		OUT	(C),C
  C76F  3E37          		LD	A,037H
  C771  D3D0          		OUT	(0D0H),A
  C773  ED78          		IN	A,(C)
  C775  B9            		CP	C
  C776  285C          		JR	Z,TURBO
  C778                	NON:
  C778  3D            		DEC	A		;A=0FFH
  C779  321800        		LD	(00018H),A	;BIOS-ROM
                      	
  C77C  21FDC9        		LD	HL,@SCR1
  C77F  11E2DA        		LD	DE,SCR1
  C782  015E00        		LD	BC,@SCRE-@SCR1
  C785  EDB0          		LDIR
                      	
  C787  215BCA        		LD	HL,@WTTRK
  C78A  113FEA        		LD	DE,WTTRK
  C78D  017501        		LD	BC,@CPUE-@WTTRK
  C790  EDB0          		LDIR
                      	
  C792  2192EA        		LD	HL,@DRD+@R
  C795  22ECEC        		LD	(_FDRD+1),HL
  C798  2143EA        		LD	HL,@DWT+@R
  C79B  22EFEC        		LD	(_FDWT+1),HL
  C79E  212AEB        		LD	HL,@EDRDC+@R
  C7A1  2282ED        		LD	(EMMRD),HL
  C7A4  213EEB        		LD	HL,@EDWTC+@R
  C7A7  2284ED        		LD	(EMMWR),HL
                      	
  C7AA  2159EA        		LD	HL,DWTPAT+@R
  C7AD  22AFE9        		LD	(@FDCPAT+1),HL
                      	
  C7B0  210000        		LD	HL,0
  C7B3  2284DA        		LD	(X1PAT),HL
                      	
  C7B6  3EAF          		LD	A,0AFH		;XOR	A
  C7B8  3283D8        		LD	(X1KPAT),A
                      	
  C7BB  2181DB        		LD	HL,SCRNX
  C7BE  22D1EC        		LD	(_SCRN+1),HL
                      	
  C7C1  CD6FC9        		CALL	SETCRTC
  C7C4  0610          		LD	B,010H		;PALET
  C7C6  ED71          		DB	0EDH,071H
  C7C8  04            		INC	B
  C7C9  ED71          		DB	0EDH,071H
  C7CB  04            		INC	B
  C7CC  ED71          		DB	0EDH,071H
  C7CE  04            		INC	B
  C7CF  ED71          		DB	0EDH,071H
  C7D1  C359C8        		JP	NOBANK
                      	
  C7D4                	TURBO:
  C7D4  3E1F          		LD	A,01FH
  C7D6  DBF0          		IN	A,(0F0H)
  C7D8  0F            		RRCA
  C7D9  380B          		JR	C,CRT1
  C7DB  21DAC9        		LD	HL,C8025H
  C7DE  11B0EC        		LD	DE,CRTCD
  C7E1  011000        		LD	BC,16
  C7E4  EDB0          		LDIR
  C7E6                	CRT1:
  C7E6  CD6FC9        		CALL	SETCRTC
  C7E9  01AA10        		LD	BC,010AAH	;PALET
  C7EC  ED49          		OUT	(C),C
  C7EE  01CC11        		LD	BC,011CCH
  C7F1  ED49          		OUT	(C),C
  C7F3  01F012        		LD	BC,012F0H
  C7F6  ED49          		OUT	(C),C
  C7F8  04            		INC	B
  C7F9  ED71          		DB	0EDH,071H
                      	
  C7FB  3E1F          		LD	A,01FH
  C7FD  DBF0          		IN	A,(0F0H)
  C7FF  CB57          		BIT	2,A
  C801  2825          		JR	Z,BANK
                      	
  C803  AF            		XOR	A
  C804                	TZ1:
  C804  F5            		PUSH	AF
  C805  CDDCEC        		CALL	_GETDPB
  C808  DD7E12        		LD	A,(IX+012H)
  C80B  FE87          		CP	087H
  C80D  2013          		JR	NZ,TZ2
  C80F  DDE5          		PUSH	IX
  C811  D1            		POP	DE
  C812  210FE9        		LD	HL,M2HD
  C815  EDA0          		LDI
  C817  EDA0          		LDI
  C819  13            		INC	DE
  C81A  13            		INC	DE
  C81B  13            		INC	DE
  C81C  13            		INC	DE
  C81D  010C00        		LD	BC,12
  C820  EDB0          		LDIR
  C822                	TZ2:
  C822  F1            		POP	AF
  C823  3C            		INC	A
  C824  FE08          		CP	8
  C826  38DC          		JR	C,TZ1
                      	
  C828                	BANK:
  C828  01000B        		LD	BC,00B00H
  C82B  21007F        		LD	HL,07F00H
  C82E  F3            		DI
  C82F                	BANK1:
  C82F  ED69          		OUT	(C),L
  C831  5E            		LD	E,(HL)
  C832  7B            		LD	A,E
  C833  C6A5          		ADD	A,0A5H
  C835  77            		LD	(HL),A
  C836  BE            		CP	(HL)
  C837  73            		LD	(HL),E
  C838  2005          		JR	NZ,BANK2
  C83A  2C            		INC	L
  C83B  CB65          		BIT	4,L
  C83D  28F0          		JR	Z,BANK1
  C83F                	BANK2:
  C83F  3E10          		LD	A,010H
  C841  ED79          		OUT	(C),A
  C843  7D            		LD	A,L
  C844  B7            		OR	A
  C845  2812          		JR	Z,NOBANK
  C847  2600          		LD	H,0
  C849  29            		ADD	HL,HL
  C84A  29            		ADD	HL,HL
  C84B  29            		ADD	HL,HL
  C84C  29            		ADD	HL,HL
  C84D  29            		ADD	HL,HL
  C84E  2B            		DEC	HL
  C84F  2B            		DEC	HL
  C850  2B            		DEC	HL
  C851  22A8ED        		LD	(BANKCL),HL
  C854  3E01          		LD	A,1
  C856  32A0ED        		LD	(BANKFL),A
  C859                	NOBANK:
  C859                	EMM:
  C859  CD38C9        		CALL	EADR0
  C85C  ED78          		IN	A,(C)
  C85E  F5            		PUSH	AF
                      	
  C85F  110000        		LD	DE,0
  C862                	ECHECK1:
  C862  13            		INC	DE
  C863  CD1BC9        		CALL	EADR2
  C866  ED60          		IN	H,(C)
  C868  CD1BC9        		CALL	EADR2
  C86B  7C            		LD	A,H
  C86C  C6E5          		ADD	A,0E5H
  C86E  ED79          		OUT	(C),A
  C870  3C            		INC	A
  C871  CD38C9        		CALL	EADR0
  C874  ED79          		OUT	(C),A
  C876  3D            		DEC	A
  C877  CD1BC9        		CALL	EADR2
  C87A  ED68          		IN	L,(C)
  C87C  CD1BC9        		CALL	EADR2
  C87F  ED61          		OUT	(C),H
  C881  BD            		CP	L
  C882  2004          		JR	NZ,ECHECK2
  C884  CB5A          		BIT	3,D
  C886  28DA          		JR	Z,ECHECK1
  C888                	ECHECK2:
  C888  CD38C9        		CALL	EADR0
  C88B  F1            		POP	AF
  C88C  ED79          		OUT	(C),A
                      	
  C88E  21F7FF        		LD	HL,0-9
  C891  19            		ADD	HL,DE
  C892  3008          		JR	NC,NOEMM
  C894  2288ED        		LD	(EMMCL),HL
  C897  3E03          		LD	A,3
  C899  3280ED        		LD	(EMMFL),A
  C89C                	NOEMM:
  C89C  3E00          	KEYREP:	LD	A,000H
  C89E  B7            		OR	A
  C89F  2807          		JR	Z,KEYR1
  C8A1  010000        		LD	BC,0
  C8A4  ED438CEC      		LD	(_CTC),BC
  C8A8                	KEYR1:
  C8A8  0130F8        		LD	BC,0-80*25
  C8AB  2ABAEC        		LD	HL,(CRTCD+10)
  C8AE  ED43BAEC      		LD	(CRTCD+10),BC
  C8B2  1E0C          		LD	E,00CH
  C8B4  CDCDEC        		CALL	_PRINT
  C8B7  22BAEC        		LD	(CRTCD+10),HL
                      	
  C8BA  219AC9        		LD	HL,INIMES
  C8BD                	INIMES1:
  C8BD  7E            		LD	A,(HL)
  C8BE  23            		INC	HL
  C8BF  B7            		OR	A
  C8C0  2806          		JR	Z,INIMES2
  C8C2  5F            		LD	E,A
  C8C3  CDCDEC        		CALL	_PRINT
  C8C6  18F5          		JR	INIMES1
  C8C8                	INIMES2:
  C8C8  3A87FF        		LD	A,(0FF87H)
  C8CB  FE08          		CP	8
  C8CD  301E          		JR	NC,INIT0
  C8CF  5F            		LD	E,A
  C8D0  C641          		ADD	A,"A"
  C8D2  3297C9        		LD	(AUTODV),A
  C8D5  0E0E          		LD	C,00EH
  C8D7  CD0500        		CALL	SYSTEM
  C8DA  1C            		INC	E
  C8DB  2185EC        		LD	HL,_SEEKSP	;Disk error Ignore
  C8DE  CBFE          		SET	7,(HL)
  C8E0  0E1B          		LD	C,01BH
  C8E2  CD0500        		CALL	SYSTEM
  C8E5  2185EC        		LD	HL,_SEEKSP
  C8E8  CBBE          		RES	7,(HL)
                      	
  C8EA  3C            		INC	A
  C8EB  2008          		JR	NZ,INIT1
  C8ED                	INIT0:
  C8ED  1E00          		LD	E,0
  C8EF  0E0E          		LD	C,00EH
  C8F1  CD0500        		CALL	SYSTEM
  C8F4  AF            		XOR	A
  C8F5                	INIT1:
  C8F5  2100FF        		LD	HL,0FF00H
  C8F8  1101FF        		LD	DE,0FF01H
  C8FB  01FF00        		LD	BC,000FFH
  C8FE  75            		LD	(HL),L
  C8FF  EDB0          		LDIR
                      	
  C901  210000        		LD	HL,0
  C904  E5            		PUSH	HL
  C905  B7            		OR	A
  C906  C8            		RET	Z
                      	
  C907  3EE6          		LD	A,0E6H
  C909  CD59DA        		CALL	COMOUT
  C90C  CD3EDA        		CALL	IN49SB
  C90F  CD3EDA        		CALL	IN49SB
  C912  FE1B          		CP	01BH
  C914  C8            		RET	Z
  C915  118EC9        		LD	DE,AUTOD
  C918  C3FDEC        		JP	_COMANL
                      	
  C91B                	EADR2:
  C91B  D5            		PUSH	DE
  C91C  EB            		EX	DE,HL
  C91D  29            		ADD	HL,HL
  C91E  29            		ADD	HL,HL
  C91F  ED4B8BED      		LD	BC,(EMMBL-1)
  C923  0E00          		LD	C,0
  C925  09            		ADD	HL,BC
  C926  ED4B93ED      		LD	BC,(EMMDV)
  C92A  060D          		LD	B,00DH
  C92C  ED49          		OUT	(C),C
  C92E  0C            		INC	C
  C92F  ED69          		OUT	(C),L
  C931  0C            		INC	C
  C932  ED61          		OUT	(C),H
  C934  0C            		INC	C
  C935  EB            		EX	DE,HL
  C936  D1            		POP	DE
  C937  C9            		RET
                      	
  C938                	EADR0:
  C938  ED4B93ED      		LD	BC,(EMMDV)
  C93C  060D          		LD	B,00DH
  C93E  ED71          		DB	0EDH,071H
  C940  0C            		INC	C
  C941  ED71          		DB	0EDH,071H
  C943  0C            		INC	C
  C944  ED71          		DB	0EDH,071H
  C946  0C            		INC	C
  C947  C9            		RET
                      	
  C948                	CHKCTC:
  C948  C5            		PUSH	BC
  C949  110347        		LD	DE,04703H
  C94C                	INICTC1:
  C94C  0C            		INC	C
  C94D  ED51          		OUT	(C),D
  C94F  ED71          		DB	0EDH,071H
  C951  1D            		DEC	E
  C952  20F8          		JR	NZ,INICTC1
  C954  C1            		POP	BC
                      	
  C955  11FA07        		LD	DE,007FAH
  C958  ED51          		OUT	(C),D
  C95A  ED59          		OUT	(C),E
  C95C  ED78          		IN	A,(C)
  C95E  BB            		CP	E
  C95F  C0            		RET	NZ
  C960  ED51          		OUT	(C),D
  C962  ED51          		OUT	(C),D
  C964  ED78          		IN	A,(C)
  C966  BA            		CP	D
  C967  C0            		RET	NZ
  C968  03            		INC	BC
  C969  03            		INC	BC
  C96A  ED438CEC      		LD	(_CTC),BC
  C96E  C9            		RET
                      	
  C96F                	SETCRTC:
  C96F  21B0EC        		LD	HL,CRTCD
  C972  AF            		XOR	A
  C973                	SETCRT1:
  C973  010018        		LD	BC,01800H
  C976  ED79          		OUT	(C),A
  C978  0C            		INC	C
  C979  04            		INC	B
  C97A  EDA3          		OUTI
  C97C  3C            		INC	A
  C97D  FE0C          		CP	12
  C97F  20F2          		JR	NZ,SETCRT1
  C981  23            		INC	HL
  C982  23            		INC	HL
  C983  01031B        		LD	BC,01A03H+00100H
  C986  EDA3          		OUTI
  C988  01D020        		LD	BC,01FD0H+00100H
  C98B  EDA3          		OUTI
  C98D  C9            		RET
                      	
  C98E  4155544F455845	AUTOD:	DB	"AUTOEXEC "
  C997  413A00        	AUTODV:	DB	"A:",0
                      	
  C99A  A54C53582D446F	INIMES:	DB	"¥LSX-Dodgers for X1/turbo version "
  C9BC  312E          		DB	'0' + VER_1, '.'
  C9BE  3235          		DB	'0' + VER_2 ,'0'+ VER_3
  C9C0  2047616B752028		DB	' Gaku (Lovers/Tablacus)',0DH,0AH
  C9D9  00            		DB	0
                      	
  C9DA  6B5059881B0119	C8025H:	DB	06BH,050H,059H,088H,01BH,001H,019H,01AH
  C9E2  000F          		DB	000H,00FH
  C9E4  80F8B0FF      		DW	0-80*LINE,0-80
  C9E8  0CA3          		DB	00CH,0A3H
                      	
  C9EA  030C0F30333C3F	TEXTDT:	DB	003H,00CH,00FH,030H,033H,03CH,03FH
                      	
  C9F1                	SIODATA:
  C9F1  18            		DB	018H
  C9F2  0100          		DB	1,0
  C9F4  0200          		DB	2,0
  C9F6  03C1          		DB	3,0C1H
  C9F8  0444          		DB	4,044H
  C9FA  05E8          		DB	5,0E8H
  C9FC  FF            		DB	0FFH
                      	
  C9FD                	@SCR1:
  C9FD  D9            		EXX
  C9FE  C5            		PUSH	BC
  C9FF  015020        		LD	BC,02000H+80
  CA02  D9            		EXX
  CA03  C5            		PUSH	BC
  CA04  010020        		LD	BC,02000H
                      	
  CA07  67            		LD	H,A
  CA08  B7            		OR	A
  CA09                	@SCRUP1:
  CA09  2815          		JR	Z,@SCRCL
  CA0B  C5            		PUSH	BC
  CA0C  CBE0          		SET	4,B
  CA0E  D9            		EXX
  CA0F  C5            		PUSH	BC
  CA10  CBE0          		SET	4,B
  CA12  D9            		EXX
  CA13  CD6DEB        		CALL	@UPSUB+@R
  CA16  D9            		EXX
  CA17  C1            		POP	BC
  CA18  D9            		EXX
  CA19  C1            		POP	BC
  CA1A  CD6DEB        		CALL	@UPSUB+@R
  CA1D  25            		DEC	H
  CA1E  18E9          		JR	@SCRUP1
                      	
  CA20                	@SCRCL:
  CA20  211020        		LD	HL,02000H+16
  CA23  3A96EC        		LD	A,(_COLORF)
  CA26                	@SCRCL1:
  CA26  CBE0          		SET	4,B
  CA28  ED61          		OUT	(C),H
  CA2A  CBA0          		RES	4,B
  CA2C  ED79          		OUT	(C),A
  CA2E  03            		INC	BC
  CA2F  CBE0          		SET	4,B
  CA31  ED61          		OUT	(C),H
  CA33  CBA0          		RES	4,B
  CA35  ED79          		OUT	(C),A
  CA37  03            		INC	BC
  CA38  CBE0          		SET	4,B
  CA3A  ED61          		OUT	(C),H
  CA3C  CBA0          		RES	4,B
  CA3E  ED79          		OUT	(C),A
  CA40  03            		INC	BC
  CA41  CBE0          		SET	4,B
  CA43  ED61          		OUT	(C),H
  CA45  CBA0          		RES	4,B
  CA47  ED79          		OUT	(C),A
  CA49  03            		INC	BC
  CA4A  CBE0          		SET	4,B
  CA4C  ED61          		OUT	(C),H
  CA4E  CBA0          		RES	4,B
  CA50  ED79          		OUT	(C),A
  CA52  03            		INC	BC
  CA53  2D            		DEC	L
  CA54  20D0          		JR	NZ,@SCRCL1
  CA56  C1            		POP	BC
  CA57  D9            		EXX
  CA58  C1            		POP	BC
  CA59  D9            		EXX
  CA5A  C9            		RET
                      	
  CA5B                	@SCRE:
                      	
                      	;	FLOPPY DISK DRIVER(CPU)
                      	
  CA5B                	@WTTRK:
  CA5B  3EF0          		LD	A,0F0H
  CA5D  1802          		JR	@WTTRK1
                      	
  CA5F                	@DWT:
  CA5F  3EA0          		LD	A,0A0H
  CA61                	@WTTRK1:
  CA61  325AEA        		LD	(DWTPAT+1+@R),A
                      	
  CA64  3E02          		LD	A,2		;Retry count
  CA66  323EEA        		LD	(RETRY),A
                      	
  CA69                	DWT0:
  CA69  D5            		PUSH	DE
  CA6A  E5            		PUSH	HL
  CA6B  2210EB        		LD	(DHLPAT+1+@R),HL
  CA6E  CD48E9        		CALL	SEEK		;Write disk
  CA71  E1            		POP	HL
  CA72  3830          		JR	C,ERRDW
  CA74  F3            		DI
  CA75  3EA0          	DWTPAT:	LD	A,0A0H
  CA77  CDF4E9        		CALL	SECSET
  CA7A  0EFB          		LD	C,0FBH
                      	
  CA7C                	DWT1:
  CA7C  56            		LD	D,(HL)
  CA7D                	DWT2:
  CA7D  78            		LD	A,B
  CA7E  DBF8          		IN	A,(0F8H)
  CA80  0F            		RRCA
  CA81  3008          		JR	NC,DWT4
  CA83  0F            		RRCA
  CA84  30F7          		JR	NC,DWT2
  CA86                	DWT3:
  CA86  ED51          		OUT	(C),D
  CA88  23            		INC	HL
  CA89  18F1          		JR	DWT1
                      	
  CA8B                	DWT4:
  CA8B  3D            		DEC	A
  CA8C  28F8          		JR	Z,DWT3
  CA8E  3C            		INC	A
  CA8F  FB            		EI
  CA90  D1            		POP	DE
  CA91  13            		INC	DE
  CA92  CDE8E9        		CALL	FDMOFF
  CA95  C8            		RET	Z
  CA96  CDDBEA        		CALL	DISKC+@R
  CA99  20CE          		JR	NZ,DWT0
  CA9B  B7            		OR	A
  CA9C  C8            		RET	Z
  CA9D                	ERRW:
  CA9D  3EFF          		LD	A,0FFH
  CA9F                	ERRZ:
  CA9F  BF            		CP	A
  CAA0  37            		SCF
  CAA1  C3E8E9        		JP	FDMOFF
                      	
  CAA4                	ERRDW:
  CAA4  D1            		POP	DE
  CAA5  CDECEA        		CALL	@DELP+@R
  CAA8  20BF          		JR	NZ,DWT0
  CAAA  B7            		OR	A
  CAAB  20F0          		JR	NZ,ERRW
  CAAD  C9            		RET
                      	
  CAAE                	@DRD:
  CAAE  3E80          		LD	A,080H
  CAB0  32ACEA        		LD	(DRDPAT+1+@R),A
  CAB3  325AEA        		LD	(DWTPAT+1+@R),A
                      	
  CAB6  3E02          		LD	A,2		;Retry count
  CAB8  323EEA        		LD	(RETRY),A
                      	
  CABB                	DRD0:
  CABB  D5            		PUSH	DE
  CABC  E5            		PUSH	HL
  CABD  2210EB        		LD	(DHLPAT+1+@R),HL
  CAC0  CD48E9        		CALL	SEEK		;Read disk
  CAC3  E1            		POP	HL
  CAC4  3827          		JR	C,ERRDR
  CAC6  F3            		DI
  CAC7                	DRDPAT:
  CAC7  3E80          		LD	A,080H
  CAC9  CDF4E9        		CALL	SECSET
  CACC  0EFB          		LD	C,0FBH
  CACE                	DRD1:
  CACE  78            		LD	A,B
  CACF  DBF8          		IN	A,(0F8H)
  CAD1  0F            		RRCA
  CAD2  3008          		JR	NC,DRD3
  CAD4  0F            		RRCA
  CAD5  30F7          		JR	NC,DRD1
  CAD7  EDA2          		INI
  CAD9  04            		INC	B
  CADA  18F2          		JR	DRD1
                      	
  CADC                	DRD3:
  CADC  B7            		OR	A
  CADD  FB            		EI
  CADE  D1            		POP	DE
  CADF  13            		INC	DE
  CAE0  CDE8E9        		CALL	FDMOFF
  CAE3  C8            		RET	Z
  CAE4  CDDBEA        		CALL	DISKC+@R
  CAE7  20D2          		JR	NZ,DRD0
  CAE9  B7            		OR	A
  CAEA  20B1          		JR	NZ,ERRW
  CAEC  C9            		RET
                      	
  CAED                	ERRDR:
  CAED  D1            		POP	DE
  CAEE  CDECEA        		CALL	@DELP+@R
  CAF1  20C8          		JR	NZ,DRD0
  CAF3  B7            		OR	A
  CAF4  20A7          		JR	NZ,ERRW
  CAF6  C9            		RET
                      	
  CAF7                	DISKC:
  CAF7  1B            		DEC	DE
  CAF8  CB5F          		BIT	3,A
  CAFA  C40CEA        		CALL	NZ,RNF
  CAFD                	DISKD:
  CAFD  E5            		PUSH	HL
  CAFE  213EEA        		LD	HL,RETRY
  CB01  35            		DEC	(HL)
  CB02  E1            		POP	HL
  CB03  203E          		JR	NZ,@ERR		;Retry
  CB05  B7            		OR	A
  CB06  283B          		JR	Z,@ERR		;Error
                      	
  CB08                	@DELP:
  CB08  CD0CEA        		CALL	RNF
  CB0B  CDE8E9        		CALL	FDMOFF
  CB0E  3A85EC        		LD	A,(_SEEKSP)
  CB11  87            		ADD	A,A
  CB12  382E          		JR	C,@ERRZ
  CB14                	@DELP1:
  CB14  D5            		PUSH	DE
  CB15  2112EA        		LD	HL,DEMES
  CB18  CDF6D7        		CALL	MSX
  CB1B  CD73D6        		CALL	KEYBC
  CB1E                	@DELP2:
  CB1E  CD0EDC        		CALL	INKEY
  CB21  28FB          		JR	Z,@DELP2
                      	
  CB23  D1            		POP	DE
  CB24  CD75DF        		CALL	CAP
  CB27  FE52          		CP	"R"
  CB29  200A          		JR	NZ,@DELP3
  CB2B  210000        	DHLPAT:	LD	HL,0
  CB2E  3E02          		LD	A,2
  CB30  323EEA        		LD	(RETRY),A
  CB33  B7            		OR	A
  CB34  C9            		RET
  CB35                	@DELP3:
  CB35  FE49          		CP	"I"
  CB37  2807          		JR	Z,@IGNORE
  CB39  FE41          		CP	"A"
  CB3B  20D7          		JR	NZ,@DELP1
  CB3D  C3F1D9        		JP	BOOT
  CB40                	@IGNORE:
  CB40  3EFF          		LD	A,0FFH
  CB42                	@ERRZ:
  CB42  BF            		CP	A
  CB43                	@ERR:
  CB43  3EFF          		LD	A,0FFH
  CB45  C9            		RET
                      	
                      	
                      	;	EMM DRIVER(CPU)
                      	
                      	
  CB46                	@EDRDC:
  CB46  CD52EB        		CALL	@EADR+@R
  CB49                	@EDRDC1:
  CB49  EDA2          		INI
  CB4B  04            		INC	B
  CB4C  EDA2          		INI
  CB4E  04            		INC	B
  CB4F  EDA2          		INI
  CB51  04            		INC	B
  CB52  EDA2          		INI
  CB54  04            		INC	B
  CB55  3D            		DEC	A
  CB56  20F1          		JR	NZ,@EDRDC1
  CB58  AF            		XOR	A
  CB59  C9            		RET
                      	
  CB5A                	@EDWTC:
  CB5A  CD52EB        		CALL	@EADR+@R
  CB5D                	@EDWTC1:
  CB5D  04            		INC	B
  CB5E  EDA3          		OUTI
  CB60  04            		INC	B
  CB61  EDA3          		OUTI
  CB63  04            		INC	B
  CB64  EDA3          		OUTI
  CB66  04            		INC	B
  CB67  EDA3          		OUTI
  CB69  3D            		DEC	A
  CB6A  20F1          		JR	NZ,@EDWTC1
  CB6C  AF            		XOR	A
  CB6D  C9            		RET
                      	
  CB6E                	@EADR:
  CB6E  D5            		PUSH	DE
  CB6F  EB            		EX	DE,HL
  CB70  29            		ADD	HL,HL
  CB71  29            		ADD	HL,HL
  CB72  ED4BA0EC      		LD	BC,(_MAXCYL-1)
  CB76  0E00          		LD	C,0
  CB78  09            		ADD	HL,BC
  CB79  060D          		LD	B,00DH
  CB7B  ED49          		OUT	(C),C
  CB7D  0C            		INC	C
  CB7E  ED69          		OUT	(C),L
  CB80  0C            		INC	C
  CB81  ED61          		OUT	(C),H
  CB83  0C            		INC	C
  CB84  EB            		EX	DE,HL
  CB85  D1            		POP	DE
  CB86  13            		INC	DE
  CB87  AF            		XOR	A
  CB88  C9            		RET
                      	
  CB89                	@UPSUB:
  CB89  2E0A          		LD	L,10
  CB8B                	@UPSUB1:
  CB8B  D9            		EXX
  CB8C  ED78          		IN	A,(C)
  CB8E  03            		INC	BC
  CB8F  D9            		EXX
  CB90  ED79          		OUT	(C),A
  CB92  03            		INC	BC
  CB93  D9            		EXX
  CB94  ED78          		IN	A,(C)
  CB96  03            		INC	BC
  CB97  D9            		EXX
  CB98  ED79          		OUT	(C),A
  CB9A  03            		INC	BC
  CB9B  D9            		EXX
  CB9C  ED78          		IN	A,(C)
  CB9E  03            		INC	BC
  CB9F  D9            		EXX
  CBA0  ED79          		OUT	(C),A
  CBA2  03            		INC	BC
  CBA3  D9            		EXX
  CBA4  ED78          		IN	A,(C)
  CBA6  03            		INC	BC
  CBA7  D9            		EXX
  CBA8  ED79          		OUT	(C),A
  CBAA  03            		INC	BC
  CBAB  D9            		EXX
  CBAC  ED78          		IN	A,(C)
  CBAE  03            		INC	BC
  CBAF  D9            		EXX
  CBB0  ED79          		OUT	(C),A
  CBB2  03            		INC	BC
  CBB3  D9            		EXX
  CBB4  ED78          		IN	A,(C)
  CBB6  03            		INC	BC
  CBB7  D9            		EXX
  CBB8  ED79          		OUT	(C),A
  CBBA  03            		INC	BC
  CBBB  D9            		EXX
  CBBC  ED78          		IN	A,(C)
  CBBE  03            		INC	BC
  CBBF  D9            		EXX
  CBC0  ED79          		OUT	(C),A
  CBC2  03            		INC	BC
  CBC3  D9            		EXX
  CBC4  ED78          		IN	A,(C)
  CBC6  03            		INC	BC
  CBC7  D9            		EXX
  CBC8  ED79          		OUT	(C),A
  CBCA  03            		INC	BC
  CBCB  2D            		DEC	L
  CBCC  C26FEB        		JP	NZ,@UPSUB1+@R
  CBCF  C9            		RET
                      	
  CBD0                	@CPUE:
  CBD0                	INITE:
  CBD0                		DS	0CC06H-INITE
                      	
                      		
                      	;	LSX-Dodgers CCP
                      	
  CC06                	BDOS:
  CC06  C343D2        		JP	BDOS0
                      	
  CC09  2020          		DB	020H,020H
  0040                	PATHX	EQU	64
  CC0B                	PATHD:	DS	PATHX
  CC4B  00            	PATHE:	DB	0
                      	
  CC4C  4F6B24        	OK:	DB	"Ok$"
  CC4F  536B697024    	SKIP:	DB	"Skip$"
  CC54  6B206279746573	KBFREE:	DB	"k bytes free",9,"$"
  CC62  20202020646972	DIRMES:	DB	"    dir $"
  CC6B  074572726F7221	COMERM:	DB	7,"Error!$"
                      	
  CC73  09            	COMS	DB	9
  CC74                	COMTB:
  CC74  44202020      		DB	"D   "	;1
  CC78  CBCE          		DW	C_DIR
  CC7A  44495220      		DB	"DIR "	;2
  CC7E  CBCE          		DW	C_DIR
  CC80  434F5059      		DB	"COPY"	;3
  CC84  CAD0          		DW	C_COPY
  CC86  43442020      		DB	"CD  "	;4
  CC8A  C3CD          		DW	C_CD
  CC8C  44454C20      		DB	"DEL "	;5
  CC90  B1CE          		DW	C_DEL
  CC92  50415448      		DB	"PATH"	;6
  CC96  7FCF          		DW	C_PATH
  CC98  52454E20      		DB	"REN "	;7
  CC9C  BDCE          		DW	C_REN
  CC9E  54595045      		DB	"TYPE"	;8
  CCA2  EDD1          		DW	C_TYPE
  CCA4  52454D20      		DB	"REM "	;9
  CCA8  AFCE          		DW	C_REM
                      	
  CCAA                	_SYS00:
  CCAA  F3            		DI
  CCAB  310000        		LD	SP,STACK
                      	
  CCAE  3EEC          		LD	A,INTVEC/256
  CCB0  ED47          		LD	I,A
                      	
  CCB2  3EE4          		LD	A,0E4H
  CCB4  CD59DA        		CALL	COMOUT
  CCB7  3EC8          		LD	A,INTVEC
  CCB9  CD33DA        		CALL	OT49SB
                      	
  CCBC  3ABCEC        		LD	A,(CRTCD+12)
  CCBF  B7            		OR	A
  CCC0  200C          		JR	NZ,SETCRT0
  CCC2  2180F8        		LD	HL,0-80*LINE
  CCC5  22BAEC        		LD	(CRTCD+10),HL
  CCC8  21B0FF        		LD	HL,0-80
  CCCB  22BCEC        		LD	(CRTCD+12),HL
  CCCE                	SETCRT0:
  CCCE  21B0EC        		LD	HL,CRTCD
  CCD1  AF            		XOR	A
  CCD2                	SETCRT2:
  CCD2  010018        		LD	BC,01800H
  CCD5  ED79          		OUT	(C),A
  CCD7  0C            		INC	C
  CCD8  04            		INC	B
  CCD9  EDA3          		OUTI
  CCDB  3C            		INC	A
  CCDC  FE0C          		CP	12
  CCDE  20F2          		JR	NZ,SETCRT2
  CCE0  0D            		DEC	C
  CCE1  ED79          		OUT	(C),A
  CCE3  0C            		INC	C
  CCE4  ED71          		DB	0EDH,071H
  CCE6  0D            		DEC	C
  CCE7  3C            		INC	A
  CCE8  ED79          		OUT	(C),A
  CCEA  0C            		INC	C
  CCEB  ED71          		DB	0EDH,071H
  CCED  23            		INC	HL
  CCEE  23            		INC	HL
  CCEF  01031B        		LD	BC,01A03H+00100H
  CCF2  EDA3          		OUTI
  CCF4  01D020        		LD	BC,01FD0H+00100H
  CCF7  EDA3          		OUTI
  CCF9  CD75CF        		CALL	LTNL
  CCFC                	COMMAND:
  CCFC  CDB7CD        		CALL	SETDTA1
  CCFF  D5            		PUSH	DE
  CD00  3A87EC        		LD	A,(_DVSW)
  CD03  C641          		ADD	A,"A"
  CD05  5F            		LD	E,A
  CD06  CDCDEC        		CALL	_PRINT
  CD09  1E3E          		LD	E,">"
  CD0B  CDCDEC        		CALL	_PRINT
  CD0E  D1            		POP	DE		;DE=DTA1
  CD0F  3E50          		LD	A,80
  CD11  12            		LD	(DE),A
  CD12  0E0A          		LD	C,00AH
  CD14  CD0500        		CALL	SYSTEM
  CD17  CD75CF        		CALL	LTNL
                      	
  CD1A  118200        		LD	DE,DTA1+2
  CD1D  CDFDEC        		CALL	_COMANL
  CD20  30DA          		JR	NC,COMMAND
  CD22  CD73D6        		CALL	KEYBC
  CD25  116BCC        		LD	DE,COMERM
  CD28  CD6ED2        		CALL	_SYS09
  CD2B  C7            		RST	0
                      	
  CD2C                	COMANL:
  CD2C  CD8ADC        		CALL	FILE
  CD2F  D5            		PUSH	DE
  CD30  11DC00        		LD	DE,FNAME
  CD33  1A            		LD	A,(DE)
  CD34  FE20          		CP	020H
  CD36  2849          		JR	Z,SDVSW
  CD38  1B            		DEC	DE
  CD39  1A            		LD	A,(DE)
  CD3A  C6FF          		ADD	A,0FFH
  CD3C  380B          		JR	C,COMB
  CD3E  13            		INC	DE
                      	
  CD3F  2174CC        		LD	HL,COMTB
  CD42  3A73CC        		LD	A,(COMS)
  CD45  47            		LD	B,A
  CD46  CD0EDF        		CALL	CPNAME
  CD49                	COMB:
  CD49  D1            		POP	DE
  CD4A  D20F00        		JP	NC,[HL]
  CD4D  EB            		EX	DE,HL
  CD4E  222DCE        		LD	(COMPAT+1),HL
  CD51  2287CE        		LD	(BATPAT+1),HL
  CD54  F5            		PUSH	AF
  CD55  CDD5CD        		CALL	CEXE4
  CD58  F1            		POP	AF
  CD59  21DC00        		LD	HL,FNAME
  CD5C  116D00        		LD	DE,FCB2+1	;COMMAND NAME
  CD5F  010B00        		LD	BC,11
  CD62  EDB0          		LDIR
  CD64  110BCC        		LD	DE,PATHD
  CD67                	CEX1:
  CD67  1A            		LD	A,(DE)
  CD68  FE20          		CP	020H
  CD6A  D8            		RET	C
  CD6B  CD7FDC        		CALL	FILEC
  CD6E  D5            		PUSH	DE
  CD6F  216D00        		LD	HL,FCB2+1	;COMMAND NAME
  CD72  11DC00        		LD	DE,FNAME
  CD75  010B00        		LD	BC,11
  CD78  EDB0          		LDIR
  CD7A  CDD5CD        		CALL	CEXE4
  CD7D  D1            		POP	DE
  CD7E  13            		INC	DE
  CD7F  18E6          		JR	CEX1
                      	
  CD81                	SDVSW:
  CD81  F1            		POP	AF
  CD82  3ADB00        		LD	A,(FDRV)
  CD85  3D            		DEC	A
  CD86  5F            		LD	E,A
  CD87  0E0E          		LD	C,00EH
  CD89  1833          		JR	SYSTEM0
                      	
  CD8B                	OPEN1:
  CD8B  21DB00        		LD	HL,FDRV
  CD8E                	OPEN:
  CD8E  0E11          		LD	C,011H
  CD90                	OPEN3:
  CD90  D5            		PUSH	DE
  CD91  1151FF        		LD	DE,DTA
  CD94  CDB4CD        		CALL	SETDTA
  CD97  EB            		EX	DE,HL
  CD98  CD0500        		CALL	SYSTEM
  CD9B  D1            		POP	DE
  CD9C  B7            		OR	A
  CD9D  C9            		RET
                      	
  CD9E                	OPEN2:
  CD9E  0E12          		LD	C,012H
  CDA0  18EE          		JR	OPEN3
                      	
  CDA2                	DEFCB:				;Z=Ok NZ=Error
  CDA2  1151FF        		LD	DE,DTA
  CDA5  CDBCCD        		CALL	SYSC0F
                      	
  CDA8  210000        		LD	HL,0
  CDAB  2272FF        		LD	(DTA+33),HL
  CDAE  2274FF        		LD	(DTA+35),HL
  CDB1  110001        		LD	DE,00100H
  CDB4                	SETDTA:
  CDB4  C3B3D4        		JP	_SYS1A
                      	
  CDB7                	SETDTA1:
  CDB7  118000        		LD	DE,DTA1
  CDBA  18F8          		JR	SETDTA
                      	
  CDBC                	SYSC0F:
  CDBC  0E0F          		LD	C,00FH
  CDBE                	SYSTEM0:
  CDBE  CD0500        		CALL	SYSTEM
  CDC1  B7            		OR	A
  CDC2  C9            		RET
                      	
  CDC3                	C_CD:
  CDC3  CD7FDC        		CALL	FILEC
  CDC6  210000        		LD	HL,0
  CDC9  11DB00        		LD	DE,FDRV
  CDCC  1803          		JR	S27
                      	
  CDCE                	S27DTA:
  CDCE  1151FF        		LD	DE,DTA
  CDD1                	S27:
  CDD1  0E27          		LD	C,027H
  CDD3  18E9          		JR	SYSTEM0
                      	
  CDD5                	CEXE4:
  CDD5  3ADB00        		LD	A,(FDRV)
  CDD8  325700        		LD	(00057H),A
  CDDB  2AE900        		LD	HL,(FDRV+14)
  CDDE  225800        		LD	(00058H),HL
                      	
  CDE1  21E400        		LD	HL,FNAME+8
  CDE4  7E            		LD	A,(HL)
  CDE5  FE20          		CP	020H
  CDE7  2007          		JR	NZ,CEXE7
  CDE9  3E3F          		LD	A,"?"
  CDEB  77            		LD	(HL),A
  CDEC  23            		INC	HL
  CDED  77            		LD	(HL),A
  CDEE  23            		INC	HL
  CDEF  77            		LD	(HL),A
  CDF0                	CEXE7:
  CDF0  CD8BCD        		CALL	OPEN1
  CDF3                	CEXE5:
  CDF3  C0            		RET	NZ
  CDF4  2A5BFF        		LD	HL,(DTA+1+9)
  CDF7  7C            		LD	A,H
  CDF8  CD75DF        		CALL	CAP
  CDFB  67            		LD	H,A
  CDFC  7D            		LD	A,L
  CDFD  CD75DF        		CALL	CAP
  CE00  6F            		LD	L,A
  CE01  3A5AFF        		LD	A,(DTA+1+8)
  CE04  CD75DF        		CALL	CAP
  CE07  D642          		SUB	"B"
  CE09  2831          		JR	Z,C_BAT
  CE0B  3D            		DEC	A		;"C"
  CE0C  2805          		JR	Z,C_EXE
  CE0E                	CEXE6:
  CE0E  CD9ECD        		CALL	OPEN2
  CE11  18E0          		JR	CEXE5
                      	
  CE13                	C_EXE:
  CE13  7C            		LD	A,H
  CE14  FE4D          		CP	"M"
  CE16  20F6          		JR	NZ,CEXE6
                      	
  CE18  CDA2CD        		CALL	DEFCB
  CE1B  2A0600        		LD	HL,(SYSTEM+1)
  CE1E  25            		DEC	H
  CE1F  CDCECD        		CALL	S27DTA
  CE22  3D            		DEC	A
  CE23  37            		SCF
  CE24  C0            		RET	NZ
  CE25  7C            		LD	A,H
  CE26  B5            		OR	L
  CE27  37            		SCF
  CE28  C8            		RET	Z
  CE29  CDB7CD        		CALL	SETDTA1
  CE2C  110000        	COMPAT:	LD	DE,0
  CE2F  CD85D0        		CALL	SETFCB
  CE32  AF            		XOR	A
  CE33  67            		LD	H,A
  CE34  6F            		LD	L,A
  CE35  310000        		LD	SP,STACK
  CE38  E5            		PUSH	HL
  CE39  C30001        		JP	00100H
                      	
  CE3C                	C_BAT:
  CE3C  114154        		LD	DE,"A"+"T"*256
  CE3F  ED52          		SBC	HL,DE
  CE41  20CB          		JR	NZ,CEXE6
                      	
  CE43  F1            		POP	AF
  CE44  F1            		POP	AF
  CE45  CDA2CD        		CALL	DEFCB
  CE48  210002        		LD	HL,00200H
  CE4B  CDCECD        		CALL	S27DTA
  CE4E  C6FE          		ADD	A,0FEH
  CE50  D8            		RET	C
  CE51  7D            		LD	A,L
  CE52  B7            		OR	A
  CE53  37            		SCF
  CE54  C8            		RET	Z
  CE55  3C            		INC	A
  CE56  F5            		PUSH	AF
                      	
  CE57  CD73D6        		CALL	KEYBC
  CE5A  1E1A          		LD	E,01AH
  CE5C  CDCDEC        		CALL	_PRINT
  CE5F  C1            		POP	BC
  CE60  210001        		LD	HL,00100H
  CE63                	BAT1:
  CE63  A7            		AND	A
  CE64  05            		DEC	B
  CE65  C8            		RET	Z
  CE66  7E            		LD	A,(HL)
  CE67  FE25          		CP	"%"
  CE69  280C          		JR	Z,BAT2
  CE6B                	BAT1X:
  CE6B  7E            		LD	A,(HL)
  CE6C  23            		INC	HL
  CE6D  FE1A          		CP	01AH
  CE6F  C8            		RET	Z
  CE70  FE0A          		CP	00AH
  CE72  C459D6        		CALL	NZ,KEYBS
  CE75  18EC          		JR	BAT1
                      	
  CE77                	BAT2:
  CE77  23            		INC	HL
  CE78  7E            		LD	A,(HL)
  CE79  2B            		DEC	HL
  CE7A  D631          		SUB	"1"
  CE7C  38ED          		JR	C,BAT1X
  CE7E  FE09          		CP	9
  CE80  30E9          		JR	NC,BAT1X
  CE82  23            		INC	HL
  CE83  23            		INC	HL
  CE84  3C            		INC	A
  CE85  4F            		LD	C,A
  CE86  110000        	BATPAT:	LD	DE,0
  CE89                	BAT3:
  CE89  1A            		LD	A,(DE)
  CE8A  B7            		OR	A
  CE8B  28D6          		JR	Z,BAT1
  CE8D  CD64DD        		CALL	SPCUT
  CE90  0D            		DEC	C
  CE91  2808          		JR	Z,BAT5
  CE93                	BAT4:
  CE93  1A            		LD	A,(DE)
  CE94  FE21          		CP	021H
  CE96  38F1          		JR	C,BAT3
  CE98  13            		INC	DE
  CE99  18F8          		JR	BAT4
  CE9B                	BAT5:
  CE9B  1A            		LD	A,(DE)
  CE9C  FE21          		CP	021H
  CE9E  38C3          		JR	C,BAT1
  CEA0  13            		INC	DE
  CEA1  CD59D6        		CALL	KEYBS
  CEA4  18F5          		JR	BAT5
                      	
  CEA6                	SWITCH:
  CEA6  1A            		LD	A,(DE)
  CEA7                	SW1:
  CEA7  13            		INC	DE
  CEA8  B9            		CP	C
  CEA9  1A            		LD	A,(DE)
  CEAA  C8            		RET	Z
  CEAB  FE20          		CP	020H
  CEAD  30F8          		JR	NC,SW1
  CEAF                	C_REM:
  CEAF  AF            		XOR	A
  CEB0  C9            		RET
                      	
  CEB1                	C_DEL:
  CEB1  CD85D0        		CALL	SETFCB
  CEB4  0E08          		LD	C,8
  CEB6  CD0500        		CALL	SYSTEM
                      	
  CEB9  0E13          		LD	C,013H
  CEBB  1805          		JR	CDEL1
                      	
  CEBD                	C_REN:
  CEBD  CD85D0        		CALL	SETFCB
  CEC0  0E17          		LD	C,017H
  CEC2                	CDEL1:
  CEC2  115C00        		LD	DE,FCB1
  CEC5  CD0500        		CALL	SYSTEM
  CEC8  C6FF          		ADD	A,0FFH
  CECA  C9            		RET
                      	
  CECB                	C_DIR:
  CECB  CD7FDC        		CALL	FILEC
  CECE  21DC00        		LD	HL,FDRV+1
  CED1  CD29D2        		CALL	CWILD1
  CED4  3EF1          		LD	A,0F1H
  CED6  32E800        		LD	(FDRV+13),A
  CED9  CD8BCD        		CALL	OPEN1
  CEDC                	CDIR1:
  CEDC  B7            		OR	A
  CEDD  2008          		JR	NZ,PDSKF
  CEDF  CD26CF        		CALL	P_NAME
  CEE2  CD9ECD        		CALL	OPEN2
  CEE5  18F5          		JR	CDIR1
                      	
  CEE7                	PDSKF:
  CEE7  3ADB00        		LD	A,(FDRV)
  CEEA  5F            		LD	E,A
  CEEB  0E1B          		LD	C,01BH
  CEED  CD0500        		CALL	SYSTEM
  CEF0  4F            		LD	C,A
  CEF1  C601          		ADD	A,001H
  CEF3  D8            		RET	C
  CEF4  AF            		XOR	A
  CEF5                	PDS1:
  CEF5  0D            		DEC	C
  CEF6  2804          		JR	Z,PDS2
  CEF8  29            		ADD	HL,HL
  CEF9  8F            		ADC	A,A
  CEFA  18F9          		JR	PDS1
  CEFC                	PDS2:
  CEFC  CB50          		BIT	2,B
  CEFE  2006          		JR	NZ,PDSKF1
  CF00  CB3F          		SRL	A
  CF02  CB1C          		RR	H
  CF04  CB1D          		RR	L
  CF06                	PDSKF1:
  CF06  CDB1CF        		CALL	PRDEC
  CF09  1154CC        		LD	DE,KBFREE
  CF0C  CD6ED2        		CALL	_SYS09
  CF0F  CDA3CF        		CALL	PUTDRV
  CF12  3E5C          		LD	A,"\"
  CF14  CDAAD6        		CALL	MSG
  CF17  2AE900        		LD	HL,(FDRV+14)
  CF1A  7C            		LD	A,H
  CF1B  B5            		OR	L
  CF1C  2857          		JR	Z,LTNL
  CF1E  2B            		DEC	HL
  CF1F  7C            		LD	A,H
  CF20  B5            		OR	L
  CF21  C4B0CF        		CALL	NZ,PRDEC0
  CF24  184F          		JR	LTNL
                      	
  CF26                	P_NAME:
  CF26  3A52FF        		LD	A,(DTA+1)
  CF29  FE2E          		CP	"."
  CF2B  C8            		RET	Z
  CF2C  3E20          		LD	A,020H
  CF2E  CDAAD6        		CALL	MSG
  CF31  CDAAD6        		CALL	MSG
  CF34  3E3A          		LD	A,":"
  CF36  CDAAD6        		CALL	MSG
  CF39  3A5DFF        		LD	A,(DTA+1+00BH)
  CF3C  F5            		PUSH	AF
  CF3D  0F            		RRCA
  CF3E  9F            		SBC	A,A
  CF3F  E60A          		AND	"*"-020H
  CF41  C620          		ADD	A,020H
  CF43  0607          		LD	B,7
  CF45                	MZX:
  CF45  C5            		PUSH	BC
  CF46  CDAAD6        		CALL	MSG
  CF49  C1            		POP	BC
  CF4A  3E20          		LD	A,020H
  CF4C  10F7          		DJNZ	MZX
                      	
  CF4E  CDA3CF        		CALL	PUTDRV
  CF51  2152FF        		LD	HL,DTA+1
  CF54  CDF2CF        		CALL	FPRNT
                      	
  CF57  F1            		POP	AF
  CF58  CB67          		BIT	4,A
  CF5A  2808          		JR	Z,DIR3
  CF5C  1162CC        		LD	DE,DIRMES
  CF5F  CD6ED2        		CALL	_SYS09
  CF62  1809          		JR	DIR6
  CF64                	DIR3:
  CF64  3A70FF        		LD	A,(DTA+1+01EH)
  CF67  2A6EFF        		LD	HL,(DTA+1+01CH)
  CF6A  CDB1CF        		CALL	PRDEC
  CF6D                	DIR6:
  CF6D  3AB1EC        		LD	A,(CRTCD+1)
  CF70  FE29          		CP	40+1
  CF72  D414D0        		CALL	NC,PRTTMS
                      	
  CF75                	LTNL:
  CF75  1E0D          		LD	E,00DH
  CF77  CD25D7        		CALL	PRINTX
  CF7A  1E0A          		LD	E,00AH
  CF7C  C325D7        		JP	PRINTX
                      	
  CF7F                	C_PATH:
  CF7F  CD64DD        		CALL	SPCUT
  CF82  210BCC        		LD	HL,PATHD
  CF85  FE21          		CP	021H
  CF87  300E          		JR	NC,CPATH0
  CF89  2B            		DEC	HL
  CF8A  2B            		DEC	HL
  CF8B                	CPATHP:
  CF8B  7E            		LD	A,(HL)
  CF8C  23            		INC	HL
  CF8D  FE20          		CP	020H
  CF8F  3F            		CCF
  CF90  30E3          		JR	NC,LTNL
  CF92  CDAAD6        		CALL	MSG
  CF95  18F4          		JR	CPATHP
  CF97                	CPATH0:
  CF97  FE3B          		CP	";"
  CF99  2001          		JR	NZ,CPATH1
  CF9B  13            		INC	DE
  CF9C                	CPATH1:
  CF9C  EB            		EX	DE,HL
  CF9D  014000        		LD	BC,PATHX
  CFA0  EDB0          		LDIR
  CFA2  C9            		RET
                      	
  CFA3                	PUTDRV:
  CFA3  3ADB00        		LD	A,(FDRV)
  CFA6  C640          		ADD	A,"A"-1
  CFA8  CDAAD6        		CALL	MSG
  CFAB  3E3A          		LD	A,":"
  CFAD                	MSGR:
  CFAD  C3AAD6        		JP	MSG
                      	
  CFB0                	PRDEC0:
  CFB0  AF            		XOR	A
  CFB1                	PRDEC:
  CFB1  5F            		LD	E,A
  CFB2  010000        		LD	BC,0
  CFB5  ED43D600      		LD	(DECBF),BC
  CFB9  ED43D800      		LD	(DECBF+2),BC
                      	
  CFBD  0E18          		LD	C,24
  CFBF                	DEC1:
  CFBF  29            		ADD	HL,HL
  CFC0  7B            		LD	A,E
  CFC1  8F            		ADC	A,A
  CFC2  5F            		LD	E,A
  CFC3  E5            		PUSH	HL
  CFC4  21D900        		LD	HL,DECBF+3
  CFC7  0604          		LD	B,4
  CFC9                	DEC2:
  CFC9  7E            		LD	A,(HL)
  CFCA  8F            		ADC	A,A
  CFCB  27            		DAA
  CFCC  77            		LD	(HL),A
  CFCD  2B            		DEC	HL
  CFCE  10F9          		DJNZ	DEC2
  CFD0  E1            		POP	HL
  CFD1  0D            		DEC	C
  CFD2  20EB          		JR	NZ,DEC1
                      	
  CFD4  21D600        		LD	HL,DECBF
  CFD7  3E20          		LD	A,020H
  CFD9  0603          		LD	B,3
  CFDB                	DEC3:
  CFDB  CDE8CF        		CALL	DEC4
  CFDE  CDE8CF        		CALL	DEC4
  CFE1  23            		INC	HL
  CFE2  10F7          		DJNZ	DEC3
  CFE4                	DECX:
  CFE4  CDE8CF        		CALL	DEC4
  CFE7  AF            		XOR	A
  CFE8                	DEC4:
  CFE8  ED6F          		RLD
  CFEA  FE20          		CP	020H
  CFEC  2802          		JR	Z,DEC5
  CFEE  F630          		OR	030H
  CFF0                	DEC5:
  CFF0  18BB          		JR	MSGR
                      	
  CFF2                	FPRNT:
  CFF2  0608          		LD	B,8
  CFF4  CD05D0        		CALL	P_N1
  CFF7  7E            		LD	A,(HL)
  CFF8  C680          		ADD	A,0A0H-020H
  CFFA  FEA0          		CP	0A0H
  CFFC  2802          		JR	Z,FPR1
  CFFE  3E2E          		LD	A,"."
  D000                	FPR1:
  D000  CDAAD6        		CALL	MSG
  D003  0603          		LD	B,3
                      	
  D005                	P_N1:
  D005  C5            		PUSH	BC
  D006  E5            		PUSH	HL
  D007  7E            		LD	A,(HL)
  D008  CD81DF        		CALL	CAP3
  D00B  CDAAD6        		CALL	MSG
  D00E  E1            		POP	HL
  D00F  C1            		POP	BC
  D010  23            		INC	HL
  D011  10F2          		DJNZ	P_N1
  D013  C9            		RET
                      	
  D014                	PRTTMS:
  D014  3E20          		LD	A,020H
  D016  CDAAD6        		CALL	MSG
                      	
  D019  2A6AFF        		LD	HL,(DTA+1+24)
  D01C  7D            		LD	A,L
  D01D  B7            		OR	A
  D01E  C8            		RET	Z
  D01F  CB3C          		SRL	H
  D021  17            		RLA
  D022  17            		RLA
  D023  17            		RLA
  D024  17            		RLA
  D025  E60F          		AND	00FH
  D027  57            		LD	D,A
  D028  7C            		LD	A,H
  D029  C650          		ADD	A,80
  D02B  CD70D0        		CALL	PRTA
  D02E  3E2D          		LD	A,"-"
  D030  CDAAD6        		CALL	MSG
  D033  7A            		LD	A,D
  D034  CD70D0        		CALL	PRTA
  D037  3E2D          		LD	A,"-"
  D039  CDAAD6        		CALL	MSG
  D03C  7D            		LD	A,L
  D03D  E61F          		AND	01FH
  D03F  CD70D0        		CALL	PRTA
                      	
  D042  2A68FF        		LD	HL,(DTA+1+22)
                      	
  D045  3E20          		LD	A,020H
  D047  CDAAD6        		CALL	MSG
  D04A  7C            		LD	A,H
  D04B  65            		LD	H,L
  D04C  1F            		RRA
  D04D  CB1D          		RR	L
  D04F  1F            		RRA
  D050  CB1D          		RR	L
  D052  1F            		RRA
  D053  CB1D          		RR	L
  D055  E61F          		AND	01FH
  D057  CD70D0        		CALL	PRTA
  D05A  3E3A          		LD	A,":"
  D05C  CDAAD6        		CALL	MSG
  D05F  7D            		LD	A,L
  D060  0F            		RRCA
  D061  0F            		RRCA
  D062  E63F          		AND	03FH
  D064  CD70D0        		CALL	PRTA
  D067  3E3A          		LD	A,":"
  D069  CDAAD6        		CALL	MSG
  D06C  7C            		LD	A,H
  D06D  E61F          		AND	01FH
  D06F  87            		ADD	A,A
                      	
                      	;	PRINT10
                      	
  D070                	PRTA:
  D070  E5            		PUSH	HL
  D071  0608          		LD	B,8
  D073  4F            		LD	C,A
  D074  AF            		XOR	A
  D075                	PRTA1:
  D075  CB01          		RLC	C
  D077  8F            		ADC	A,A
  D078  27            		DAA
  D079  10FA          		DJNZ	PRTA1
  D07B  21D600        		LD	HL,DECBF
  D07E  77            		LD	(HL),A
  D07F  AF            		XOR	A
  D080  CDE4CF        		CALL	DECX
  D083  E1            		POP	HL
  D084  C9            		RET
                      	
  D085                	SETFCB:
  D085  CD64DD        		CALL	SPCUT
  D088  1A            		LD	A,(DE)
  D089  FE20          		CP	020H
  D08B  3801          		JR	C,SETFCBA
  D08D  1B            		DEC	DE
  D08E                	SETFCBA:
  D08E  D5            		PUSH	DE
  D08F  215C00        		LD	HL,FCB1
  D092  115D00        		LD	DE,FCB1+1
  D095  012300        		LD	BC,00023H
  D098  70            		LD	(HL),B		;B=0
  D099  EDB0          		LDIR
  D09B  D1            		POP	DE
  D09C  D5            		PUSH	DE
  D09D  215C00        		LD	HL,FCB1
  D0A0  0E29          		LD	C,029H
  D0A2  CD0500        		CALL	SYSTEM
  D0A5  216C00        		LD	HL,FCB2
  D0A8  0E29          		LD	C,029H
  D0AA  CD0500        		CALL	SYSTEM
  D0AD  E1            		POP	HL
  D0AE  010050        		LD	BC,05000H
  D0B1  118100        		LD	DE,00081H
  D0B4                	SETFCB1:
  D0B4  7E            		LD	A,(HL)
  D0B5  23            		INC	HL
  D0B6  FE20          		CP	020H
  D0B8  3805          		JR	C,SETFCB2
  D0BA  12            		LD	(DE),A
  D0BB  13            		INC	DE
  D0BC  0C            		INC	C
  D0BD  10F5          		DJNZ	SETFCB1
  D0BF                	SETFCB2:
  D0BF  79            		LD	A,C
  D0C0  328000        		LD	(DTA1),A
  D0C3  04            		INC	B
  D0C4  AF            		XOR	A
  D0C5                	SETFCB3:
  D0C5  12            		LD	(DE),A
  D0C6  13            		INC	DE
  D0C7  10FC          		DJNZ	SETFCB3
  D0C9  C9            		RET
                      	
  D0CA                	C_COPY:
  D0CA  CD85D0        		CALL	SETFCB
  D0CD  118100        		LD	DE,DTA1+1
  D0D0  0E2F          		LD	C,"/"
  D0D2  CDA6CE        		CALL	SWITCH
  D0D5  CD75DF        		CALL	CAP
  D0D8  3260D1        		LD	(SW+1),A
                      	
  D0DB  1163DC        		LD	DE,BEEPD
  D0DE  CD82DC        		CALL	FILEC2
  D0E1  216C00        		LD	HL,FCB2
  D0E4  CD33D5        		CALL	S29X1
                      	
  D0E7  3E10          		LD	A,010H
  D0E9  326900        		LD	(FCB1+13),A
  D0EC  216D00        		LD	HL,FCB2+1
  D0EF  CD29D2        		CALL	CWILD1
  D0F2                	COPY0:
  D0F2  CD26D2        		CALL	CWILD
  D0F5  215C00        		LD	HL,FCB1
  D0F8  CD8ECD        		CALL	OPEN
  D0FB  37            		SCF
  D0FC                	COPY1:
  D0FC  C0            		RET	NZ
  D0FD  CDA2CD        		CALL	DEFCB
                      	
  D100  3A5EFF        		LD	A,(DTA+13)
  D103  CB67          		BIT	4,A
  D105  2824          		JR	Z,COPY1A
                      	
  D107  215D00        		LD	HL,FCB1+1
  D10A  CD9CE0        		CALL	CHKWILD
  D10D  3817          		JR	C,COPY9
                      	
  D10F  3E20          		LD	A,020H
  D111  325D00        		LD	(FCB1+1),A
  D114  2A6BFF        		LD	HL,(DTA+26)
  D117  23            		INC	HL
  D118  226A00        		LD	(FCB1+14),HL
  D11B  18D5          		JR	COPY0
                      	
  D11D                	COPYS:
  D11D  114FCC        		LD	DE,SKIP
  D120                	COPY8:
  D120  CD6ED2        		CALL	_SYS09
  D123  CD75CF        		CALL	LTNL
  D126                	COPY9:
  D126  CD9ECD        		CALL	OPEN2
  D129  18D1          		JR	COPY1
                      	
  D12B                	COPY1A:
  D12B  216C00        		LD	HL,FCB2
  D12E  11DB00        		LD	DE,FDRV
  D131  0153FF        		LD	BC,DTA+2
  D134  EDA0          		LDI
  D136  3E0B          		LD	A,11
  D138                	COPY2:
  D138  F5            		PUSH	AF
  D139  7E            		LD	A,(HL)
  D13A  FE3F          		CP	"?"
  D13C  2001          		JR	NZ,COPY3
  D13E  0A            		LD	A,(BC)
  D13F                	COPY3:
  D13F  12            		LD	(DE),A
  D140  03            		INC	BC
  D141  13            		INC	DE
  D142  23            		INC	HL
  D143  F1            		POP	AF
  D144  3D            		DEC	A
  D145  20F1          		JR	NZ,COPY2
  D147  010500        		LD	BC,16-11
  D14A  EDB0          		LDIR
  D14C                	PUTNAME:
  D14C  215D00        		LD	HL,FCB1+1
  D14F  CD9CE0        		CALL	CHKWILD
  D152  300B          		JR	NC,PUTN1
  D154  21DC00        		LD	HL,FDRV+1
  D157  CDF2CF        		CALL	FPRNT
  D15A  3E20          		LD	A,020H
  D15C  CDAAD6        		CALL	MSG
  D15F                	PUTN1:
  D15F  3E00          	SW:	LD	A,000H
  D161  FE54          		CP	"T"
  D163  2005          		JR	NZ,CSW1
  D165  217FD1        		LD	HL,SWNE
  D168  1807          		JR	SWT1
  D16A                	CSW1:
  D16A  FE4E          		CP	"N"
  D16C  2011          		JR	NZ,SWNE
  D16E  211DD1        		LD	HL,COPYS
  D171                	SWT1:
  D171  11DB00        		LD	DE,FDRV
  D174  CDBCCD        		CALL	SYSC0F
  D177  2801          		JR	Z,SWN1
  D179  E9            		JP	(HL)
  D17A                	SWN1:
  D17A  CDD8D1        		CALL	CTIME
  D17D  309E          		JR	NC,COPYS
  D17F                	SWNE:
  D17F  11DB00        		LD	DE,FDRV
  D182  0E16          		LD	C,016H
  D184  CDBECD        		CALL	SYSTEM0
  D187  204D          		JR	NZ,COPYE2
  D189  67            		LD	H,A		;A=0
  D18A  6F            		LD	L,A
  D18B  22FC00        		LD	(FDRV+33),HL
  D18E  22FE00        		LD	(FDRV+35),HL
  D191                	COPY6:
  D191  CD38D2        		CALL	BUFSIZ
  D194  CDCECD        		CALL	S27DTA
  D197  47            		LD	B,A
  D198  3C            		INC	A
  D199  2833          		JR	Z,COPYE
  D19B  7C            		LD	A,H
  D19C  B5            		OR	L
  D19D  280E          		JR	Z,COPY7
  D19F  11DB00        		LD	DE,FDRV
  D1A2  0E26          		LD	C,026H
  D1A4  CD0500        		CALL	SYSTEM
  D1A7  B7            		OR	A
  D1A8  2024          		JR	NZ,COPYE
  D1AA  05            		DEC	B
  D1AB  20E4          		JR	NZ,COPY6
  D1AD                	COPY7:
  D1AD  3A5EFF        		LD	A,(DTA+13)
  D1B0  32E800        		LD	(FDRV+13),A
  D1B3  2165FF        		LD	HL,DTA+20
  D1B6  11EF00        		LD	DE,FDRV+20
  D1B9  010400        		LD	BC,4
  D1BC  EDB0          		LDIR
                      	
  D1BE  11DB00        		LD	DE,FDRV
  D1C1  0E10          		LD	C,010H
  D1C3  CDBECD        		CALL	SYSTEM0
  D1C6  2006          		JR	NZ,COPYE
                      	
  D1C8  114CCC        		LD	DE,OK
  D1CB  C320D1        		JP	COPY8
                      	
  D1CE                	COPYE:
  D1CE  11DB00        		LD	DE,FDRV
  D1D1  0E13          		LD	C,013H
  D1D3  CD0500        		CALL	SYSTEM
  D1D6                	COPYE2:
  D1D6  37            		SCF
  D1D7  C9            		RET
                      	
  D1D8                	CTIME:
  D1D8  ED5B65FF      		LD	DE,(DTA+20)
  D1DC  2AEF00        		LD	HL,(FDRV+20)
  D1DF  A7            		AND	A
  D1E0  ED52          		SBC	HL,DE
  D1E2  C0            		RET	NZ
  D1E3  ED5B67FF      		LD	DE,(DTA+22)
  D1E7  2AF100        		LD	HL,(FDRV+22)
  D1EA  ED52          		SBC	HL,DE
  D1EC  C9            		RET
                      	
  D1ED                	C_TYPE:
  D1ED  CD85D0        		CALL	SETFCB
  D1F0  215C00        		LD	HL,FCB1
  D1F3  CD8ECD        		CALL	OPEN
  D1F6  37            		SCF
  D1F7                	TYPE1:
  D1F7  C0            		RET	NZ
  D1F8  CDA2CD        		CALL	DEFCB
  D1FB  1E1A          		LD	E,01AH
  D1FD  CDCDEC        		CALL	_PRINT
  D200                	TYPE2:
  D200  CD38D2        		CALL	BUFSIZ
  D203  CDCECD        		CALL	S27DTA
  D206  C6FE          		ADD	A,0FEH
  D208  D8            		RET	C
  D209  7C            		LD	A,H
  D20A  B5            		OR	L
  D20B  2814          		JR	Z,TYPEE
  D20D  010001        		LD	BC,00100H
  D210                	TYPE3:
  D210  0A            		LD	A,(BC)
  D211  03            		INC	BC
  D212  FE1A          		CP	01AH
  D214  280B          		JR	Z,TYPEE
  D216  5F            		LD	E,A
  D217  CDB3D6        		CALL	_SYS02
  D21A  2B            		DEC	HL
  D21B  7C            		LD	A,H
  D21C  B5            		OR	L
  D21D  20F1          		JR	NZ,TYPE3
  D21F  18DF          		JR	TYPE2
  D221                	TYPEE:
  D221  CD9ECD        		CALL	OPEN2
  D224  18D1          		JR	TYPE1
                      	
  D226                	CWILD:
  D226  215D00        		LD	HL,FCB1+1
  D229                	CWILD1:
  D229  7E            		LD	A,(HL)
  D22A  FE20          		CP	020H
  D22C  C0            		RET	NZ
  D22D                	CWILD2:
  D22D  54            		LD	D,H
  D22E  5D            		LD	E,L
  D22F  13            		INC	DE
  D230  010A00        		LD	BC,10
  D233  363F          		LD	(HL),"?"
  D235  EDB0          		LDIR
  D237  C9            		RET
                      	
  D238                	BUFSIZ:
  D238  3A0700        		LD	A,(SYSTEM+2)
  D23B  D603          		SUB	3
  D23D  E6FC          		AND	0FCH
  D23F  67            		LD	H,A
  D240  2E00          		LD	L,0
  D242  C9            		RET
                      	
                      	
                      		
                      	;	LSX-Dodgers OS
                      	
  D243                	BDOS0:
  D243  79            		LD	A,C
  D244  FE31          		CP	031H
  D246  301E          		JR	NC,_ERROR
  D248  ED7363D2      		LD	(BDSP+1),SP
  D24C  31D4FF        		LD	SP,EXTSP
  D24F  E5            		PUSH	HL
  D250  C5            		PUSH	BC
  D251  CB21          		SLA	C
  D253  06EC          		LD	B,STABLE/256
  D255  0A            		LD	A,(BC)
  D256  6F            		LD	L,A
  D257  03            		INC	BC
  D258  0A            		LD	A,(BC)
  D259  67            		LD	H,A
  D25A  2260D2        		LD	(BDOS1+1),HL
  D25D  C1            		POP	BC
  D25E  E1            		POP	HL
  D25F  CD0000        	BDOS1:	CALL	0
                      	
  D262  310000        	BDSP:	LD	SP,0
  D265  C9            		RET
                      	
  D266                	_ERROR:
  D266  013201        		LD	BC,00132H
  D269  112501        		LD	DE,VER
  D26C                	_SYS1C:
  D26C                	_SYS1E:
  D26C                	_SYS20:
  D26C                	_SYS2E:
  D26C  AF            		XOR	A
  D26D  C9            		RET
                      	
  D26E                	_SYS09:
  D26E  D5            		PUSH	DE
  D26F                	_SX09:
  D26F  1A            		LD	A,(DE)
  D270  13            		INC	DE
  D271  FE24          		CP	"$"
  D273  282C          		JR	Z,SX0E2
  D275  D5            		PUSH	DE
  D276  5F            		LD	E,A
  D277  CDB3D6        		CALL	_SYS02
  D27A  D1            		POP	DE
  D27B  18F2          		JR	_SX09
                      	
  D27D                	_SYS0C:
  D27D  212200        		LD	HL,00022H
  D280  AF            		XOR	A
  D281  7D            		LD	A,L
  D282  C9            		RET
                      	
  D283                	_SYS0D:
  D283  CDDFEC        		CALL	_FFLUSH
  D286  E5            		PUSH	HL
  D287  218000        		LD	HL,00080H
  D28A  228AEC        		LD	(_DTA),HL
  D28D  E1            		POP	HL
  D28E  D5            		PUSH	DE
  D28F  1E00          		LD	E,0
  D291  3E            		DB	03EH
                      	
  D292                	_SYS0E:
  D292  D5            		PUSH	DE
  D293  7B            		LD	A,E
  D294  DDE5          		PUSH	IX
  D296  CDDCEC        		CALL	_GETDPB
  D299  DDE1          		POP	IX
  D29B  3804          		JR	C,SX0E2
  D29D  7B            		LD	A,E
  D29E  3287EC        		LD	(_DVSW),A
  D2A1                	SX0E2:
  D2A1  3E08          		LD	A,8
  D2A3  D1            		POP	DE
  D2A4  C9            		RET
                      	
  D2A5                	_SYS0F:
  D2A5  CD76DD        		CALL	SETDRV
  D2A8  FD7E1C        		LD	A,(IY+28)	;Open
  D2AB  C602          		ADD	A,002H		;Write
  D2AD  2868          		JR	Z,FEND0F
  D2AF  CD98E0        		CALL	CHKWILDX
                      	
  D2B2  D498DD        		CALL	NC,SOPENX
  D2B5                	_S16XX:
  D2B5  3860          		JR	C,FEND0F
                      					;Directory location
  D2B7  3A9FEC        		LD	A,(_FILEN)
  D2BA  FD7719        		LD	(IY+25),A
                      	;				_DIRF
  D2BD  3AA0EC        		LD	A,(_DIRF)
  D2C0  FD771D        		LD	(IY+29),A
                      	;				_FBPS
  D2C3  FD731E        		LD	(IY+30),E
  D2C6  FD721F        		LD	(IY+31),D
                      	;				Open(Read)
  D2C9  FD361CFF      		LD	(IY+28),0FFH
                      	;				FILENAME
  D2CD  FDE5          		PUSH	IY
  D2CF  D1            		POP	DE
  D2D0  13            		INC	DE
  D2D1  010B00        		LD	BC,11
  D2D4  EDB0          		LDIR
                      	;				Attribute
  D2D6  7E            		LD	A,(HL)
  D2D7  FD770D        		LD	(IY+13),A
                      	;				TIME
  D2DA  110B00        		LD	DE,11
  D2DD  19            		ADD	HL,DE
  D2DE  7E            		LD	A,(HL)
  D2DF  23            		INC	HL
  D2E0  FD7716        		LD	(IY+22),A
  D2E3  7E            		LD	A,(HL)
  D2E4  23            		INC	HL
  D2E5  FD7717        		LD	(IY+23),A
                      	;				DATE
  D2E8  7E            		LD	A,(HL)
  D2E9  23            		INC	HL
  D2EA  FD7714        		LD	(IY+20),A
  D2ED  7E            		LD	A,(HL)
  D2EE  23            		INC	HL
  D2EF  FD7715        		LD	(IY+21),A
                      	;				First cluster
  D2F2  7E            		LD	A,(HL)
  D2F3  23            		INC	HL
  D2F4  FD771A        		LD	(IY+26),A
  D2F7  7E            		LD	A,(HL)
  D2F8  23            		INC	HL
  D2F9  FD771B        		LD	(IY+27),A
                      	;				SIZE
  D2FC  7E            		LD	A,(HL)
  D2FD  23            		INC	HL
  D2FE  FD7710        		LD	(IY+16),A
  D301  7E            		LD	A,(HL)
  D302  23            		INC	HL
  D303  FD7711        		LD	(IY+17),A
  D306  7E            		LD	A,(HL)
  D307  23            		INC	HL
  D308  FD7712        		LD	(IY+18),A
  D30B  7E            		LD	A,(HL)
  D30C  FD7713        		LD	(IY+19),A
  D30F  AF            		XOR	A
  D310  FD770C        		LD	(IY+12),A
  D313  FD22D5D3      		LD	(OFCB+1),IY
  D317                	FEND0F:
  D317  C3BCD3        		JP	FEND
                      	
  D31A                	_SYS10:
  D31A  CD76DD        		CALL	SETDRV
  D31D  FD7E1C        		LD	A,(IY+28)	;Open
  D320  D6FE          		SUB	0FEH
  D322  37            		SCF
  D323  3F            		CCF
  D324  2032          		JR	NZ,FEND10
  D326                	_S10A:				;Write
  D326  FD770E        		LD	(IY+14),A
  D329  FD770F        		LD	(IY+15),A
                      	
  D32C  FD341C        		INC	(IY+28)		;0FEH->0FFH
  D32F  CD89E1        		CALL	SETTMS
                      	
  D332  FD7E1D        		LD	A,(IY+29)
  D335  32A0EC        		LD	(_DIRF),A
  D338  FD5E1E        		LD	E,(IY+30)
  D33B  FD561F        		LD	D,(IY+31)
  D33E  CDBADE        		CALL	DC
  D341  3879          		JR	C,FEND
                      	
  D343  FD7E19        		LD	A,(IY+25)
  D346  87            		ADD	A,A
  D347  87            		ADD	A,A
  D348  87            		ADD	A,A
  D349  E6FF          	IBM2:	AND	0FFH		;ooo 07FH
  D34B  6F            		LD	L,A
  D34C  2600          		LD	H,0
  D34E  29            		ADD	HL,HL
  D34F  29            		ADD	HL,HL
  D350  ED4B7EEC      		LD	BC,(_DTBUF)
  D354  09            		ADD	HL,BC
                      	
  D355  CDA8E0        		CALL	SDIRENT
  D358                	FEND10:
  D358  1862          		JR	FEND
                      	
  D35A                	OPENDD:
  D35A  FD361CFD      		LD	(IY+28),0FDH
  D35E  FD360D20      		LD	(IY+13),020H
  D362  CD8EE1        		CALL	SETTMSX
  D365  1855          		JR	FEND
                      	
  D367                	_SYS11:
  D367  CD76DD        		CALL	SETDRV
  D36A  CD01DF        		CALL	CHKDDX
  D36D  3818          		JR	C,_S11A
  D36F  FDE5          		PUSH	IY
  D371  E1            		POP	HL
  D372  ED5B8AEC      		LD	DE,(_DTA)
  D376  010C00        		LD	BC,12
  D379  EDB0          		LDIR
  D37B  3E20          		LD	A,020H
  D37D  12            		LD	(DE),A
  D37E  13            		INC	DE
  D37F  62            		LD	H,D
  D380  6B            		LD	L,E
  D381  13            		INC	DE
  D382  0E13          		LD	C,19
  D384  70            		LD	(HL),B
  D385  1833          		JR	_S11B
  D387                	_S11A:
  D387  CDCCDD        		CALL	SOPEN
  D38A                	_S12X1:
  D38A  3830          		JR	C,FEND
  D38C  CD75DE        		CALL	SOPENE2
  D38F  ED5B8AEC      		LD	DE,(_DTA)
  D393  3A88EC        		LD	A,(_DRV)
  D396  3C            		INC	A
  D397  12            		LD	(DE),A
  D398  D5            		PUSH	DE
  D399  13            		INC	DE
  D39A  012000        		LD	BC,32
  D39D  EDB0          		LDIR
  D39F  FD6E0E        		LD	L,(IY+14)
  D3A2  FD660F        		LD	H,(IY+15)
  D3A5  2236E2        		LD	(SCDIR),HL
  D3A8  2A9AEC        		LD	HL,(_FBPS)
  D3AB  2238E2        		LD	(SFBPS),HL
  D3AE  2A9FEC        		LD	HL,(_FILEN)
  D3B1  223AE2        		LD	(SFNDF),HL	;Directory position and Flags
  D3B4  E1            		POP	HL
  D3B5  113CE2        		LD	DE,SFILE
  D3B8  0E21          		LD	C,33
  D3BA                	_S11B:
  D3BA  EDB0          		LDIR
  D3BC                	FEND:
  D3BC  9F            		SBC	A,A		;CF=0 A=0 : CF=1 A=0FFH
  D3BD                	FENDE:
  D3BD  FDE1          		POP	IY
  D3BF  C1            		POP	BC
  D3C0  D1            		POP	DE
  D3C1  E1            		POP	HL
  D3C2  C9            		RET
                      	
  D3C3                	_SYS12:
  D3C3  E5            		PUSH	HL
  D3C4  D5            		PUSH	DE
  D3C5  C5            		PUSH	BC
  D3C6  FDE5          		PUSH	IY
  D3C8  CD31DE        		CALL	NOPEN
  D3CB  18BD          		JR	_S12X1
                      	
  D3CD                	_S16K:
  D3CD  FD7E1C        		LD	A,(IY+28)	;Device
  D3D0  FEFD          		CP	0FDH
  D3D2  37            		SCF
  D3D3  C8            		RET	Z
                      	
  D3D4  110000        	OFCB:	LD	DE,0
  D3D7  D5            		PUSH	DE
  D3D8  061A          		LD	B,26		;First cluster
  D3DA                	S16K1:
  D3DA  13            		INC	DE
  D3DB  23            		INC	HL
  D3DC  10FC          		DJNZ	S16K1
                      	
  D3DE  1A            		LD	A,(DE)
  D3DF  BE            		CP	(HL)
  D3E0  2013          		JR	NZ,S16K2
  D3E2  13            		INC	DE
  D3E3  23            		INC	HL
  D3E4  1A            		LD	A,(DE)
  D3E5  BE            		CP	(HL)
  D3E6  200D          		JR	NZ,S16K2
                      	
  D3E8  E1            		POP	HL
  D3E9  FDE5          		PUSH	IY
  D3EB  D1            		POP	DE
  D3EC  1A            		LD	A,(DE)		;Drive
  D3ED  BE            		CP	(HL)
  D3EE  2005          		JR	NZ,S16K2
                      	
  D3F0  ED52          		SBC	HL,DE		;CP HL,DE
  D3F2  37            		SCF
  D3F3  C0            		RET	NZ
  D3F4  E5            		PUSH	HL
  D3F5                	S16K2:
  D3F5  E1            		POP	HL
  D3F6  FDE5          		PUSH	IY
  D3F8  D1            		POP	DE
  D3F9                	_SYS13:
  D3F9  CD76DD        		CALL	SETDRV
  D3FC  CDC4DF        		CALL	KILL
  D3FF                	FEND13:
  D3FF  18BB          		JR	FEND
                      	
  D401                	_SYS14:
  D401  CD76DD        		CALL	SETDRV
  D404  CDBDE1        		CALL	PUSHRR
  D407  CDFEE1        		CALL	GETSEQ
  D40A  CD0BE2        		CALL	SETRBR
                      	
  D40D  CD24E2        		CALL	[DE27]
                      	
  D410  E5            		PUSH	HL
  D411  CDD1E1        		CALL	SETSEQ
  D414                	SREAD:
  D414  E1            		POP	HL
                      	
  D415  C601          		ADD	A,001H
  D417  38A3          		JR	C,FEND
                      	
  D419  7D            		LD	A,L
  D41A  D601          		SUB	001H
  D41C                	FENDX:
  D41C  9F            		SBC	A,A
  D41D  E603          		AND	3
  D41F  1F            		RRA
  D420  189B          		JR	FENDE
                      	
  D422                	_SYS15:
  D422  CD76DD        		CALL	SETDRV
  D425  CDBDE1        		CALL	PUSHRR
  D428  CDFEE1        		CALL	GETSEQ
  D42B  CD0BE2        		CALL	SETRBR
                      	
  D42E  CD1EE2        		CALL	[DE26]
  D431  E5            		PUSH	HL
  D432  CDD1E1        		CALL	SETSEQ
  D435                	SWRITE:
  D435  E1            		POP	HL
                      	
  D436  C6FF          		ADD	A,0FFH
  D438  18E2          		JR	FENDX
                      	
  D43A                	_SYS17:
  D43A  CD76DD        		CALL	SETDRV
  D43D  CD20E0        		CALL	NAME
  D440  18BD          		JR	FEND13
                      	
  D442                	_SYS16:
  D442  CD76DD        		CALL	SETDRV
                      	
  D445  CD98E0        		CALL	CHKWILDX
  D448  38B5          		JR	C,FEND13
  D44A  FD7E01        		LD	A,(IY+1)
  D44D  FE05          		CP	5
  D44F  2805          		JR	Z,_S16X2
  D451  FE21          		CP	021H
  D453  DAFFD3        		JP	C,FEND13
  D456                	_S16X2:
                      	;				Clear FCB
  D456  FDE5          		PUSH	IY
  D458  E1            		POP	HL
  D459  011000        		LD	BC,16
  D45C  09            		ADD	HL,BC
  D45D                	_S16X1:
  D45D  70            		LD	(HL),B
  D45E  23            		INC	HL
  D45F  0D            		DEC	C
  D460  20FB          		JR	NZ,_S16X1
                      	
  D462  CD8EE1        		CALL	SETTMSX
  D465  FD360DFF      		LD	(IY+13),0FFH	;Attribute
  D469  CD98DD        		CALL	SOPENX
  D46C  3F            		CCF
  D46D  CCCDD3        		CALL	Z,_S16K
  D470  D486DE        		CALL	NC,COPEN
  D473  D4A8E0        		CALL	NC,SDIRENT
  D476  C3B5D2        		JP	_S16XX
                      	
  D479                	_SYS21:
  D479  CD76DD        		CALL	SETDRV
  D47C  CDBDE1        		CALL	PUSHRR
  D47F  FD6E21        		LD	L,(IY+33)	;Random record
  D482  FD6622        		LD	H,(IY+34)
  D485  CD0BE2        		CALL	SETRBR
                      	
  D488  CD24E2        		CALL	[DE27]
  D48B  E5            		PUSH	HL
  D48C  CDE8E1        		CALL	POPRR
  D48F  1883          		JR	SREAD
                      	
  D491                	_SYS22:
  D491                	_SYS28:
  D491  CD76DD        		CALL	SETDRV
  D494  CDBDE1        		CALL	PUSHRR
  D497  FD6E21        		LD	L,(IY+33)	;Random record
  D49A  FD6622        		LD	H,(IY+34)
  D49D  CD0BE2        		CALL	SETRBR
                      	
  D4A0  CD1EE2        		CALL	[DE26]
  D4A3  E5            		PUSH	HL
  D4A4  CDE8E1        		CALL	POPRR
  D4A7  188C          		JR	SWRITE
                      	
  D4A9                	_SYS18:
  D4A9  21FF00        		LD	HL,000FFH
  D4AC  AF            		XOR	A
  D4AD  C9            		RET
                      	
  D4AE                	_SYS19:
  D4AE  3A87EC        		LD	A,(_DVSW)
  D4B1  A7            		AND	A
  D4B2  C9            		RET
                      	
  D4B3                	_SYS1A:
  D4B3  ED538AEC      		LD	(_DTA),DE
  D4B7  AF            		XOR	A
  D4B8  C9            		RET
                      	
  D4B9                	_SYS1B:
  D4B9  7B            		LD	A,E
  D4BA  CD8BDD        		CALL	GETDRV
  D4BD  CDDCEC        		CALL	_GETDPB
  D4C0  D4E2EC        		CALL	NC,_RDFATX
  D4C3  210000        		LD	HL,0
  D4C6  D46EE1        		CALL	NC,DSKF
                      	
  D4C9  DD5E08        		LD	E,(IX+8)
  D4CC  DD5609        		LD	D,(IX+9)	;¿³¸×½À
  D4CF  1B            		DEC	DE
  D4D0  1B            		DEC	DE
  D4D1  FD2A7CEC      		LD	IY,(_FATBF)
  D4D5  9F            		SBC	A,A
  D4D6  D8            		RET	C
  D4D7  DD7E07        		LD	A,(IX+7)
  D4DA  B7            		OR	A
  D4DB  010002        		LD	BC,00200H
  D4DE  78            		LD	A,B		;A=2
  D4DF  C0            		RET	NZ
  D4E0  3D            		DEC	A		;A=1
  D4E1  DDCB0F7E      		BIT	7,(IX+00FH)
  D4E5  C0            		RET	NZ
  D4E6  0604          		LD	B,004H
  D4E8  C9            		RET
                      	
  D4E9                	_SYS1D:
  D4E9  AF            		XOR	A
  D4EA  67            		LD	H,A
  D4EB  6F            		LD	L,A
  D4EC  C9            		RET
                      	
  D4ED                	_SYS1F:
  D4ED  2100ED        		LD	HL,DEVICE
  D4F0  AF            		XOR	A
  D4F1  C9            		RET
                      	
  D4F2                	_SYS23:
  D4F2  E5            		PUSH	HL
  D4F3  2A1EEC        		LD	HL,(STABLE+2*00FH)
  D4F6  CD0F00        		CALL	[HL]
  D4F9  3814          		JR	C,FSIZE1
                      	;	EX	DE,IY
  D4FB  D5            		PUSH	DE
  D4FC  FDE3          		EX	(SP),IY
  D4FE  D1            		POP	DE
                      	;
  D4FF  D5            		PUSH	DE
  D500  CDEEE1        		CALL	GETSIZE
  D503  FD7521        		LD	(IY+33),L	;Random record
  D506  FD7422        		LD	(IY+34),H
  D509  D1            		POP	DE
                      	;	EX	DE,IY
  D50A  D5            		PUSH	DE
  D50B  FDE3          		EX	(SP),IY
  D50D  D1            		POP	DE
                      	;
  D50E  AF            		XOR	A
  D50F                	FSIZE1:
  D50F  E1            		POP	HL
  D510  C9            		RET
                      	
  D511                	_SYS24:
  D511  C5            		PUSH	BC
                      	;	EX	DE,IY
  D512  D5            		PUSH	DE
  D513  FDE3          		EX	(SP),IY
  D515  D1            		POP	DE
                      	;
  D516  D5            		PUSH	DE
  D517  CDFEE1        		CALL	GETSEQ
  D51A  FD7521        		LD	(IY+33),L	;Random record
  D51D  FD7422        		LD	(IY+34),H
  D520  FD362300      		LD	(IY+35),0
  D524  D1            		POP	DE
                      	;	EX	DE,IY
  D525  D5            		PUSH	DE
  D526  FDE3          		EX	(SP),IY
  D528  D1            		POP	DE
                      	;
  D529  C1            		POP	BC
  D52A  AF            		XOR	A
  D52B  C9            		RET
                      	
  D52C                	_SYS29:
  D52C  C5            		PUSH	BC
  D52D  E5            		PUSH	HL
  D52E  CD8ADC        		CALL	FILE
  D531  E1            		POP	HL
  D532  C1            		POP	BC
  D533                	S29X1:
  D533  C5            		PUSH	BC
  D534  D5            		PUSH	DE
  D535  E5            		PUSH	HL
  D536  EB            		EX	DE,HL
  D537  21DB00        		LD	HL,FDRV
  D53A  010D00        		LD	BC,13
  D53D  EDB0          		LDIR
  D53F  70            		LD	(HL),B
  D540  0E03          		LD	C,3
  D542  EDB0          		LDIR
  D544  E1            		POP	HL
  D545  D1            		POP	DE
  D546  C1            		POP	BC
  D547  AF            		XOR	A
  D548  C9            		RET
                      	
  D549                	_SYS30:
  D549  C5            		PUSH	BC
  D54A  01F4EC        		LD	BC,_DWT
  D54D  1804          		JR	S2FX
  D54F                	_SYS2F:
  D54F  C5            		PUSH	BC
  D550  01F1EC        		LD	BC,_DRD
  D553                	S2FX:
  D553  ED4368D5      		LD	(S2FPAT+1),BC
  D557  CDBFE8        		CALL	FFLUSH
                      	
  D55A  D5            		PUSH	DE
  D55B  E5            		PUSH	HL
  D55C  7D            		LD	A,L		;Drive
  D55D  CDD9EC        		CALL	_CHGDRV
  D560  380D          		JR	C,S30X2
  D562  44            		LD	B,H		;Number of clusters
  D563  2A8AEC        		LD	HL,(_DTA)
  D566                	S30X:
  D566  C5            		PUSH	BC
  D567  CDF1EC        	S2FPAT:	CALL	_DRD
  D56A  C1            		POP	BC
  D56B  3802          		JR	C,S30X2
  D56D  10F7          		DJNZ	S30X
  D56F                	S30X2:
  D56F  E1            		POP	HL
  D570  D1            		POP	DE
  D571  C1            		POP	BC
  D572  9F            		SBC	A,A
  D573  C9            		RET
                      	
                      	
                      		
                      	;	LSX-Dodgers IO
                      	
                      	
  D574                	BIOS:
  D574  ED738ED5      		LD	(SPPAT+1),SP
  D578  F5            		PUSH	AF
  D579  3A8FD5        		LD	A,(SPPAT+2)
  D57C  3C            		INC	A
  D57D  2806          		JR	Z,BIOS2
  D57F  F1            		POP	AF
  D580  31D4FF        		LD	SP,EXTSP
  D583  1801          		JR	BIOS3
  D585                	BIOS2:
  D585  F1            		POP	AF
  D586                	BIOS3:
  D586  CD91D5        		CALL	BIOS1
  D589  061E          		LD	B,01EH
  D58B  ED79          		OUT	(C),A
  D58D  310000        	SPPAT:	LD	SP,0
  D590  C9            		RET
  D591                	BIOS1:
  D591  C5            		PUSH	BC
  D592  061D          		LD	B,01DH
  D594  ED79          		OUT	(C),A
  D596  C9            		RET
                      	
  D597                	INT:
  D597  F5            		PUSH	AF
  D598  E5            		PUSH	HL
  D599  C5            		PUSH	BC
  D59A  210001        		LD	HL,00100H
  D59D  39            		ADD	HL,SP
  D59E  3807          		JR	C,INTP1
  D5A0  ED73D2D5      		LD	(INTSP+1),SP
  D5A4  31D4FF        		LD	SP,EXTSP
  D5A7                	INTP1:
  D5A7  CD3EDA        		CALL	IN49SB
  D5AA  67            		LD	H,A
  D5AB  CD3EDA        		CALL	IN49SB
  D5AE  6F            		LD	L,A
                      	
  D5AF  CB64          		BIT	4,H		;[GRAPH]
  D5B1  2010          		JR	NZ,SCEXE
  D5B3  7D            		LD	A,L
  D5B4  EE09          		XOR	9
  D5B6  2839          		JR	Z,DIAN
  D5B8  7C            		LD	A,H
  D5B9  0F            		RRCA			;[CTRL]
  D5BA  301E          		JR	NC,SCL
  D5BC  0F            		RRCA			;[SHIFT]
  D5BD  3804          		JR	C,SCEXE
  D5BF  3E80          		LD	A,080H
  D5C1  181E          		JR	SCG1
  D5C3                	SCEXE:
  D5C3  2292EC        		LD	(_KEYD),HL
  D5C6  CD26D6        		CALL	KEYSET1
                      	
  D5C9  21D4FF        		LD	HL,EXTSP
  D5CC  A7            		AND	A
  D5CD  ED72          		SBC	HL,SP
  D5CF  2003          		JR	NZ,INTPE1
                      	
  D5D1  310000        	INTSP:	LD	SP,0
  D5D4                	INTPE1:
  D5D4  C1            		POP	BC
  D5D5                	INTPE:
  D5D5  E1            		POP	HL
  D5D6                	INTPE2:
  D5D6  F1            		POP	AF
  D5D7                	INTCTCE:
  D5D7  FB            		EI
  D5D8  ED4D          		RETI
                      	
  D5DA                	SCL:
  D5DA  7D            		LD	A,L
  D5DB  FE08          		CP	008H
  D5DD  280D          		JR	Z,RESET
                      	
  D5DF  3E02          		LD	A,002H
  D5E1                	SCG1:
  D5E1  E5            		PUSH	HL
  D5E2  21BFEC        		LD	HL,WK1FD0
  D5E5  AE            		XOR	(HL)
  D5E6  CDF5EB        		CALL	S1FD0
  D5E9  E1            		POP	HL
  D5EA  18D7          		JR	SCEXE
                      	
  D5EC                	RESET:
  D5EC  3E1D          		LD	A,01DH
  D5EE  D300          		OUT	(0),A
  D5F0  C7            		RST	0
                      	
  D5F1                	DIAN:
  D5F1  6F            		LD	L,A
  D5F2  C5            		PUSH	BC
  D5F3  01B01F        		LD	BC,01FB0H
  D5F6  ED78          		IN	A,(C)
  D5F8  EE80          		XOR	080H
  D5FA  ED79          		OUT	(C),A
  D5FC  C1            		POP	BC
  D5FD  18C4          		JR	SCEXE
                      	
  D5FF                	INTCTC2:
  D5FF  F5            		PUSH	AF
  D600  3E00          	INTCPAT:LD	A,000H
  D602  3D            		DEC	A
  D603  3201D6        		LD	(INTCPAT+1),A
  D606  20CE          		JR	NZ,INTPE2
                      	
  D608  3A92EC        		LD	A,(_KEYD)
  D60B  B7            		OR	A
  D60C  28C8          		JR	Z,INTPE2
  D60E                	KEYSET0:
  D60E  E5            		PUSH	HL
  D60F  2A90EC        		LD	HL,(_KEYPS)
  D612  7C            		LD	A,H
  D613  AD            		XOR	L
  D614  2006          		JR	NZ,INTC2A
                      	
  D616  2A92EC        		LD	HL,(_KEYD)
  D619  CD50D6        		CALL	KEYSET
  D61C                	INTC2A:
  D61C  3A94EC        		LD	A,(_KEYSP)
  D61F  E60F          		AND	00FH
  D621  3201D6        		LD	(INTCPAT+1),A
                      	
  D624  18AF          		JR	INTPE
                      	
  D626                	KEYSET1:
  D626  CB6C          		BIT	5,H
  D628  F5            		PUSH	AF
  D629  ED4B8CEC      		LD	BC,(_CTC)
  D62D  78            		LD	A,B
  D62E  B1            		OR	C
  D62F  2006          		JR	NZ,KEYS10E
                      	
  D631  F1            		POP	AF
  D632  201C          		JR	NZ,KEYSET
  D634  F5            		PUSH	AF
  D635  18D7          		JR	KEYSET0
  D637                	KEYS10E:
  D637  F1            		POP	AF
  D638  C8            		RET	Z
  D639  F5            		PUSH	AF
  D63A  3E03          		LD	A,3		;CTC STOP
  D63C  ED79          		OUT	(C),A
  D63E  F1            		POP	AF
                      	
  D63F  B7            		OR	A
  D640  C8            		RET	Z
                      	
  D641  E5            		PUSH	HL
  D642  2A94EC        		LD	HL,(_KEYSP)
  D645  3EA7          		LD	A,0A7H
  D647  ED79          		OUT	(C),A
  D649  ED69          		OUT	(C),L
  D64B  7C            		LD	A,H
  D64C  3201D6        		LD	(INTCPAT+1),A
  D64F  E1            		POP	HL
                      	
  D650                	KEYSET:
  D650  7D            		LD	A,L
  D651  CB7C          		BIT	7,H
  D653  CC80D6        		CALL	Z,FKEY
  D656  CB74          		BIT	6,H
  D658  C0            		RET	NZ
  D659                	KEYBS:
  D659  B7            		OR	A
  D65A  C8            		RET	Z
  D65B                	KEYBS1:
  D65B  FE03          		CP	3
  D65D  CC73D6        		CALL	Z,KEYBC
  D660  E5            		PUSH	HL
  D661  F5            		PUSH	AF
  D662  2A90EC        		LD	HL,(_KEYPS)
  D665  2C            		INC	L
  D666  7D            		LD	A,L
  D667  BC            		CP	H
  D668  2812          		JR	Z,KEYBE
  D66A  3290EC        		LD	(_KEYPS),A
  D66D  26FE          		LD	H,KEYBF/256
  D66F  F1            		POP	AF
  D670  77            		LD	(HL),A
  D671  E1            		POP	HL
  D672  C9            		RET
                      	
  D673                	KEYBC:
  D673  E5            		PUSH	HL
  D674  210000        		LD	HL,0
  D677  2290EC        		LD	(_KEYPS),HL
  D67A  E1            		POP	HL
  D67B  C9            		RET
                      	
  D67C                	KEYBE:
  D67C  F1            		POP	AF
  D67D  E1            		POP	HL
  D67E  37            		SCF
  D67F  C9            		RET
                      	
  D680                	FKEY:
  D680  CB75          		BIT	6,L
  D682  C8            		RET	Z
  D683  3E1B          		LD	A,01BH
  D685  CD5BD6        		CALL	KEYBS1
  D688  7D            		LD	A,L
  D689  C6AF          		ADD	A,020H-"q"
  D68B  CB7D          		BIT	7,L
  D68D  C8            		RET	Z
  D68E  2E50          		LD	L,"P"
  D690  D690          		SUB	0E1H+020H-"q"
  D692  2810          		JR	Z,KEYBSL
  D694  2C            		INC	L
  D695  3D            		DEC	A
  D696  280C          		JR	Z,KEYBSL
  D698  2C            		INC	L
  D699  D609          		SUB	0EBH-0E2H
  D69B  2807          		JR	Z,KEYBSL
  D69D  2E43          		LD	L,"C"
  D69F  3D            		DEC	A
  D6A0  2802          		JR	Z,KEYBSL
  D6A2  2E58          		LD	L,"X"
  D6A4                	KEYBSL:
  D6A4  7D            		LD	A,L
  D6A5  18B4          		JR	KEYBS1
                      	
  D6A7                	_SYS01:
  D6A7  CDFAD9        		CALL	_SYS07
  D6AA                	MSG:
  D6AA  F5            		PUSH	AF
  D6AB  D5            		PUSH	DE
  D6AC  5F            		LD	E,A
  D6AD  CDB3D6        		CALL	_SYS02
  D6B0  D1            		POP	DE
  D6B1  F1            		POP	AF
  D6B2  C9            		RET
                      	
  D6B3                	_SYS02:
  D6B3  CD2DD7        		CALL	BREAK
  D6B6  C325D7        		JP	PRINTX
                      	
  D6B9                	_SYS03:
  D6B9  F3            		DI
  D6BA  C5            		PUSH	BC
  D6BB  01911F        	SIOAD:	LD	BC,01F91H
  D6BE  3E05          		LD	A,5
  D6C0  ED79          		OUT	(C),A
  D6C2  3EEA          		LD	A,0EAH		;RTS ON
  D6C4  ED79          		OUT	(C),A
  D6C6                	REC1:
  D6C6  CDDDD6        		CALL	BREAK2
  D6C9  ED78          		IN	A,(C)
  D6CB  0F            		RRCA			;Arrival
  D6CC  30F8          		JR	NC,REC1
  D6CE                	BREAK2X:
  D6CE  3F            		CCF
  D6CF  3E05          		LD	A,5
  D6D1  ED79          		OUT	(C),A
  D6D3  3EE8          		LD	A,0E8H		;RTS OFF
  D6D5  ED79          		OUT	(C),A
                      	
  D6D7  0D            		DEC	C
  D6D8  ED78          		IN	A,(C)		;Read data
  D6DA  C1            		POP	BC
  D6DB  FB            		EI
  D6DC  C9            		RET
                      	
  D6DD                	BREAK2:
  D6DD  3E1A          		LD	A,01AH
  D6DF  DB01          		IN	A,(1)
  D6E1  0F            		RRCA
  D6E2  D8            		RET	C
  D6E3  C1            		POP	BC		;PC
  D6E4  01911F        	SIOAD0:	LD	BC,01F91H
  D6E7  18E5          		JR	BREAK2X
                      	
  D6E9                	_SYS04:
  D6E9  C5            		PUSH	BC
  D6EA  01911F        	SIOAD1:	LD	BC,01F91H
  D6ED                	XMIT1:
  D6ED  CDDDD6        		CALL	BREAK2
  D6F0  3E10          		LD	A,010H		;Reset status
  D6F2  ED79          		OUT	(C),A
  D6F4  ED78          		IN	A,(C)
  D6F6  2F            		CPL
  D6F7  E624          		AND	024H		;CTS Send Empty
  D6F9  20F2          		JR	NZ,XMIT1
  D6FB  0D            		DEC	C
  D6FC  ED59          		OUT	(C),E
  D6FE  C1            		POP	BC
  D6FF  C9            		RET
                      	
  D700                	_SYS05:
  D700  C5            		PUSH	BC
  D701  01011A        		LD	BC,01A01H
  D704                	_S05X1:
  D704  CDDDD6        		CALL	BREAK2
  D707  ED78          		IN	A,(C)
  D709  E608          		AND	8
  D70B  20F7          		JR	NZ,_S05X1
  D70D  F3            		DI
  D70E  0D            		DEC	C
  D70F  ED59          		OUT	(C),E
  D711  0E03          		LD	C,3
  D713  3E0E          		LD	A,00EH
  D715  ED79          		OUT	(C),A
  D717  3C            		INC	A
  D718  03            		INC	BC
  D719  0B            		DEC	BC
  D71A  ED79          		OUT	(C),A
  D71C  FB            		EI
  D71D  C1            		POP	BC
  D71E  AF            		XOR	A
  D71F  C9            		RET
                      	
  D720                	_SYS06:
  D720  7B            		LD	A,E
  D721  3C            		INC	A
  D722  CACAEC        		JP	Z,_INKEY
  D725                	PRINTX:
  D725  C3CDEC        		JP	_PRINT
                      	
  D728                	_SYS08:
  D728  CDFAD9        		CALL	_SYS07
  D72B  1804          		JR	BREAK1
  D72D                	BREAK:
  D72D  FB            		EI
  D72E  3A92EC        		LD	A,(_KEYD)
  D731                	BREAK1:
  D731  FE03          		CP	3
  D733  CA0000        		JP	Z,0
  D736  FE13          		CP	013H
  D738  C0            		RET	NZ
                      	
  D739                	PAUSE:
  D739  CD73D6        		CALL	KEYBC
                      	
  D73C                	FLGET:
  D73C  CDDFEC        		CALL	_FFLUSH
  D73F  C5            		PUSH	BC
  D740  E5            		PUSH	HL
  D741  ED4B8EEC      		LD	BC,(_TXADR)
  D745  CBE8          		SET	5,B
  D747  ED60          		IN	H,(C)
  D749                	FLGET1:
  D749  3A93EC        		LD	A,(_KEYD+1)
  D74C  0F            		RRCA
  D74D  0F            		RRCA
  D74E  E610          		AND	010H
  D750  F608          		OR	8
  D752  ED68          		IN	L,(C)
  D754  B5            		OR	L
  D755  ED79          		OUT	(C),A
  D757  CDCAEC        		CALL	_INKEY
  D75A  28ED          		JR	Z,FLGET1
  D75C  ED61          		OUT	(C),H
  D75E  E1            		POP	HL
  D75F  C1            		POP	BC
  D760  C9            		RET
                      	
  D761                	_SYS0A:
  D761  C5            		PUSH	BC
  D762  E5            		PUSH	HL
  D763  D5            		PUSH	DE
  D764  CD98DB        		CALL	GETL
  D767  1100FF        		LD	DE,KBUF
  D76A  E1            		POP	HL
  D76B  E5            		PUSH	HL
  D76C  0E00          		LD	C,0
  D76E  3004          		JR	NC,SAX0
  D770  23            		INC	HL
  D771  23            		INC	HL
  D772  1808          		JR	SAX4
  D774                	SAX0:
  D774  46            		LD	B,(HL)
  D775  23            		INC	HL
  D776                	SAX1:
  D776  23            		INC	HL
  D777  1A            		LD	A,(DE)
  D778  13            		INC	DE
  D779  B7            		OR	A
  D77A  2004          		JR	NZ,SAX2
  D77C                	SAX4:
  D77C  360D          		LD	(HL),00DH
  D77E  1804          		JR	SAX3
  D780                	SAX2:
  D780  77            		LD	(HL),A
  D781  0C            		INC	C
  D782  10F2          		DJNZ	SAX1
  D784                	SAX3:
  D784  D1            		POP	DE
  D785  79            		LD	A,C
  D786  13            		INC	DE
  D787  12            		LD	(DE),A
  D788  1B            		DEC	DE
  D789  E1            		POP	HL
  D78A  C1            		POP	BC
  D78B  A7            		AND	A
  D78C  C9            		RET
                      	
  D78D                	_SYS0B:
  D78D  CD2DD7        		CALL	BREAK
  D790  3A92EC        		LD	A,(_KEYD)
  D793  B7            		OR	A
  D794  C8            		RET	Z
  D795                	CONSTX:
  D795  CDDFEC        		CALL	_FFLUSH
  D798  E5            		PUSH	HL
  D799  2A90EC        		LD	HL,(_KEYPS)
  D79C  7C            		LD	A,H
  D79D  AD            		XOR	L
  D79E  E1            		POP	HL
  D79F  C6FF          		ADD	A,0FFH
  D7A1  9F            		SBC	A,A
  D7A2  C9            		RET
                      	
  D7A3                	_SYS2A:
  D7A3  C5            		PUSH	BC
  D7A4  3EED          		LD	A,0EDH		;Read calendar
  D7A6  CD59DA        		CALL	COMOUT
  D7A9  CDCCD7        		CALL	IN49SB_BCD		;YY
  D7AC  6F            		LD	L,A
  D7AD  2600          		LD	H,0
  D7AF  116C07        		LD	DE,1900
  D7B2  FE5A          		CP	90
  D7B4  3002          		JR	NC,RDDATE1
  D7B6  1ED0          		LD	E,2000
  D7B8                	RDDATE1:
  D7B8  19            		ADD	HL,DE
  D7B9  CD3EDA        		CALL	IN49SB		;MM
  D7BC  57            		LD	D,A
  D7BD  CDCCD7        		CALL	IN49SB_BCD	;DD
  D7C0  5F            		LD	E,A
  D7C1  7A            		LD	A,D
  D7C2  E607          		AND	7
  D7C4  0604          		LD	B,4
  D7C6                	RDDATE2:
  D7C6  CB3A          		SRL	D
  D7C8  10FC          		DJNZ	RDDATE2
  D7CA  C1            		POP	BC
  D7CB  C9            		RET
  D7CC                	IN49SB_BCD:
  D7CC  CD3EDA        		CALL	IN49SB
  D7CF                	BCD:
  D7CF  4F            		LD	C,A
  D7D0  E6F0          		AND	0F0H
  D7D2  0F            		RRCA
  D7D3  47            		LD	B,A
  D7D4  0F            		RRCA
  D7D5  0F            		RRCA
  D7D6  80            		ADD	A,B
  D7D7  47            		LD	B,A
  D7D8  79            		LD	A,C
  D7D9  E60F          		AND	00FH
  D7DB  80            		ADD	A,B
  D7DC  C9            		RET
                      	
  D7DD                	_SYS2C:
  D7DD  C5            		PUSH	BC
  D7DE  3EEF          		LD	A,0EFH		;Read time
  D7E0  CD59DA        		CALL	COMOUT
  D7E3  CDCCD7        		CALL	IN49SB_BCD	;TT
  D7E6  67            		LD	H,A
  D7E7  CDCCD7        		CALL	IN49SB_BCD	;MM
  D7EA  6F            		LD	L,A
  D7EB  CDCCD7        		CALL	IN49SB_BCD	;SS
  D7EE  57            		LD	D,A
  D7EF  C1            		POP	BC
  D7F0  AF            		XOR	A
  D7F1  C9            		RET
                      	
  D7F2                	MSX1:
  D7F2  5F            		LD	E,A
  D7F3  CDCDEC        		CALL	_PRINT
  D7F6                	MSX:
  D7F6  7E            		LD	A,(HL)
  D7F7  23            		INC	HL
  D7F8  B7            		OR	A
  D7F9  20F7          		JR	NZ,MSX1
  D7FB  C9            		RET
                      	
  D7FC                	ESC1:
  D7FC  7B            		LD	A,E
  D7FD  FE41          		CP	"A"
  D7FF  CA3DD9        		JP	Z,CTRL1E
  D802  FE42          		CP	"B"
  D804  CAC4DA        		JP	Z,CTRL1F
  D807  FE43          		CP	"C"
  D809  CA4AD9        		JP	Z,CTRL1C
  D80C  FE44          		CP	"D"
  D80E  CA33D9        		JP	Z,CTRL1D
  D811  FE45          		CP	"E"
  D813  2802          		JR	Z,CT0CX
  D815  FE6A          		CP	"j"
  D817                	CT0CX:
  D817  CA97DA        		JP	Z,CTRL0C
  D81A  FE48          		CP	"H"
  D81C  CAC8D9        		JP	Z,CTRL0B
  D81F  FE4A          		CP	"J"
  D821  CA9ADA        		JP	Z,CTRL1A
  D824  FE4B          		CP	"K"
  D826  CA8AD9        		JP	Z,CTRL05
  D829  FE4C          		CP	"L"
  D82B  CAD9DA        		JP	Z,CTRL0E
  D82E  FE78          		CP	"x"
  D830  2804          		JR	Z,ESC1X
  D832  FE79          		CP	"y"
  D834  2002          		JR	NZ,ESC1Y
  D836                	ESC1X:
  D836  3601          		LD	(HL),1
  D838                	ESC1Y:
  D838  FE3D          		CP	"="
  D83A  2804          		JR	Z,ESC1W
  D83C  FE59          		CP	"Y"
  D83E  2002          		JR	NZ,ESC1Z
  D840                	ESC1W:
  D840  3602          		LD	(HL),2
  D842                	ESC1Z:
  D842  FE20          		CP	020H
  D844  3802          		JR	C,ESC1C
  D846  87            		ADD	A,A
  D847  D0            		RET	NC
  D848                	ESC1C:
  D848  E1            		POP	HL
  D849  184A          		JR	ANK
                      	
  D84B                	ESC:
  D84B  21A6D8        		LD	HL,PRINTE5
  D84E  E5            		PUSH	HL
  D84F  2171D8        		LD	HL,ESCFLG+1
  D852  3600          		LD	(HL),0
  D854  3D            		DEC	A
  D855  28A5          		JR	Z,ESC1
  D857  3D            		DEC	A
  D858  2009          		JR	NZ,ESC2
  D85A  3603          		LD	(HL),3
  D85C  7B            		LD	A,E
  D85D  D620          		SUB	020H
  D85F  3266D8        		LD	(ESCYP+1),A
  D862  C9            		RET
  D863                	ESC2:
  D863  3D            		DEC	A
  D864  C0            		RET	NZ
  D865  2600          	ESCYP:	LD	H,0
  D867  7B            		LD	A,E
  D868  D620          		SUB	020H
  D86A  6F            		LD	L,A
  D86B  C3D6EC        		JP	_LOC
                      	
  D86E                	PRINT:
  D86E  C5            		PUSH	BC
  D86F  E5            		PUSH	HL
  D870  3E00          	ESCFLG:	LD	A,000H
  D872  B7            		OR	A
  D873  20D6          		JR	NZ,ESC
                      	
  D875  3E1F          		LD	A,01FH
  D877  BB            		CP	E
  D878  3030          		JR	NC,CTRL
  D87A                	PRINTC:
  D87A  A7            	INSFLG:	AND	A
  D87B  DC62DA        		CALL	C,CTRL12
                      	
  D87E  3E00          	KANFLG:	LD	A,000H
  D880  B7            		OR	A
  D881  2041          		JR	NZ,KANJI2
  D883  7B            	X1KPAT:	LD	A,E
  D884  FE80          		CP	080H
  D886  380D          		JR	C,ANK
  D888  FEA0          		CP	0A0H
  D88A  3804          		JR	C,KANJI1
  D88C  FEE0          		CP	0E0H
  D88E  3805          		JR	C,ANK
  D890                	KANJI1:
  D890  327FD8        		LD	(KANFLG+1),A
  D893  1811          		JR	PRINTE5
  D895                	ANK:
  D895  ED4B8EEC      		LD	BC,(_TXADR)
  D899  78            		LD	A,B
  D89A  F638          		OR	038H
  D89C  47            		LD	B,A
  D89D  ED71          		DB	0EDH,071H		;Kanji
  D89F  CB98          		RES	3,B
  D8A1  ED59          		OUT	(C),E		;Text
  D8A3                	KANJIE:
  D8A3  CD0FD9        		CALL	PRINTE7
  D8A6                	PRINTE5:
  D8A6  E1            		POP	HL
  D8A7  C1            		POP	BC
  D8A8  AF            		XOR	A
  D8A9  C9            		RET
                      	
  D8AA                	CTRL:
  D8AA  CDF6D8        		CALL	KANCLR
  D8AD  3EA7          		LD	A,0A7H		;AND	A
  D8AF  327AD8        		LD	(INSFLG),A
  D8B2  7B            		LD	A,E
  D8B3  87            		ADD	A,A
  D8B4  4F            		LD	C,A
  D8B5  0600          		LD	B,0
  D8B7  2123DC        		LD	HL,CTRLTB
  D8BA  09            		ADD	HL,BC
  D8BB  7E            		LD	A,(HL)
  D8BC  23            		INC	HL
  D8BD  66            		LD	H,(HL)
  D8BE  6F            		LD	L,A
  D8BF  CD0F00        		CALL	[HL]
  D8C2  18E2          		JR	PRINTE5
                      	
  D8C4                	KANJI2:
  D8C4  D5            		PUSH	DE
  D8C5  57            		LD	D,A
  D8C6  01812F        		LD	BC,02F81H	;SFTJIS
  D8C9  DF            		RST	018H
  D8CA  01C32F        		LD	BC,02FC3H	;Instead or JISVRM
  D8CD  DF            		RST	018H
                      	
  D8CE  ED4B8EEC      		LD	BC,(_TXADR)
  D8D2  78            		LD	A,B
  D8D3  F638          		OR	038H
  D8D5  47            		LD	B,A
  D8D6  ED51          		OUT	(C),D		;kanji
  D8D8  CB98          		RES	3,B
  D8DA  ED59          		OUT	(C),E		;Text
  D8DC  CD0FD9        		CALL	PRINTE7
  D8DF  ED4B8EEC      		LD	BC,(_TXADR)
  D8E3  78            		LD	A,B
  D8E4  F638          		OR	038H
  D8E6  47            		LD	B,A
  D8E7  CBF2          		SET	6,D
  D8E9  ED51          		OUT	(C),D		;Kanji
  D8EB  CB98          		RES	3,B
  D8ED  ED59          		OUT	(C),E		;Text
  D8EF  D1            		POP	DE
  D8F0  AF            		XOR	A
  D8F1  327FD8        		LD	(KANFLG+1),A
  D8F4  18AD          		JR	KANJIE
                      	
  D8F6                	KANCLR:
  D8F6  3A7FD8        		LD	A,(KANFLG+1)
  D8F9  B7            		OR	A
  D8FA  C8            		RET	Z
  D8FB  ED4B8EEC      		LD	BC,(_TXADR)
  D8FF  78            		LD	A,B
  D900  F638          		OR	038H
  D902  47            		LD	B,A
  D903  AF            		XOR	A
  D904  327FD8        		LD	(KANFLG+1),A
  D907  ED79          		OUT	(C),A		;Kanji
  D909  CB98          		RES	3,B
  D90B  3E20          		LD	A,020H
  D90D  ED79          		OUT	(C),A		;Text
  D90F                	PRINTE7:
  D90F  CBA0          		RES	4,B
  D911                	PRINTE6:
  D911  3A96EC        		LD	A,(_COLORF)
  D914                	PRINTE4:
  D914  ED79          		OUT	(C),A		;Color
  D916  78            		LD	A,B
  D917  E607          		AND	7
  D919  47            		LD	B,A
  D91A                	PRINTE2:
  D91A  03            		INC	BC
  D91B                	PRINTE3:
  D91B  2ABAEC        		LD	HL,(CRTCD+10)
  D91E  A7            		AND	A
  D91F  ED4A          		ADC	HL,BC
  D921                	PRINTE8:
  D921  2805          		JR	Z,PRINT2
  D923                	PRINTE1:
  D923  ED438EEC      		LD	(_TXADR),BC
  D927                	PRINTE:
  D927  C9            		RET
                      	
  D928                	PRINT2:
  D928  CDDEDA        		CALL	SCR
  D92B  2ABCEC        		LD	HL,(CRTCD+12)
  D92E  09            		ADD	HL,BC
  D92F  228EEC        		LD	(_TXADR),HL
  D932  C9            		RET
                      	
  D933                	CTRL08:
  D933                	CTRL1D:
  D933  ED4B8EEC      		LD	BC,(_TXADR)
  D937  78            		LD	A,B
  D938  B1            		OR	C
  D939  C8            		RET	Z
  D93A  0B            		DEC	BC
  D93B  18E6          		JR	PRINTE1
                      	
  D93D                	CTRL1E:
  D93D  ED4B8EEC      		LD	BC,(_TXADR)
  D941  2ABCEC        		LD	HL,(CRTCD+12)
  D944  09            		ADD	HL,BC
  D945  D0            		RET	NC
  D946  44            		LD	B,H
  D947  4D            		LD	C,L
  D948  18D9          		JR	PRINTE1
                      	
  D94A                	CTRL1C:
  D94A  ED4B8EEC      		LD	BC,(_TXADR)
  D94E  18CA          		JR	PRINTE2
                      	
  D950                	CTRL09:
  D950  ED4B8EEC      		LD	BC,(_TXADR)
  D954  79            		LD	A,C
  D955  E6F8          		AND	0F8H
  D957  C608          		ADD	A,8
  D959  4F            		LD	C,A
  D95A  88            		ADC	A,B
  D95B  91            		SUB	C
  D95C  47            		LD	B,A
  D95D  18BC          		JR	PRINTE3
                      	
  D95F                	CTRL02:
  D95F  2A8EEC        		LD	HL,(_TXADR)
  D962  7C            		LD	A,H
  D963  B5            		OR	L
  D964  C8            		RET	Z
  D965  2B            		DEC	HL
  D966  228EEC        		LD	(_TXADR),HL
  D969  D5            		PUSH	DE
  D96A  CDD3EC        		CALL	_POS
  D96D  3AB1EC        		LD	A,(CRTCD+1)
  D970  95            		SUB	L
  D971  6F            		LD	L,A
  D972  2D            		DEC	L
  D973  2638          		LD	H,038H
  D975  ED4B8EEC      		LD	BC,(_TXADR)
  D979  09            		ADD	HL,BC
  D97A  44            		LD	B,H
  D97B  4D            		LD	C,L
  D97C  110020        		LD	DE,02000H	;D:Text E:kanji
  D97F  2A96EC        		LD	HL,(_COLORF)	;L:Color
  D982                	C8X1:
  D982  CD7EDA        		CALL	C12S
  D985  0B            		DEC	BC
  D986  20FA          		JR	NZ,C8X1
  D988  D1            		POP	DE
  D989  C9            		RET
                      	
  D98A                	CTRL05:
  D98A  CDD3EC        		CALL	_POS
  D98D  3AB1EC        		LD	A,(CRTCD+1)
  D990  95            		SUB	L
  D991  6F            		LD	L,A
  D992  2620          		LD	H,020H
  D994  ED4B8EEC      		LD	BC,(_TXADR)
  D998                	C05X1:
  D998  78            		LD	A,B
  D999  F638          		OR	038H
  D99B  47            		LD	B,A
  D99C  ED71          		DB	0EDH,071H		;kanji
  D99E  CB98          		RES	3,B
  D9A0  ED61          		OUT	(C),H		;Text
  D9A2  CBA0          		RES	4,B
  D9A4  3A96EC        		LD	A,(_COLORF)
  D9A7  ED79          		OUT	(C),A		;Color
  D9A9  03            		INC	BC
  D9AA  2D            		DEC	L
  D9AB  20EB          		JR	NZ,C05X1
  D9AD  C9            		RET
                      	
  D9AE                	CTRL0D:
  D9AE  CDD3EC        		CALL	_POS
  D9B1  2E00          		LD	L,0
  D9B3                	LOC:
  D9B3  C5            		PUSH	BC
  D9B4  E5            		PUSH	HL
  D9B5  CDF6D8        		CALL	KANCLR
  D9B8  CDDBD9        		CALL	LOC1
  D9BB  ED438EEC      		LD	(_TXADR),BC
  D9BF  E1            		POP	HL
  D9C0  C1            		POP	BC
  D9C1  C9            		RET
                      	
  D9C2                	CTRL01:
  D9C2  3E37          		LD	A,037H		;SCF
  D9C4  327AD8        		LD	(INSFLG),A
  D9C7  C9            		RET
                      	
  D9C8                	CTRL0B:
  D9C8  210000        		LD	HL,0
  D9CB  228EEC        		LD	(_TXADR),HL
  D9CE  C9            		RET
                      	
  D9CF                	PRINTS:
  D9CF  CD2DD7        		CALL	BREAK
  D9D2  C3CDEC        		JP	_PRINT
                      	
  D9D5                	CTRL1B:
  D9D5  3E01          		LD	A,1
  D9D7  3271D8        		LD	(ESCFLG+1),A
  D9DA  C9            		RET
                      	
  D9DB                	LOC1:
  D9DB  44            		LD	B,H
  D9DC  4D            		LD	C,L
  D9DD  04            		INC	B
  D9DE  05            		DEC	B
  D9DF  C8            		RET	Z
  D9E0  D5            		PUSH	DE
  D9E1  ED5BB1EC      		LD	DE,(CRTCD+1)
  D9E5  210000        		LD	HL,0
  D9E8  55            		LD	D,L
  D9E9                	LOC2:
  D9E9  19            		ADD	HL,DE
  D9EA  10FD          		DJNZ	LOC2
  D9EC  09            		ADD	HL,BC
  D9ED  D1            		POP	DE
  D9EE                	LOC3:
  D9EE  44            		LD	B,H
  D9EF  4D            		LD	C,L
  D9F0  C9            		RET
                      	
  D9F1                	BOOT:
  D9F1  C30000        		JP	0
  D9F4                	WBOOT:
  D9F4  C3AACC        		JP	_SYS00
  D9F7                	CONST:
  D9F7  C395D7        		JP	CONSTX
  D9FA                	_SYS07:
  D9FA                	CONIN:
  D9FA  C33CD7        		JP	FLGET
  D9FD                	CONOUT0:
  D9FD  C300DA        		JP	CONOUT
  DA00                	CONOUT:
  DA00  CD12DA        		CALL	CURSOR
  DA03  59            		LD	E,C
  DA04  CDCDEC        		CALL	_PRINT
  DA07  7B            		LD	A,E
  DA08  FE0A          		CP	00AH
  DA0A  2006          		JR	NZ,CURSOR
  DA0C  CDAED9        		CALL	CTRL0D
  DA0F  CD8AD9        		CALL	CTRL05
  DA12                	CURSOR:
  DA12  C5            		PUSH	BC
  DA13  ED4B8EEC      		LD	BC,(_TXADR)
  DA17  CBE8          		SET	5,B
  DA19  ED78          		IN	A,(C)
  DA1B  EE18          		XOR	018H
  DA1D  ED79          		OUT	(C),A
  DA1F  C1            		POP	BC
  DA20  C9            		RET
                      	
  DA21                	CTRL07:
  DA21  2163DC        		LD	HL,BEEPD
  DA24                	BEEP1:
  DA24  7E            		LD	A,(HL)
  DA25  23            		INC	HL
  DA26  FEFF          		CP	0FFH
  DA28  C8            		RET	Z
  DA29  F3            		DI
  DA2A  061C          		LD	B,01CH
  DA2C  ED79          		OUT	(C),A
  DA2E  EDA3          		OUTI
  DA30  FB            		EI
  DA31  18F1          		JR	BEEP1
                      	
  DA33                	OT49SB:
  DA33  C5            		PUSH	BC
  DA34  CD4FDA        		CALL	CANW
  DA37  010019        		LD	BC,01900H
  DA3A  ED79          		OUT	(C),A
  DA3C  C1            		POP	BC
  DA3D  C9            		RET
                      	
  DA3E                	IN49SB:
  DA3E  C5            		PUSH	BC
  DA3F  01011A        		LD	BC,01A01H
  DA42                	CANR:
  DA42  ED78          		IN	A,(C)
  DA44  E620          		AND	020H
  DA46  20FA          		JR	NZ,CANR
  DA48  010019        		LD	BC,01900H
  DA4B  ED78          		IN	A,(C)
  DA4D  C1            		POP	BC
  DA4E  C9            		RET
                      	
  DA4F                	CANW:
  DA4F  01011A        		LD	BC,01A01H
  DA52  ED48          		IN	C,(C)
  DA54  CB71          		BIT	6,C
  DA56  20F7          		JR	NZ,CANW
  DA58  C9            		RET
                      	
  DA59                	COMOUT:
  DA59  FB            		EI
  DA5A  CD33DA        		CALL	OT49SB
  DA5D  CD4FDA        		CALL	CANW
  DA60  F3            		DI
  DA61  C9            		RET
                      	
  DA62                	CTRL12:
  DA62  D5            		PUSH	DE
  DA63  CDD3EC        		CALL	_POS
  DA66  3AB1EC        		LD	A,(CRTCD+1)
  DA69  95            		SUB	L
  DA6A  ED4B8EEC      		LD	BC,(_TXADR)
  DA6E  110020        		LD	DE,02000H	;D:Text E:Kanji
  DA71  2A96EC        		LD	HL,(_COLORF)	;L:Color
  DA74  CBE8          		SET	5,B
  DA76                	C12X1:
  DA76  CD7EDA        		CALL	C12S
  DA79  03            		INC	BC
  DA7A  20FA          		JR	NZ,C12X1
  DA7C  D1            		POP	DE
  DA7D  C9            		RET
                      	
  DA7E                	C12S:
  DA7E  CBE0          		SET	4,B
  DA80  CBD8          		SET	3,B
  DA82  ED60          		IN	H,(C)
  DA84  ED59          	X1PAT:	OUT	(C),E
  DA86  5C            		LD	E,H
  DA87  CB98          		RES	3,B
  DA89  ED60          		IN	H,(C)
  DA8B  ED51          		OUT	(C),D
  DA8D  54            		LD	D,H
  DA8E  CBA0          		RES	4,B
  DA90  ED60          		IN	H,(C)
  DA92  ED69          		OUT	(C),L
  DA94  6C            		LD	L,H
  DA95  3D            		DEC	A
  DA96  C9            		RET
                      	
  DA97                	CTRL0C:
  DA97  CDC8D9        		CALL	CTRL0B
  DA9A                	CTRL1A:
  DA9A  ED4B8EEC      		LD	BC,(_TXADR)
  DA9E                	C1AX1:
  DA9E  78            		LD	A,B
  DA9F  F638          		OR	038H
  DAA1  47            		LD	B,A
  DAA2  ED71          		DB	0EDH,071H		;kanji
  DAA4  CB98          		RES	3,B
  DAA6  3E20          		LD	A,020H
  DAA8  ED79          		OUT	(C),A		;Text
  DAAA  CBA0          		RES	4,B
  DAAC  3A96EC        		LD	A,(_COLORF)
  DAAF  ED79          		OUT	(C),A		;Color
  DAB1  03            		INC	BC
  DAB2  CBA8          		RES	5,B
  DAB4  2ABAEC        		LD	HL,(CRTCD+10)
  DAB7  09            		ADD	HL,BC
  DAB8  30E4          		JR	NC,C1AX1
  DABA  C9            		RET
                      	
  DABB                	CTRL04:
  DABB  CDD3EC        		CALL	_POS
  DABE  7D            		LD	A,L
  DABF  B7            		OR	A
  DAC0  C8            		RET	Z
  DAC1                	CTRL03:
  DAC1  CDAED9        		CALL	CTRL0D
  DAC4                	CTRL0A:
  DAC4                	CTRL1F:
  DAC4  ED4B8EEC      		LD	BC,(_TXADR)
  DAC8  2AB1EC        		LD	HL,(CRTCD+1)
  DACB  2600          		LD	H,0
  DACD  09            		ADD	HL,BC
  DACE  44            		LD	B,H
  DACF  4D            		LD	C,L
  DAD0  2ABAEC        		LD	HL,(CRTCD+10)
  DAD3  09            		ADD	HL,BC
  DAD4  3F            		CCF
  DAD5  9F            		SBC	A,A
  DAD6  C321D9        		JP	PRINTE8
                      	
  DAD9                	CTRL0E:
  DAD9  CDD3EC        		CALL	_POS
  DADC  7C            		LD	A,H
  DADD  01            		DB	001H
  DADE                	SCR:
  DADE  3A97EC        		LD	A,(_LINE)
  DAE1  3D            		DEC	A
  DAE2                	SCR1:
  DAE2  C5            		PUSH	BC
  DAE3  D5            		PUSH	DE
  DAE4  01801F        		LD	BC,01F80H	;DMA
  DAE7  1EC3          		LD	E,0C3H
  DAE9  ED59          		OUT	(C),E
  DAEB  119A65        		LD	DE,0659AH
  DAEE  ED59          		OUT	(C),E
  DAF0  ED51          		OUT	(C),D
  DAF2  114F00        		LD	DE,79
  DAF5  ED59          		OUT	(C),E
  DAF7  ED51          		OUT	(C),D
                      	
  DAF9  210038        		LD	HL,03800H
  DAFC  11181C        		LD	DE,01C18H
  DAFF  ED51          		OUT	(C),D
  DB01  ED59          		OUT	(C),E
                      	
  DB03                	SCRUP1:
  DB03  B7            		OR	A
  DB04  2839          		JR	Z,SCRCL
  DB06  F5            		PUSH	AF
  DB07  CD20DB        		CALL	UPSUB		;kanji
  DB0A  ED5BBCEC      		LD	DE,(CRTCD+12)
  DB0E  16F7          		LD	D,0F7H
  DB10  19            		ADD	HL,DE
  DB11  D5            		PUSH	DE
  DB12  CD20DB        		CALL	UPSUB		;Text
  DB15  D1            		POP	DE
  DB16  19            		ADD	HL,DE
  DB17  CD20DB        		CALL	UPSUB		;Color
  DB1A  CBE4          		SET	4,H
  DB1C  F1            		POP	AF
  DB1D  3D            		DEC	A
  DB1E  18E3          		JR	SCRUP1
                      	
  DB20                	UPSUB:
  DB20  ED5BB1EC      		LD	DE,(CRTCD+1)
  DB24  1600          		LD	D,0
  DB26  3ECD          		LD	A,0CDH
  DB28  ED79          		OUT	(C),A
  DB2A  ED69          		OUT	(C),L		;SOURCE
  DB2C  ED61          		OUT	(C),H
  DB2E  19            		ADD	HL,DE
  DB2F  3E1D          		LD	A,01DH
  DB31  ED79          		OUT	(C),A		;DIST
  DB33  ED69          		OUT	(C),L
  DB35  ED61          		OUT	(C),H
  DB37  1187CF        		LD	DE,0CF87H
  DB3A  ED51          		OUT	(C),D
  DB3C  ED59          		OUT	(C),E
  DB3E  C9            		RET
                      	
  DB3F                	SCRCL:
  DB3F  44            		LD	B,H
  DB40  4D            		LD	C,L
  DB41  215020        		LD	HL,02000H+80
  DB44  3A96EC        		LD	A,(_COLORF)
  DB47                	SCRCL1:
  DB47  ED71          		DB	0EDH,071H
  DB49  CB98          		RES	3,B
  DB4B  ED61          		OUT	(C),H
  DB4D  CBA0          		RES	4,B
  DB4F  ED79          		OUT	(C),A
  DB51  CBD8          		SET	3,B
  DB53  CBE0          		SET	4,B
  DB55  03            		INC	BC
  DB56  2D            		DEC	L
  DB57  20EE          		JR	NZ,SCRCL1
  DB59  D1            		POP	DE
  DB5A  C1            		POP	BC
  DB5B  C9            		RET
                      	
  DB5C                	SCRN:
  DB5C  D5            		PUSH	DE
  DB5D  ED58          		IN	E,(C)		;Text
  DB5F  CBD8          		SET	3,B
  DB61  ED50          		IN	D,(C)		;Kanji
  DB63  2819          		JR	Z,SCRNE
  DB65  AF            		XOR	A
  DB66  C5            		PUSH	BC
  DB67  013730        		LD	BC,03037H	;VRMJIS
  DB6A  DF            		RST	018H
  DB6B  01522F        		LD	BC,02F52H	;JISSFT
  DB6E  DF            		RST	018H
  DB6F  C1            		POP	BC
  DB70  ED78          		IN	A,(C)
  DB72  CB98          		RES	3,B
  DB74  E640          		AND	040H
  DB76  2003          		JR	NZ,SCRN1
  DB78  7A            		LD	A,D
  DB79  D1            		POP	DE
  DB7A  C9            		RET
  DB7B                	SCRN1:
  DB7B  7B            		LD	A,E
  DB7C  D1            		POP	DE
  DB7D  C9            		RET
                      	
  DB7E                	SCRNE:
  DB7E  D1            		POP	DE
  DB7F  CB98          		RES	3,B
  DB81                	SCRNX:
  DB81  ED78          		IN	A,(C)
  DB83  C9            		RET
                      	
  DB84                	POS:
  DB84  2A8EEC        		LD	HL,(_TXADR)
  DB87  C5            		PUSH	BC
  DB88  ED4BBCEC      		LD	BC,(CRTCD+12)
  DB8C  AF            		XOR	A
  DB8D                	POS1:
  DB8D  09            		ADD	HL,BC
  DB8E  3C            		INC	A
  DB8F  38FC          		JR	C,POS1
  DB91  ED42          		SBC	HL,BC
  DB93  3D            		DEC	A
  DB94  67            		LD	H,A
  DB95  C1            		POP	BC
  DB96  A7            		AND	A
  DB97  C9            		RET
                      	
  DB98                	GETL:
  DB98  CDD3EC        		CALL	_POS
  DB9B  E5            		PUSH	HL
  DB9C                	GETL1:
  DB9C  CDD3EC        		CALL	_POS
  DB9F  C1            		POP	BC
  DBA0  C5            		PUSH	BC
  DBA1  7D            		LD	A,L
  DBA2  91            		SUB	C
  DBA3  69            		LD	L,C
  DBA4  4F            		LD	C,A
  DBA5  DCD6EC        		CALL	C,_LOC
  DBA8                	GET1W:
  DBA8  CD28D7        		CALL	_SYS08
  DBAB  FE08          		CP	8
  DBAD  2007          		JR	NZ,GETL1X
  DBAF  0D            		DEC	C
  DBB0  CB79          		BIT	7,C
  DBB2  2002          		JR	NZ,GETL1X
  DBB4  3E02          		LD	A,2
  DBB6                	GETL1X:
  DBB6  FE1B          		CP	01BH
  DBB8  2016          		JR	NZ,GETL1V
  DBBA  CD28D7        		CALL	_SYS08
  DBBD  FE22          		CP	022H
  DBBF  2008          		JR	NZ,GETL1Y
  DBC1  2100FF        		LD	HL,KBUF
  DBC4  CDF6D7        		CALL	MSX
  DBC7  180B          		JR	GETL1Z
  DBC9                	GETL1Y:
  DBC9  F5            		PUSH	AF
  DBCA  1E1B          		LD	E,01BH
  DBCC  CDCDEC        		CALL	_PRINT
  DBCF  F1            		POP	AF
  DBD0                	GETL1V:
  DBD0  5F            		LD	E,A
  DBD1  CDCDEC        		CALL	_PRINT
  DBD4                	GETL1Z:
  DBD4  7B            		LD	A,E
  DBD5  FE0D          		CP	00DH
  DBD7  20C3          		JR	NZ,GETL1
                      	
  DBD9  2100FF        		LD	HL,KBUF
  DBDC  AF            		XOR	A
  DBDD  ED4BB0EC      		LD	BC,(CRTCD)
  DBE1                	GETL0:
  DBE1  77            		LD	(HL),A
  DBE2  23            		INC	HL
  DBE3  10FC          		DJNZ	GETL0
                      	
  DBE5  D1            		POP	DE
  DBE6  CDD3EC        		CALL	_POS
  DBE9  6B            		LD	L,E
  DBEA  3AB1EC        		LD	A,(CRTCD+1)
  DBED  95            		SUB	L
  DBEE  57            		LD	D,A
  DBEF  CDDBD9        		CALL	LOC1
  DBF2  78            		LD	A,B
  DBF3  F630          		OR	030H
  DBF5  47            		LD	B,A
  DBF6  5A            		LD	E,D
  DBF7  2100FF        		LD	HL,KBUF
  DBFA                	GETL2:
  DBFA  CDD0EC        		CALL	_SCRN
  DBFD  03            		INC	BC
  DBFE  77            		LD	(HL),A
  DBFF  23            		INC	HL
  DC00  1D            		DEC	E
  DC01  20F7          		JR	NZ,GETL2
  DC03                	GETL3:
  DC03  2B            		DEC	HL
  DC04  7E            		LD	A,(HL)
  DC05  FE21          		CP	021H
  DC07  D0            		RET	NC
  DC08  3600          		LD	(HL),0
  DC0A  15            		DEC	D
  DC0B  20F6          		JR	NZ,GETL3
  DC0D  C9            		RET
                      	
  DC0E                	INKEY:
  DC0E  FB            		EI
  DC0F  E5            		PUSH	HL
  DC10  2A90EC        		LD	HL,(_KEYPS)
  DC13  7C            		LD	A,H
  DC14  AD            		XOR	L
  DC15  2809          		JR	Z,INKEY1
  DC17  7C            		LD	A,H
  DC18  3C            		INC	A
  DC19  3291EC        		LD	(_KEYPS+1),A
  DC1C  6F            		LD	L,A
  DC1D  26FE          		LD	H,KEYBF/256
  DC1F  7E            		LD	A,(HL)
  DC20                	INKEY1:
  DC20  E1            		POP	HL
  DC21  B7            		OR	A
  DC22  C9            		RET
                      	
  DC23                	CTRLTB:
  DC23  27D9C2D95FD9C1		DW	PRINTE,CTRL01,CTRL02,CTRL03
  DC2B  BBDA8AD99ADA21		DW	CTRL04,CTRL05,CTRL1A,CTRL07
  DC33  33D950D9C4DAC8		DW	CTRL08,CTRL09,CTRL0A,CTRL0B
  DC3B  97DAAED9D9DA27		DW	CTRL0C,CTRL0D,CTRL0E,PRINTE
  DC43  27D927D9C2D927		DW	PRINTE,PRINTE,CTRL01,PRINTE
  DC4B  27D927D927D927		DW	PRINTE,PRINTE,PRINTE,PRINTE
  DC53  27D927D99ADAD5		DW	PRINTE,PRINTE,CTRL1A,CTRL1B
  DC5B  4AD933D93DD9C4		DW	CTRL1C,CTRL1D,CTRL1E,CTRL1F
                      	
  DC63                	BEEPD:
  DC63  008E01000B000C		DB	0,08EH,1,0,00BH,0,00CH,010H
  DC6B  073E08100D00FF		DB	007H,03EH,008H,010H,00DH,0,0FFH
                      	
  DC72  00            	REDDATA:DB	0
                      	
  DC73                		DS	12	;ä½ãã®æ°åããE
                      	
                      	
                      		
                      	;	LSX-Dodgers FILE
                      	
  DC7F                	FILEC:
  DC7F  CD8ADC        		CALL	FILE
  DC82                	FILEC2:
  DC82  3ADC00        		LD	A,(FDRV+1)
  DC85  FE20          		CP	020H
  DC87  C8            		RET	Z
  DC88  183B          		JR	SETDIR1
                      	
  DC8A                	FILE:
  DC8A  AF            		XOR	A
  DC8B  32DB00        		LD	(FDRV),A
  DC8E  67            		LD	H,A
  DC8F  6F            		LD	L,A
  DC90  22E900        		LD	(FDRV+14),HL
  DC93  CD64DD        		CALL	SPCUT
  DC96  CD49DD        		CALL	CCHK3
  DC99  2812          		JR	Z,DEVI1
  DC9B  13            		INC	DE
  DC9C  1A            		LD	A,(DE)
  DC9D  1B            		DEC	DE
  DC9E  FE3A          		CP	":"
  DCA0  200B          		JR	NZ,DEVI1
  DCA2  1A            		LD	A,(DE)		;DRIVE
  DCA3  CD75DF        		CALL	CAP
  DCA6  D640          		SUB	"@"
  DCA8  13            		INC	DE
  DCA9  13            		INC	DE
  DCAA  32DB00        		LD	(FDRV),A
  DCAD                	DEVI1:
  DCAD  1A            		LD	A,(DE)
  DCAE  D65C          		SUB	"\"
  DCB0  200B          		JR	NZ,NOROOT
  DCB2  210000        		LD	HL,0
  DCB5  22F500        		LD	(FDRV+26),HL
  DCB8  2C            		INC	L
  DCB9  22E900        		LD	(FDRV+14),HL
  DCBC  13            		INC	DE
  DCBD                	NOROOT:
                      	
  DCBD                	SETDIR:
  DCBD  CDE9DC        		CALL	FILED
  DCC0  1A            		LD	A,(DE)
  DCC1  FE5C          		CP	"\"
  DCC3  C0            		RET	NZ
  DCC4  13            		INC	DE
  DCC5                	SETDIR1:
  DCC5  3E10          		LD	A,010H		;Directory
  DCC7  32E800        		LD	(FDRV+13),A
  DCCA  D5            		PUSH	DE
  DCCB  11DB00        		LD	DE,FDRV
  DCCE  2A1EEC        		LD	HL,(STABLE+2*00FH)
  DCD1  CD0F00        		CALL	[HL]
  DCD4  D1            		POP	DE
  DCD5  B7            		OR	A
  DCD6  C0            		RET	NZ
                      	
  DCD7  3AE800        		LD	A,(FDRV+13)
  DCDA  CB67          		BIT	4,A
  DCDC  C8            		RET	Z
                      	
  DCDD  CD30DD        		CALL	FILEI
  DCE0  2AF500        		LD	HL,(FDRV+26)
  DCE3  23            		INC	HL
  DCE4  22E900        		LD	(FDRV+14),HL
  DCE7  18D4          		JR	SETDIR
                      	
  DCE9                	FILED:
  DCE9  CD30DD        		CALL	FILEI
                      	
  DCEC  0608          		LD	B,8
  DCEE                	FILE2:
  DCEE  CD3EDD        		CALL	CCHKF
  DCF1  C8            		RET	Z
  DCF2  FE2A          		CP	"*"
  DCF4  282E          		JR	Z,FILE9
  DCF6  FE2E          		CP	"."
  DCF8  280C          		JR	Z,FILE4
  DCFA  77            		LD	(HL),A
  DCFB  23            		INC	HL
  DCFC  10F0          		DJNZ	FILE2
                      	
  DCFE                	FILE3:
  DCFE  CD3EDD        		CALL	CCHKF
  DD01  C8            		RET	Z
  DD02  FE2E          		CP	"."
  DD04  20F8          		JR	NZ,FILE3
                      	
  DD06                	FILE4:
  DD06  21E400        		LD	HL,FNAME+8
  DD09  0603          		LD	B,3
                      	
  DD0B                	FILE4L:
  DD0B  CD3EDD        		CALL	CCHKF
  DD0E  C8            		RET	Z
  DD0F  FE2E          		CP	"."
  DD11  2008          		JR	NZ,FILE12
  DD13  32DC00        		LD	(FNAME),A	;Parent directory(..)
  DD16  32DD00        		LD	(FNAME+1),A
  DD19  3E20          		LD	A,020H
  DD1B                	FILE12:
  DD1B  FE2A          		CP	"*"
  DD1D  280A          		JR	Z,FILE10
  DD1F  77            		LD	(HL),A
  DD20  23            		INC	HL
  DD21  10E8          		DJNZ	FILE4L
  DD23  C9            		RET
                      	
  DD24                	FILE9:
  DD24  CD29DD        		CALL	FILE10
  DD27  18D5          		JR	FILE3
                      	
  DD29                	FILE10:
  DD29  3E3F          		LD	A,"?"
                      	
  DD2B                	FILE7:
  DD2B  77            		LD	(HL),A
  DD2C  23            		INC	HL
  DD2D  10FC          		DJNZ	FILE7
  DD2F  C9            		RET
                      	
  DD30                	FILEI:
  DD30  3E20          		LD	A,020H
  DD32  01000B        		LD	BC,11*256
  DD35  21DC00        		LD	HL,FNAME
  DD38  E5            		PUSH	HL
  DD39  CD2BDD        		CALL	FILE7
  DD3C  E1            		POP	HL
  DD3D  C9            		RET
                      	
  DD3E                	CCHKF:
  DD3E  1A            		LD	A,(DE)
  DD3F  CD46DD        		CALL	CCHK2
  DD42  C8            		RET	Z
  DD43  C385E0        		JP	FKAN
                      	
  DD46                	CCHK2:
  DD46  0C            		INC	C
  DD47  0D            		DEC	C
  DD48  C0            		RET	NZ
  DD49                	CCHK3:
  DD49  FE2B          		CP	"+"
  DD4B  C8            		RET	Z
  DD4C  FE2C          		CP	","
  DD4E  C8            		RET	Z
  DD4F  FE2F          		CP	"/"
  DD51  C8            		RET	Z
  DD52  FE3A          		CP	":"
  DD54  C8            		RET	Z
  DD55  FE3B          		CP	";"
  DD57  C8            		RET	Z
  DD58  FE3D          		CP	"="
  DD5A  C8            		RET	Z
  DD5B  FE5C          		CP	"\"
  DD5D  C8            		RET	Z
  DD5E  FE20          		CP	020H
  DD60  D0            		RET	NC
  DD61  BF            		CP	A		;Z=1
  DD62  C9            		RET
                      	
  DD63                	SS1:
  DD63  13            		INC	DE
  DD64                	SPCUT:
  DD64  1A            		LD	A,(DE)
  DD65  FE20          		CP	020H
  DD67  28FA          		JR	Z,SS1
  DD69  C9            		RET
                      	
  DD6A                	SETDRVF:
  DD6A  11DB00        		LD	DE,FDRV
  DD6D                	SETDRV0:
  DD6D  CD76DD        		CALL	SETDRV
  DD70  FDE1          		POP	IY
  DD72  C1            		POP	BC
  DD73  D1            		POP	DE
  DD74  E1            		POP	HL
  DD75  C9            		RET
                      	
  DD76                	SETDRV:
  DD76  E3            		EX	(SP),HL		;HL=RETRN ADDRESS
  DD77  D5            		PUSH	DE		;PUSH HL/DE/BC/IY
  DD78  C5            		PUSH	BC
  DD79  1A            		LD	A,(DE)
                      	;	EX	DE,IY
  DD7A  D5            		PUSH	DE
  DD7B  FDE3          		EX	(SP),IY
  DD7D  D1            		POP	DE
                      	;
  DD7E  D5            		PUSH	DE
  DD7F  CD8BDD        		CALL	GETDRV
  DD82  3C            		INC	A
  DD83  FD7700        		LD	(IY),A
  DD86  3D            		DEC	A
  DD87  CDD9EC        		CALL	_CHGDRV
                      	
  DD8A  E9            		JP	(HL)
                      	
  DD8B                	GETDRV:
  DD8B  E67F          		AND	07FH
  DD8D  D601          		SUB	001H
  DD8F  3003          		JR	NC,GETDRV1
  DD91  3A87EC        		LD	A,(_DVSW)	;Current Drive
  DD94                	GETDRV1:
  DD94  3288EC        		LD	(_DRV),A
  DD97  C9            		RET
                      	
  DD98                	SOPENX:
  DD98  CD01DF        		CALL	CHKDDX
  DD9B  3802          		JR	C,SOPENX1
  DD9D  C1            		POP	BC
  DD9E  E9            		JP	(HL)
  DD9F                	SOPENX1:
  DD9F  113CE2        		LD	DE,SFILE
  DDA2  1A            		LD	A,(DE)
  DDA3  FDBE00        		CP	(IY)
  DDA6  2024          		JR	NZ,SOPEN
  DDA8  13            		INC	DE
  DDA9  FDE5          		PUSH	IY
  DDAB  E1            		POP	HL
  DDAC  23            		INC	HL
  DDAD  CD31DF        		CALL	CPFILE
  DDB0  201A          		JR	NZ,SOPEN
                      	
  DDB2  2A36E2        		LD	HL,(SCDIR)
  DDB5  FD750E        		LD	(IY+14),L
  DDB8  FD740F        		LD	(IY+15),H
                      	
  DDBB  2A3AE2        		LD	HL,(SFNDF)	;Direcroty location and Flags
  DDBE  229FEC        		LD	(_FILEN),HL
                      	
  DDC1  ED5B38E2      		LD	DE,(SFBPS)
  DDC5  213CE2        		LD	HL,SFILE
  DDC8  36FF          		LD	(HL),0FFH
  DDCA  23            		INC	HL
  DDCB  C9            		RET
  DDCC                	SOPEN:
  DDCC  21C9DE        		LD	HL,FILESE
  DDCF                	SOPENC:
  DDCF  2209DE        		LD	(OPENPAT+1),HL
                      	
  DDD2  CDE2EC        		CALL	_RDFATX		;Detect Media
  DDD5  3857          		JR	C,RDDERR
                      	
  DDD7  AF            		XOR	A
  DDD8  329FEC        		LD	(_FILEN),A
  DDDB                	SOPEN0:
  DDDB  CDB1DF        		CALL	LDDIRX
  DDDE  2819          		JR	Z,SDIRX1
                      	
  DDE0  CDBADE        		CALL	DC		;Sub Directory
  DDE3  3808          		JR	C,SDIRX0
  DDE5  2A7EEC        		LD	HL,(_DTBUF)
  DDE8  7E            		LD	A,(HL)
  DDE9  FE2E          		CP	"."
  DDEB  2810          		JR	Z,SOPEN1
  DDED                	SDIRX0:
  DDED  AF            		XOR	A
  DDEE  32A0EC        		LD	(_DIRF),A
  DDF1  FD360E01      		LD	(IY+14),1
  DDF5  FD360F00      		LD	(IY+15),0
  DDF9                	SDIRX1:
  DDF9  ED5B62E2      		LD	DE,(_DIRPS)	;Root Directory
                      	
  DDFD                	SOPEN1:
  DDFD  0E20          	IBM1:	LD	C,32		;ooo 16
  DDFF                	SOPEN1X:
  DDFF  CDBADE        		CALL	DC		;FILE SEARCH
  DE02  382A          		JR	C,RDDERR
  DE04  2A7EEC        		LD	HL,(_DTBUF)
  DE07                	SOPEN2:
  DE07  D5            		PUSH	DE
  DE08  CDC9DE        	OPENPAT:CALL	FILESE		;(Self-rewriting)
  DE0B  D1            		POP	DE
  DE0C  3876          		JR	C,SOPENE
  DE0E  281B          		JR	Z,NOTSE
  DE10                	SOPEN3:
  DE10  3AA0EC        		LD	A,(_DIRF)
  DE13  B7            		OR	A
  DE14  200C          		JR	NZ,SOPEN5
                      	
  DE16  CD67DE        		CALL	ENDRDI
  DE19  280E          		JR	Z,SOPEN6
  DE1B  3C            		INC	A
  DE1C  200B          		JR	NZ,SOPEN6
  DE1E  0E10          		LD	C,16
  DE20  18DD          		JR	SOPEN1X
  DE22                	SOPEN5:
  DE22  CDF7EC        		CALL	_GNCL	;END DIR
  DE25  D8            		RET	C
  DE26  CD6DDF        		CALL	ENDCL
  DE29                	SOPEN6:
  DE29  38D2          		JR	C,SOPEN1
                      	
  DE2B                	_SYS2B:
  DE2B                	_SYS2D:
  DE2B                	NOTSE:
  DE2B  37            		SCF			;CF=1
  DE2C  9F            		SBC	A,A		;A=0FFH
  DE2D  C9            		RET
                      	
  DE2E                	RDDERR:
  DE2E  BF            		CP	A		;READ ERR CF=1 ZF=1
  DE2F  37            		SCF
  DE30  C9            		RET
                      	
  DE31                	NOPEN:
  DE31  21C9DE        		LD	HL,FILESE
  DE34  2209DE        		LD	(OPENPAT+1),HL
  DE37  FD2A98EC      		LD	IY,(_FCB)
  DE3B  CD98E0        		CALL	CHKWILDX
  DE3E  30EB          		JR	NC,NOTSE
  DE40  FD7E00        		LD	A,(IY)
  DE43  3D            		DEC	A
  DE44  3288EC        		LD	(_DRV),A
  DE47  CDD9EC        		CALL	_CHGDRV
  DE4A  D8            		RET	C
                      	
  DE4B  CDB1DF        		CALL	LDDIRX
  DE4E  ED5B9AEC      		LD	DE,(_FBPS)
  DE52  CDBADE        		CALL	DC
  DE55  38D7          		JR	C,RDDERR
  DE57  3A9EEC        		LD	A,(_FBCNT)
  DE5A  3D            		DEC	A
  DE5B  28B3          		JR	Z,SOPEN3
  DE5D                	NOPEN2:
  DE5D  2A9CEC        		LD	HL,(_FBAD)
  DE60  012000        		LD	BC,020H
  DE63  09            		ADD	HL,BC
  DE64  4F            		LD	C,A
  DE65  18A0          		JR	SOPEN2
                      	
  DE67                	ENDRDI:
  DE67  3A65DF        		LD	A,(DBLPAT)	;A=029H or 0
  DE6A  E601          		AND	1
  DE6C  4F            		LD	C,A
  DE6D  3C            		INC	A
  DE6E  83            		ADD	A,E
  DE6F  5F            		LD	E,A
  DE70  D60C          	RTEPAT:	SUB	12		;(Self-rewriting)
  DE72  CB41          		BIT	0,C
  DE74  C9            		RET
                      	
  DE75                	SOPENE2:
  DE75  229CEC        		LD	(_FBAD),HL
  DE78  79            		LD	A,C
  DE79  329EEC        		LD	(_FBCNT),A
  DE7C  ED539AEC      		LD	(_FBPS),DE
  DE80  FD2298EC      		LD	(_FCB),IY
  DE84                	SOPENE:
  DE84  AF            		XOR	A
  DE85  C9            		RET
                      	
  DE86                	COPEN:
  DE86  FD360D20      		LD	(IY+13),020H		;Attribute
                      	
  DE8A  21E6DE        		LD	HL,NEXTSE
  DE8D  CDCFDD        		CALL	SOPENC
  DE90  D0            		RET	NC
  DE91  C8            		RET	Z
  DE92  3AA0EC        		LD	A,(_DIRF)
  DE95  D601          		SUB	001H
  DE97  D8            		RET	C
  DE98  0601          		LD	B,1
  DE9A  CD0AE1        		CALL	WRDF
  DE9D  D8            		RET	C
  DE9E  ED5B64E2      		LD	DE,(_CLPS)
  DEA2  D5            		PUSH	DE
  DEA3  CD5ADF        		CALL	DCPAT
  DEA6  CD33E5        		CALL	DRDNX
  DEA9  2A7EEC        		LD	HL,(_DTBUF)
  DEAC  5D            		LD	E,L
  DEAD  54            		LD	D,H
  DEAE  13            		INC	DE		;DE,DTBUF+1
  DEAF  01FF03        		LD	BC,1023
  DEB2  AF            		XOR	A
  DEB3  77            		LD	(HL),A
  DEB4  E5            		PUSH	HL
  DEB5  EDB0          		LDIR
  DEB7  E1            		POP	HL
  DEB8  D1            		POP	DE
  DEB9  C9            		RET
                      	
  DEBA                	DC:
  DEBA  ED5364E2      		LD	(_CLPS),DE
  DEBE  C5            		PUSH	BC
  DEBF  D5            		PUSH	DE
  DEC0  CD5ADF        		CALL	DCPAT
  DEC3  CD17E5        		CALL	DRDX
  DEC6  D1            		POP	DE
  DEC7  C1            		POP	BC
  DEC8  C9            		RET
                      	
  DEC9                	FILESE:
  DEC9  7E            		LD	A,(HL)
  DECA  B7            		OR	A
  DECB  C8            		RET	Z		;END:ZF=1 CF=0
  DECC  FEE5          		CP	0E5H
  DECE  280E          		JR	Z,FILESE1
  DED0  FDE5          		PUSH	IY
  DED2  D1            		POP	DE
  DED3  13            		INC	DE
  DED4  E5            		PUSH	HL
  DED5  CD31DF        		CALL	CPFILE
  DED8  CC52DF        		CALL	Z,CPFILE2
  DEDB  E1            		POP	HL
  DEDC  37            		SCF
  DEDD  C8            		RET	Z		;!!!:(ZF=1) CF=1
  DEDE                	FILESE1:
  DEDE  CDF5DE        		CALL	FNEXT
  DEE1  20E6          		JR	NZ,FILESE
  DEE3                	ZFCF0:
  DEE3  F6FF          		OR	0FFH		;ZF=0 CF=0
  DEE5  C9            		RET
                      	
  DEE6                	NEXTSE:
  DEE6  7E            		LD	A,(HL)
  DEE7  B7            		OR	A
  DEE8  37            		SCF
  DEE9  C8            		RET	Z		;!!!:ZF=1 CF=1
  DEEA  FEE5          		CP	0E5H
  DEEC  37            		SCF
  DEED  C8            		RET	Z		;!!!:(ZF=1) CF=1
  DEEE  CDF5DE        		CALL	FNEXT
  DEF1  20F3          		JR	NZ,NEXTSE
  DEF3  18EE          		JR	ZFCF0
                      	
  DEF5                	FNEXT:
  DEF5  E5            		PUSH	HL
  DEF6  219FEC        		LD	HL,_FILEN
  DEF9  34            		INC	(HL)
  DEFA  E1            		POP	HL
  DEFB  112000        		LD	DE,020H
  DEFE  19            		ADD	HL,DE
  DEFF  0D            		DEC	C
  DF00  C9            		RET
                      	
  DF01                	CHKDDX:
  DF01  CD98E0        		CALL	CHKWILDX
  DF04  D8            		RET	C
  DF05  FDE5          		PUSH	IY
  DF07  D1            		POP	DE
  DF08  13            		INC	DE
  DF09  2162EC        		LD	HL,DDTB
  DF0C  0604          		LD	B,DDS
  DF0E                	CPNAME:
  DF0E  C5            		PUSH	BC
  DF0F  D5            		PUSH	DE
  DF10  110CE5        		LD	DE,CPBUF
  DF13  010400        		LD	BC,4
  DF16  EDB0          		LDIR
  DF18  D1            		POP	DE
  DF19  D5            		PUSH	DE
  DF1A  E5            		PUSH	HL
  DF1B  210CE5        		LD	HL,CPBUF
  DF1E  CD31DF        		CALL	CPFILE
  DF21  E1            		POP	HL
  DF22  D1            		POP	DE
  DF23  C1            		POP	BC
  DF24  2005          		JR	NZ,CPNAME1
  DF26  7E            		LD	A,(HL)
  DF27  23            		INC	HL
  DF28  66            		LD	H,(HL)
  DF29  6F            		LD	L,A
  DF2A  C9            		RET
  DF2B                	CPNAME1:
  DF2B  23            		INC	HL
  DF2C  23            		INC	HL
  DF2D  10DF          		DJNZ	CPNAME
  DF2F  37            		SCF
  DF30  C9            		RET
                      	
  DF31                	CPFILE:
  DF31  C5            		PUSH	BC
  DF32  01000B        		LD	BC,00B00H
  DF35                	CPSTR1:
  DF35  1A            		LD	A,(DE)
  DF36  FE3F          		CP	"?"		;Wild card
  DF38  2812          		JR	Z,CPSTR2
  DF3A  7E            		LD	A,(HL)
  DF3B  CD7EE0        		CALL	FKANC
  DF3E  E5            		PUSH	HL
  DF3F  67            		LD	H,A
  DF40  1A            		LD	A,(DE)
  DF41  CB01          		RLC	C
  DF43  CD7EE0        		CALL	FKANC
  DF46  CB09          		RRC	C
  DF48  BC            		CP	H		;CP (HL),(DE)
  DF49  E1            		POP	HL
  DF4A  2004          		JR	NZ,CPSTR3
  DF4C                	CPSTR2:
  DF4C  13            		INC	DE
  DF4D  23            		INC	HL
  DF4E  10E5          		DJNZ	CPSTR1
  DF50                	CPSTR3:
  DF50  C1            		POP	BC
  DF51  C9            		RET
                      	
  DF52                	CPFILE2:
  DF52  FD7E0D        		LD	A,(IY+13)
  DF55  F6E1          		OR	0E1H
  DF57  2F            		CPL
  DF58  A6            		AND	(HL)
  DF59  C9            		RET
                      	
  DF5A                	DCPAT:
  DF5A  2A7EEC        		LD	HL,(_DTBUF)
  DF5D  3AA0EC        		LD	A,(_DIRF)
  DF60  B7            		OR	A
  DF61  C8            		RET	Z
                      	
  DF62                	CLUST:
  DF62  EB            		EX	DE,HL
  DF63  3E08          	CLSPAT:	LD	A,8	;DE=DE+8 (2D)  !ADDCL (Self-rewriting)
  DF65  29            	DBLPAT:	ADD	HL,HL	;DE=DE*2 (512) !DBLCL (Self-rewriting)
  DF66  EB            		EX	DE,HL
  DF67  83            		ADD	A,E
  DF68  5F            		LD	E,A
  DF69  8A            		ADC	A,D
  DF6A  93            		SUB	E
  DF6B  57            		LD	D,A
  DF6C  C9            		RET
                      	
  DF6D                	ENDCL:
  DF6D  7A            		LD	A,D	;END CLUSTER
  DF6E  FE01          	CLPAT1:	CP	1	;164=356	(Self-rewriting)
  DF70  C0            		RET	NZ
  DF71  7B            		LD	A,E
  DF72  FE64          	CLPAT2:	CP	064H	;		(Self-rewriting)
  DF74  C9            		RET
                      	
  DF75                	CAP:
  DF75  FE61          		CP	"a"
  DF77  D8            		RET	C
  DF78  FE7B          		CP	"z"+1
  DF7A  D0            		RET	NC
  DF7B  D620          		SUB	020H
  DF7D  C9            		RET
  DF7E                	CAP2:
  DF7E  CD75DF        		CALL	CAP
  DF81                	CAP3:
  DF81  CD8ADF        		CALL	CAP4
  DF84  FE21          		CP	021H
  DF86  D0            		RET	NC
  DF87  3EA0          		LD	A,0A0H
  DF89  C9            		RET
  DF8A                	CAP4:
  DF8A  FE05          		CP	5
  DF8C  C0            		RET	NZ
  DF8D  3EE5          		LD	A,0E5H
  DF8F  C9            		RET
                      	
  DF90                	CHDIR:
  DF90  CD98E8        		CALL	GETDPBD
  DF93  3806          		JR	C,CHDIR2
  DF95  DD751A        		LD	(IX+01AH),L		;_SDIR_
  DF98  DD741B        		LD	(IX+01BH),H		;_SDIR_+1
  DF9B                	CHDIR2:
  DF9B  DDE1          		POP	IX
  DF9D  C9            		RET
                      	
  DF9E                	LDDIR:
  DF9E  CD98E8        		CALL	GETDPBD
  DFA1  DD5E1A        		LD	E,(IX+01AH)		;_SDIR_
  DFA4  DD561B        		LD	D,(IX+01BH)		;_SDIR_+1
  DFA7  13            		INC	DE
  DFA8  FD730E        		LD	(IY+14),E
  DFAB  FD720F        		LD	(IY+15),D
  DFAE  1B            		DEC	DE
  DFAF  18EA          		JR	CHDIR2
                      	
  DFB1                	LDDIRX:
  DFB1  FD5E0E        		LD	E,(IY+14)
  DFB4  FD560F        		LD	D,(IY+15)
  DFB7  1B            		DEC	DE
  DFB8  CD6DDF        		CALL	ENDCL
  DFBB  D49EDF        		CALL	NC,LDDIR
  DFBE                	LDDIRS:
  DFBE  7A            		LD	A,D
  DFBF  B3            		OR	E
  DFC0  32A0EC        		LD	(_DIRF),A
  DFC3  C9            		RET
                      	
  DFC4                	KILL:
  DFC4  CD98E0        		CALL	CHKWILDX
  DFC7  3838          		JR	C,KILLW
  DFC9  CD01DF        		CALL	CHKDDX
  DFCC  3F            		CCF
  DFCD  D49FDD        		CALL	NC,SOPENX1
  DFD0                	KILLS:
  DFD0  D414E0        		CALL	NC,CHKATT
  DFD3  D8            		RET	C
  DFD4                	KILLSX:
  DFD4  36E5          		LD	(HL),0E5H	;DIR
  DFD6  CD72E0        		CALL	WTDB
  DFD9  111A00        		LD	DE,01AH
  DFDC  19            		ADD	HL,DE
  DFDD  5E            		LD	E,(HL)
  DFDE  23            		INC	HL
  DFDF  56            		LD	D,(HL)
  DFE0  1804          		JR	KILLS2
  DFE2                	KILLS1:
  DFE2  ED5B64E2      		LD	DE,(_CLPS)	;FAT
  DFE6                	KILLS2:
  DFE6  CD6DDF        		CALL	ENDCL
  DFE9  D0            		RET	NC		;CF=0
  DFEA  21FEFF        		LD	HL,0-2
  DFED  19            		ADD	HL,DE
  DFEE  D0            		RET	NC		;DE= 0 or 1
  DFEF  D5            		PUSH	DE
  DFF0  CDF7EC        		CALL	_GNCL
  DFF3  ED5364E2      		LD	(_CLPS),DE
  DFF7  D1            		POP	DE
  DFF8  210000        		LD	HL,0
  DFFB  D4FAEC        		CALL	NC,_SNCL
  DFFE  30E2          		JR	NC,KILLS1
  E000  C9            		RET
                      	
  E001                	KILLW:
  E001  CDCCDD        		CALL	SOPEN
  E004                	KILLW1:
  E004  380B          		JR	C,KILLW2
  E006  CD75DE        		CALL	SOPENE2
  E009  CDD0DF        		CALL	KILLS
  E00C  CD31DE        		CALL	NOPEN
  E00F  18F3          		JR	KILLW1
  E011                	KILLW2:
  E011  C8            		RET	Z
  E012  3F            		CCF
  E013  C9            		RET
                      	
  E014                	CHKATT:
  E014  E5            		PUSH	HL
  E015  110B00        		LD	DE,00BH
  E018  19            		ADD	HL,DE
  E019  7E            		LD	A,(HL)
  E01A  E1            		POP	HL
  E01B  E61F          		AND	01FH
  E01D  C8            		RET	Z
  E01E  37            		SCF
  E01F  C9            		RET
                      	
  E020                	NAME:
  E020  CD98E0        		CALL	CHKWILDX
  E023  D8            		RET	C
  E024  110400        		LD	DE,4
  E027  19            		ADD	HL,DE
  E028  223EE0        		LD	(NAMEP+2),HL
  E02B  23            		INC	HL
  E02C  CD9CE0        		CALL	CHKWILD
  E02F  D8            		RET	C
                      	
  E030  CD9FDD        		CALL	SOPENX1
  E033  D414E0        		CALL	NC,CHKATT
  E036  D8            		RET	C
                      	
  E037  FD7E00        		LD	A,(IY)
  E03A  FDE5          		PUSH	IY
  E03C  FD210000      	NAMEP:	LD	IY,0
  E040  FD7700        		LD	(IY),A
  E043  CD9FDD        		CALL	SOPENX1
  E046  FDE3          		EX	(SP),IY
  E048  3F            		CCF
  E049  D4CCDD        		CALL	NC,SOPEN
  E04C  EB            		EX	DE,HL
  E04D  E1            		POP	HL
  E04E  D8            		RET	C
                      	
  E04F                	SETNAME:
  E04F  01000B        		LD	BC,11*256
  E052  23            		INC	HL
  E053  7E            		LD	A,(HL)
  E054  FEE5          		CP	0E5H
  E056  2004          		JR	NZ,SNAME1
  E058  3E05          		LD	A,5
  E05A  180E          		JR	SNAME3
  E05C                	SNAME1:
  E05C  7E            		LD	A,(HL)
  E05D  0C            		INC	C
  E05E  0D            		DEC	C
  E05F  2009          		JR	NZ,SNAME3
  E061  CD75DF        		CALL	CAP
  E064  FEA0          		CP	0A0H
  E066  2002          		JR	NZ,SNAME3
  E068  3E20          		LD	A,020H
  E06A                	SNAME3:
  E06A  12            		LD	(DE),A
  E06B  7E            		LD	A,(HL)
  E06C  23            		INC	HL
  E06D  CD85E0        		CALL	FKAN
  E070  10EA          		DJNZ	SNAME1
  E072                	WTDB:
  E072  3EFF          		LD	A,0FFH
  E074  323CE2        		LD	(SFILE),A
  E077                	SWTDBF:
  E077  3E01          		LD	A,1
  E079  32A4EC        		LD	(_WTDBF),A
  E07C  AF            		XOR	A
  E07D  C9            		RET
                      	
  E07E                	FKANC:
  E07E  CB41          		BIT	0,C
  E080  CC7EDF        		CALL	Z,CAP2
  E083  1801          		JR	FKANX
  E085                	FKAN:
  E085  13            		INC	DE
  E086                	FKANX:
  E086  CB41          		BIT	0,C
  E088  CB81          		RES	0,C
  E08A  C0            		RET	NZ
  E08B  FE80          		CP	080H
  E08D  D8            		RET	C
  E08E  FEA0          		CP	0A0H
  E090  3803          		JR	C,FKAN1
  E092  FEE0          		CP	0E0H
  E094  D8            		RET	C
  E095                	FKAN1:
  E095  0C            		INC	C
  E096  A7            		AND	A
  E097  C9            		RET
                      	
  E098                	CHKWILDX:
  E098  FDE5          		PUSH	IY
  E09A  E1            		POP	HL
  E09B  23            		INC	HL
  E09C                	CHKWILD:
  E09C  060B          		LD	B,11
  E09E  3E3F          		LD	A,"?"
  E0A0                	CHKWIL1:
  E0A0  BE            		CP	(HL)
  E0A1  23            		INC	HL
  E0A2  37            		SCF
  E0A3  C8            		RET	Z
  E0A4  10FA          		DJNZ	CHKWIL1
  E0A6  AF            		XOR	A
  E0A7  C9            		RET
                      	
  E0A8                	SDIRENT:		;IY=FCB HL=DIR
  E0A8  D5            		PUSH	DE
  E0A9  E5            		PUSH	HL
  E0AA  FDE5          		PUSH	IY
  E0AC  D1            		POP	DE
  E0AD  EB            		EX	DE,HL
  E0AE  CD4FE0        		CALL	SETNAME
                      	;				Attribute
  E0B1  FD7E0D        		LD	A,(IY+13)
  E0B4  12            		LD	(DE),A
  E0B5  13            		INC	DE
                      	;				Reserved
  E0B6  AF            		XOR	A
  E0B7  060A          		LD	B,10
  E0B9                	SDE1:
  E0B9  12            		LD	(DE),A
  E0BA  13            		INC	DE
  E0BB  10FC          		DJNZ	SDE1
                      	;				TIME
  E0BD  FD7E16        		LD	A,(IY+22)
  E0C0  12            		LD	(DE),A
  E0C1  13            		INC	DE
  E0C2  FD7E17        		LD	A,(IY+23)
  E0C5  12            		LD	(DE),A
  E0C6  13            		INC	DE
                      	;				DATE
  E0C7  FD7E14        		LD	A,(IY+20)
  E0CA  12            		LD	(DE),A
  E0CB  13            		INC	DE
  E0CC  FD7E15        		LD	A,(IY+21)
  E0CF  12            		LD	(DE),A
  E0D0  13            		INC	DE
                      	;				First cluster
  E0D1  FD7E1A        		LD	A,(IY+26)
  E0D4  12            		LD	(DE),A
  E0D5  13            		INC	DE
  E0D6  FD7E1B        		LD	A,(IY+27)
  E0D9  12            		LD	(DE),A
  E0DA  13            		INC	DE
                      	;				SIZE
  E0DB  FD7E10        		LD	A,(IY+16)
  E0DE  12            		LD	(DE),A
  E0DF  13            		INC	DE
  E0E0  FD7E11        		LD	A,(IY+17)
  E0E3  12            		LD	(DE),A
  E0E4  13            		INC	DE
  E0E5  FD7E12        		LD	A,(IY+18)
  E0E8  12            		LD	(DE),A
  E0E9  13            		INC	DE
  E0EA  FD7E13        		LD	A,(IY+19)
  E0ED  12            		LD	(DE),A
                      	
  E0EE  AF            		XOR	A
  E0EF  E1            		POP	HL
  E0F0  D1            		POP	DE
  E0F1  C9            		RET
                      	
  E0F2                	WOPEN:
  E0F2  FD7E0D        		LD	A,(IY+13)
  E0F5  E61F          		AND	01FH
  E0F7  37            		SCF
  E0F8  C0            		RET	NZ
  E0F9  FD361CFE      		LD	(IY+28),0FEH	;Open
  E0FD                	TOPEN2:
  E0FD  AF            		XOR	A
  E0FE                	TOPEN:
  E0FE  FD3617FF      		LD	(IY+23),0FFH	;Initializes the time stamp
  E102  C9            		RET
                      	
  E103                	WRDFX:
  E103  41            		LD	B,C
  E104  04            		INC	B
  E105  3E37          		LD	A,037H
  E107  3230E5        		LD	(DRDN1),A
                      	
  E10A                	WRDF:
  E10A  110200        		LD	DE,2
  E10D                	WRDF1:
  E10D  C5            		PUSH	BC
  E10E  D5            		PUSH	DE
  E10F  CDF7EC        		CALL	_GNCL
  E112  381C          		JR	C,WRDF3
  E114  7A            		LD	A,D
  E115  B3            		OR	E
  E116  2027          		JR	NZ,WRDF4
  E118  E1            		POP	HL
  E119  E5            		PUSH	HL
  E11A  ED5B64E2      		LD	DE,(_CLPS)
  E11E  2264E2        		LD	(_CLPS),HL
  E121  7A            		LD	A,D
  E122  B3            		OR	E
  E123  2008          		JR	NZ,WRDF2
  E125  FD751A        		LD	(IY+26),L	;Start cluster
  E128  FD741B        		LD	(IY+27),H
  E12B  1803          		JR	WRDF3
  E12D                	WRDF2:
  E12D  CDFAEC        		CALL	_SNCL
  E130                	WRDF3:
  E130  D1            		POP	DE
  E131  C1            		POP	BC
  E132  D8            		RET	C
  E133  100C          		DJNZ	WRDF5
  E135  ED5B64E2      		LD	DE,(_CLPS)
  E139  21FFFF        		LD	HL,0FFFFH
  E13C  C3FAEC        		JP	_SNCL
                      	
  E13F                	WRDF4:
  E13F  D1            		POP	DE
  E140  C1            		POP	BC
  E141                	WRDF5:
  E141  13            		INC	DE
  E142  CD6DDF        		CALL	ENDCL
  E145  38C6          		JR	C,WRDF1
  E147  37            		SCF
  E148  C9            		RET
                      	
  E149                	RWXR:
  E149  CB38          		SRL	B
  E14B  CB19          		RR	C
  E14D  CB38          	IBM4:	SRL	B	;ooo
  E14F  CB19          		RR	C
                      	
  E151  FD5E1A        		LD	E,(IY+26)	;Cluster
  E154  FD561B        		LD	D,(IY+27)
  E157                	RWX1:
  E157  ED5364E2      		LD	(_CLPS),DE
  E15B  7A            		LD	A,D
  E15C  B3            		OR	E
  E15D  37            		SCF
  E15E  C8            		RET	Z
                      	
  E15F  78            		LD	A,B
  E160  B1            		OR	C
  E161  C8            		RET	Z
                      	
  E162  CDF7EC        		CALL	_GNCL
  E165  D8            		RET	C
  E166  0B            		DEC	BC
  E167  CD6DDF        		CALL	ENDCL
  E16A  38EB          		JR	C,RWX1
  E16C  37            		SCF
  E16D  C9            		RET
                      	
  E16E                	DSKF:
  E16E  110000        	MAXCLP:	LD	DE,0
  E171  210000        		LD	HL,0
  E174                	DSKF1:
  E174  D5            		PUSH	DE
  E175  CDF7EC        		CALL	_GNCL
  E178  380C          		JR	C,POPSCF
  E17A  7A            		LD	A,D
  E17B  B3            		OR	E
  E17C  2001          		JR	NZ,DSKF2
  E17E  23            		INC	HL
  E17F                	DSKF2:
  E17F  D1            		POP	DE
  E180  1B            		DEC	DE
  E181  7A            		LD	A,D
  E182  B3            		OR	E
  E183  20EF          		JR	NZ,DSKF1
  E185  C9            		RET
                      	
  E186                	POPSCF:
  E186  F1            		POP	AF
  E187  37            		SCF
  E188  C9            		RET
                      	
  E189                	SETTMS:
  E189  FD7E17        		LD	A,(IY+23)
  E18C  3C            		INC	A
  E18D  C0            		RET	NZ
  E18E                	SETTMSX:
  E18E  CDDDD7        		CALL	_SYS2C
                      	
  E191  CB25          		SLA	L
  E193  CB25          		SLA	L
  E195  29            		ADD	HL,HL
  E196  29            		ADD	HL,HL
  E197  29            		ADD	HL,HL
  E198  7A            		LD	A,D
  E199  0F            		RRCA
  E19A  E61F          		AND	01FH
  E19C  B5            		OR	L
  E19D  6F            		LD	L,A
  E19E  FD7516        		LD	(IY+22),L
  E1A1  FD7417        		LD	(IY+23),H
                      	
  E1A4  CDA3D7        		CALL	_SYS2A
                      	
  E1A7  0144F8        		LD	BC,0-1980
  E1AA  09            		ADD	HL,BC
  E1AB  65            		LD	H,L
                      	
  E1AC  7A            		LD	A,D
  E1AD  87            		ADD	A,A
  E1AE  87            		ADD	A,A
  E1AF  87            		ADD	A,A
  E1B0  87            		ADD	A,A
  E1B1  6F            		LD	L,A
  E1B2  29            		ADD	HL,HL
  E1B3  7D            		LD	A,L
  E1B4  B3            		OR	E
  E1B5  6F            		LD	L,A
  E1B6  FD7514        		LD	(IY+20),L
  E1B9  FD7415        		LD	(IY+21),H
  E1BC  C9            		RET
                      	
  E1BD                	PUSHRR:
  E1BD  CDC3E1        		CALL	SUBRR
  E1C0                	POPRR1:
  E1C0  EDB0          		LDIR
  E1C2  C9            		RET
                      	
  E1C3                	SUBRR:
  E1C3  FDE5          		PUSH	IY
  E1C5  E1            		POP	HL
  E1C6  112100        		LD	DE,33
  E1C9  19            		ADD	HL,DE
  E1CA  115DE2        		LD	DE,HLBUF
  E1CD  010300        		LD	BC,3
  E1D0  C9            		RET
                      	
  E1D1                	SETSEQ:
  E1D1  F5            		PUSH	AF
  E1D2  FD7E21        		LD	A,(IY+33)
  E1D5  FD6E22        		LD	L,(IY+34)
  E1D8  FD6623        		LD	H,(IY+35)
                      	
  E1DB  CDF7E1        		CALL	SSQ1
                      	
  E1DE  29            		ADD	HL,HL
  E1DF  CB3D          		SRL	L
  E1E1  FD7520        		LD	(IY+32),L
  E1E4  FD740C        		LD	(IY+12),H
  E1E7  F1            		POP	AF
                      	
  E1E8                	POPRR:
  E1E8  CDC3E1        		CALL	SUBRR
  E1EB  EB            		EX	DE,HL
  E1EC  18D2          		JR	POPRR1
                      	
  E1EE                	GETSIZE:
  E1EE  FD7E10        		LD	A,(IY+16)
  E1F1  FD6E11        		LD	L,(IY+17)
  E1F4  FD6612        		LD	H,(IY+18)
  E1F7                	SSQ1:
  E1F7  87            		ADD	A,A
  E1F8  ED6A          		ADC	HL,HL
  E1FA  B7            		OR	A
  E1FB  C8            		RET	Z
  E1FC  23            		INC	HL
  E1FD  C9            		RET
                      	
  E1FE                	GETSEQ:
  E1FE  FD6E20        		LD	L,(IY+32)
  E201  FD660C        		LD	H,(IY+12)
                      	
  E204  CB25          		SLA	L
                      	
  E206  CB3C          		SRL	H
  E208  CB1D          		RR	L
  E20A  C9            		RET
                      	
  E20B                	SETRBR:
  E20B  AF            		XOR	A	;HLA = HL*128
  E20C  CB3C          		SRL	H
  E20E  CB1D          		RR	L
  E210  1F            		RRA
  E211  FD7721        		LD	(IY+33),A
  E214  FD7522        		LD	(IY+34),L
  E217  FD7423        		LD	(IY+35),H
  E21A  218000        		LD	HL,128
  E21D  C9            		RET
                      	
  E21E                	[DE26]:
  E21E  ED5B4CEC      		LD	DE,(STABLE+2*026H)
  E222  1804          		JR	[DE1]
  E224                	[DE27]:
  E224  ED5B4EEC      		LD	DE,(STABLE+2*027H)
  E228                	[DE1]:
  E228  CD30E2        		CALL	[DE]
                      	;	EX	DE,IY
  E22B  D5            		PUSH	DE
  E22C  FDE3          		EX	(SP),IY
  E22E  D1            		POP	DE
                      	;
  E22F  C9            		RET
  E230                	[DE]:
                      	;	EX	DE,IY
  E230  D5            		PUSH	DE
  E231  FDE3          		EX	(SP),IY
  E233  D1            		POP	DE
  E234  FDE9          		JP	(IY)
                      	
  E236                	SCDIR:	DS	2		;+14 +15
  E238                	SFBPS:	DS	2		;FBPS
  E23A                	SFNDF:	DS	2		;FILEN DIRF
  E23C                	SFILE:	DS	33		;DRV FILENAME
  E25D                	HLBUF:	DS	3		;Random record buffer
                      	
  E260  0000          	_FATPS:	DW	0
  E262  0000          	_DIRPS:	DW	0
  E264  0000          	_CLPS:	DW	0
                      	
                      		
                      	;	LSX-Dodgers FILE2
                      	
  E266                	RBWDD:
  E266  E5            		PUSH	HL
  E267  C1            		POP	BC
  E268  2140E3        		LD	HL,NUL
  E26B  CD74E3        		CALL	DDX
  E26E  2003          		JR	NZ,RBWDD2
  E270  2A08EC        		LD	HL,(STABLE+2*4)
  E273                	RBWDD2:
  E273  FE43          		CP	"C"
  E275  2003          		JR	NZ,RBWDD3
  E277  21CFD9        		LD	HL,PRINTS
  E27A                	RBWDD3:
  E27A  FE50          		CP	"P"
  E27C  2003          		JR	NZ,RBWDD4
  E27E  2A0AEC        		LD	HL,(STABLE+2*5)
  E281                	RBWDD4:
  E281  228FE2        		LD	(RBWDDP+1),HL
  E284  2A8AEC        		LD	HL,(_DTA)
  E287                	RBWDD1:
  E287  78            		LD	A,B
  E288  B1            		OR	C
  E289                	RBWDD5:
  E289  CA3BE3        		JP	Z,RBW1
  E28C  5E            		LD	E,(HL)
  E28D  23            		INC	HL
  E28E  CDB3D6        	RBWDDP:	CALL	_SYS02
  E291  DA57E3        		JP	C,RBRERR
  E294  3E1A          		LD	A,01AH
  E296  BB            		CP	E
  E297  28F0          		JR	Z,RBWDD5
  E299  0B            		DEC	BC
  E29A  18EB          		JR	RBWDD1
                      	
                      					;Write random block
  E29C                	_SYS26:
  E29C  AF            		XOR	A
  E29D  3230E5        		LD	(DRDN1),A
  E2A0  22EAE4        		LD	(LEFT+1),HL	;Write record byte
  E2A3  220CE5        		LD	(LEFTX),HL
  E2A6  CD76DD        		CALL	SETDRV
                      	
  E2A9  CD5EE4        		CALL	RBX0
  E2AC  DA42E3        		JP	C,RBWERR
  E2AF  28B5          		JR	Z,RBWDD
  E2B1  CDF2E0        		CALL	WOPEN
  E2B4  DA42E3        		JP	C,RBWERR
  E2B7  7C            		LD	A,H
  E2B8  B5            		OR	L
  E2B9  CA3BE3        		JP	Z,RBW1
                      	
  E2BC  2B            		DEC	HL
                      	
  E2BD  CD02E5        		CALL	CDERR		;CDE=Random record
                      	
  E2C0  AF            		XOR	A
  E2C1  19            		ADD	HL,DE
  E2C2  89            		ADC	A,C
  E2C3  47            		LD	B,A
  E2C4  4C            		LD	C,H
  E2C5  CD49E1        		CALL	RWXR
  E2C8  DC03E1        		CALL	C,WRDFX
  E2CB  DA42E3        		JP	C,RBWERR
                      	
  E2CE  CD87E4        		CALL	RBX2
  E2D1  281A          		JR	Z,RBWB
  E2D3  CD99E4        		CALL	RBXA
  E2D6  386A          		JR	C,RBWERR
  E2D8  EB            		EX	DE,HL
  E2D9  C5            		PUSH	BC
  E2DA  EDB0          		LDIR
  E2DC  220EE5        		LD	(DTAX),HL
                      	
  E2DF  CD77E0        		CALL	SWTDBF
                      	
  E2E2  2A0CE5        		LD	HL,(LEFTX)
  E2E5  D1            		POP	DE
  E2E6  ED52          		SBC	HL,DE
  E2E8  220CE5        		LD	(LEFTX),HL
  E2EB  282E          		JR	Z,RBWEND
                      	
  E2ED                	RBWB:
  E2ED  CDCEE4        		CALL	RBXB
  E2F0  2813          		JR	Z,RBWC
  E2F2                	RBWB1:
  E2F2  C5            		PUSH	BC
  E2F3  D5            		PUSH	DE
  E2F4  CD62DF        		CALL	CLUST
  E2F7  CD3AE7        		CALL	DWTC
  E2FA  D1            		POP	DE
  E2FB  C1            		POP	BC
  E2FC  3844          		JR	C,RBWERR
  E2FE  CDF7EC        		CALL	_GNCL
  E301  383F          		JR	C,RBWERR
  E303  10ED          		DJNZ	RBWB1
  E305                	RBWC:
  E305  CDDEE4        		CALL	RBXC
  E308  2811          		JR	Z,RBWEND
                      	
  E30A  CD62DF        		CALL	CLUST
  E30D  CD2FE5        		CALL	DRDN
  E310  3830          		JR	C,RBWERR
  E312  ED5B7EEC      		LD	DE,(_DTBUF)
  E316  EDB0          		LDIR
  E318  CD77E0        		CALL	SWTDBF
  E31B                	RBWEND:
  E31B  CDE9E4        		CALL	RBXEND
                      	
  E31E  CD6DE4        		CALL	RBX1
  E321  3018          		JR	NC,RBW1
  E323  2AEAE4        		LD	HL,(LEFT+1)
  E326  FD5E10        		LD	E,(IY+16)	;CDE=File size
  E329  FD5611        		LD	D,(IY+17)
  E32C  FD4E12        		LD	C,(IY+18)
  E32F  AF            		XOR	A
  E330  19            		ADD	HL,DE
  E331  89            		ADC	A,C
  E332  FD7510        		LD	(IY+16),L
  E335  FD7411        		LD	(IY+17),H
  E338  FD7712        		LD	(IY+18),A
  E33B                	RBW1:
  E33B  FDE1          		POP	IY
  E33D  C1            		POP	BC
  E33E  D1            		POP	DE
  E33F  E1            		POP	HL
  E340                	NUL:
  E340  AF            		XOR	A
  E341  C9            		RET
                      	
  E342                	RBWERR:
  E342  FDE5          		PUSH	IY
  E344  D1            		POP	DE
  E345  2A20EC        		LD	HL,(STABLE+2*010H)
  E348  CD0F00        		CALL	[HL]
  E34B                	RBRERR1:
  E34B  3E01          		LD	A,001H
  E34D                	RBRERR2:
  E34D  FDE1          		POP	IY
  E34F  C1            		POP	BC
  E350  D1            		POP	DE
  E351  E1            		POP	HL
  E352  37            		SCF
  E353  210000        		LD	HL,0
  E356  C9            		RET
                      	
  E357                	RBRERR:
  E357  3EFF          		LD	A,0FFH
  E359  18F2          		JR	RBRERR2
                      	
  E35B                	RBRFL:
  E35B  3E00          	RBRFLP:	LD	A,000H
  E35D  FE0D          		CP	00DH
  E35F  2005          		JR	NZ,RBRFL1
  E361  D5            		PUSH	DE
  E362  1E0A          		LD	E,00AH
  E364  1805          		JR	RBRFL2
  E366                	RBRFL1:
  E366  D5            		PUSH	DE
  E367  CDFAD9        		CALL	_SYS07
  E36A  5F            		LD	E,A
  E36B                	RBRFL2:
  E36B  CDCDEC        		CALL	_PRINT
  E36E  7B            		LD	A,E
  E36F  D1            		POP	DE
  E370  325CE3        		LD	(RBRFLP+1),A
  E373  C9            		RET
  E374                	DDX:
  E374  FD7E01        		LD	A,(IY+1)
  E377  CD75DF        		CALL	CAP
  E37A  FE41          		CP	"A"
  E37C  C9            		RET
                      	
  E37D                	RBRDD:
  E37D  E5            		PUSH	HL
  E37E  C1            		POP	BC
  E37F  215BE3        		LD	HL,RBRFL
  E382  CD74E3        		CALL	DDX
  E385  2005          		JR	NZ,RBRDD2
  E387  2A06EC        		LD	HL,(STABLE+2*3)
  E38A  1804          		JR	RBRDD3
  E38C                	RBRDD2:
  E38C  FE43          		CP	"C"
  E38E  202C          		JR	NZ,RBRDERR
  E390                	RBRDD3:
  E390  22A0E3        		LD	(RBRDDP+1),HL
                      	
  E393  ED5B8AEC      		LD	DE,(_DTA)
  E397  210000        		LD	HL,0
  E39A                	RBRDD1:
  E39A  78            		LD	A,B
  E39B  B1            		OR	C
  E39C  2818          		JR	Z,RBRDDE1
  E39E  23            		INC	HL
  E39F  CD5BE3        	RBRDDP:	CALL	RBRFL
  E3A2  380D          		JR	C,RBRDDE
  E3A4  FE1A          		CP	01AH
  E3A6  2809          		JR	Z,RBRDDE
  E3A8  FE03          		CP	3
  E3AA  2805          		JR	Z,RBRDDE
  E3AC  12            		LD	(DE),A
  E3AD  13            		INC	DE
  E3AE  0B            		DEC	BC
  E3AF  18E9          		JR	RBRDD1
                      	
  E3B1                	RBRDDE:
  E3B1  3E1A          		LD	A,01AH
  E3B3  12            		LD	(DE),A
  E3B4                	RBRDDE2:
  E3B4  AF            		XOR	A
  E3B5  3C            		INC	A
  E3B6                	RBRDDE1:
  E3B6  324AE4        		LD	(RBRAP+1),A
  E3B9  C343E4        		JP	RBREND0
  E3BC                	RBRDERR:
  E3BC  210000        		LD	HL,0
  E3BF  18F3          		JR	RBRDDE2
                      	
                      					;Read random block
  E3C1                	_SYS27:
  E3C1  220CE5        		LD	(LEFTX),HL
  E3C4  CD76DD        		CALL	SETDRV
                      	
  E3C7  FDCB0D66      		BIT	4,(IY+13)
  E3CB  C24CE4        		JP	NZ,RBRDIR
  E3CE  CD5EE4        		CALL	RBX0
  E3D1  DA57E3        		JP	C,RBRERR
  E3D4  28A7          		JR	Z,RBRDD
  E3D6  CD6DE4        		CALL	RBX1
  E3D9  DA4BE3        		JP	C,RBRERR1
  E3DC  79            		LD	A,C
  E3DD  EB            		EX	DE,HL
  E3DE  ED52          		SBC	HL,DE		;CP 0HL,CDE
  E3E0  19            		ADD	HL,DE
  E3E1  DE00          		SBC	A,000H
  E3E3  3801          		JR	C,RBR1
  E3E5  EB            		EX	DE,HL
  E3E6                	RBR1:
  E3E6  9F            		SBC	A,A
  E3E7  E601          		AND	1
  E3E9  324AE4        		LD	(RBRAP+1),A
                      	
  E3EC  7C            		LD	A,H
  E3ED  B5            		OR	L
  E3EE  CA43E4        		JP	Z,RBREND0
                      	
  E3F1  22EAE4        		LD	(LEFT+1),HL	;Read record byte
  E3F4  220CE5        		LD	(LEFTX),HL
                      	
  E3F7  CD87E4        		CALL	RBX2
  E3FA  2819          		JR	Z,RBRB
  E3FC  CD99E4        		CALL	RBXA
  E3FF  DA57E3        		JP	C,RBRERR
  E402  C5            		PUSH	BC
  E403  EDB0          		LDIR
  E405  ED530EE5      		LD	(DTAX),DE
  E409  2A0CE5        		LD	HL,(LEFTX)
  E40C  D1            		POP	DE
  E40D  A7            		AND	A
  E40E  ED52          		SBC	HL,DE
  E410  220CE5        		LD	(LEFTX),HL
  E413  282B          		JR	Z,RBREND
                      	
  E415                	RBRB:
  E415  CDCEE4        		CALL	RBXB
  E418  2812          		JR	Z,RBRC
  E41A                	RBRB1:
  E41A  C5            		PUSH	BC
  E41B  D5            		PUSH	DE
  E41C  CD62DF        		CALL	CLUST
  E41F  CD2EE7        		CALL	DRDC
  E422  D1            		POP	DE
  E423  C1            		POP	BC
  E424  D4F7EC        		CALL	NC,_GNCL
  E427  DA57E3        		JP	C,RBRERR
  E42A  10EE          		DJNZ	RBRB1
  E42C                	RBRC:
  E42C  CDDEE4        		CALL	RBXC
  E42F  280F          		JR	Z,RBREND
                      	
  E431  CD62DF        		CALL	CLUST
  E434  CD17E5        		CALL	DRDX
  E437  DA57E3        		JP	C,RBRERR
  E43A  EB            		EX	DE,HL
  E43B  2A7EEC        		LD	HL,(_DTBUF)
  E43E  EDB0          		LDIR
  E440                	RBREND:
  E440  CDE9E4        		CALL	RBXEND
  E443                	RBREND0:
  E443  FDE1          		POP	IY
  E445  C1            		POP	BC
  E446  D1            		POP	DE
  E447  F1            		POP	AF	;(HL)
  E448  AF            		XOR	A
  E449  3E00          	RBRAP:	LD	A,000H
  E44B  C9            		RET
                      	
  E44C                	RBRDIR:
  E44C  FD6E1A        		LD	L,(IY+26)
  E44F  FD661B        		LD	H,(IY+27)
  E452  CD90DF        		CALL	CHDIR
  E455  AF            		XOR	A
  E456  67            		LD	H,A
  E457  6F            		LD	L,A
  E458  3C            		INC	A
  E459  324AE4        		LD	(RBRAP+1),A
  E45C  18E5          		JR	RBREND0
                      	
  E45E                	RBX0:
  E45E  2A8AEC        		LD	HL,(_DTA)
  E461  220EE5        		LD	(DTAX),HL
  E464  2A0CE5        		LD	HL,(LEFTX)
  E467  FD7E1C        		LD	A,(IY+28)	;Open
  E46A  D6FD          		SUB	0FDH
  E46C  C9            		RET
                      	
  E46D                	RBX1:
  E46D  E5            		PUSH	HL		;Record byte
                      	
  E46E  FD6E10        		LD	L,(IY+16)	;AHL=File size
  E471  FD6611        		LD	H,(IY+17)
  E474  FD7E12        		LD	A,(IY+18)
                      	
  E477  CD02E5        		CALL	CDERR		;CDE=Random record
                      	
  E47A  A7            		AND	A
  E47B  ED52          		SBC	HL,DE
  E47D  99            		SBC	A,C
  E47E  D1            		POP	DE
                      	
  E47F  D8            		RET	C
  E480  4F            		LD	C,A
  E481  EB            		EX	DE,HL	;CDE=File byte	HL=Record byte
  E482  B2            		OR	D
  E483  B3            		OR	E
  E484  C0            		RET	NZ
  E485  37            		SCF
  E486  C9            		RET
                      	
  E487                	RBX2:
  E487  FD4E22        		LD	C,(IY+34)	;Cluster settings
  E48A  FD4623        		LD	B,(IY+35)
  E48D  CD49E1        		CALL	RWXR
  E490  3E03          	IBM5:	LD	A,3		;ooo 1
  E492  FDA622        		AND	(IY+34)
  E495  FDB621        		OR	(IY+33)
  E498  C9            		RET
                      	
  E499                	RBXA:
  E499  D5            		PUSH	DE
  E49A  CD62DF        		CALL	CLUST
  E49D  CD17E5        		CALL	DRDX
  E4A0  D1            		POP	DE
  E4A1  D8            		RET	C
  E4A2  CDF7EC        		CALL	_GNCL
  E4A5  D8            		RET	C
  E4A6  ED5364E2      		LD	(_CLPS),DE
                      	
  E4AA  FD4E21        		LD	C,(IY+33)
  E4AD  3A91E4        		LD	A,(IBM5+1)		;ooo 1
  E4B0  FDA622        		AND	(IY+34)
  E4B3  47            		LD	B,A
  E4B4  210004        	IBM7:	LD	HL,1024		;ooo 512
  E4B7  ED42          		SBC	HL,BC		;remaining cluster
                      	
  E4B9  ED5B0CE5      		LD	DE,(LEFTX)
  E4BD  ED52          		SBC	HL,DE		;CP HL,DE
  E4BF  19            		ADD	HL,DE
  E4C0  3801          		JR	C,RBXA1
  E4C2  EB            		EX	DE,HL
  E4C3                	RBXA1:
  E4C3  E5            		PUSH	HL
  E4C4  2A7EEC        		LD	HL,(_DTBUF)
  E4C7  09            		ADD	HL,BC
  E4C8  ED5B0EE5      		LD	DE,(DTAX)
  E4CC  C1            		POP	BC
  E4CD  C9            		RET
                      	
  E4CE                	RBXB:
  E4CE  2A0EE5        		LD	HL,(DTAX)
  E4D1  ED5B64E2      		LD	DE,(_CLPS)
  E4D5  3A0DE5        		LD	A,(LEFTX+1)
  E4D8  CB3F          		SRL	A
  E4DA  CB3F          	IBM8:	SRL	A		;ooo
  E4DC  47            		LD	B,A
  E4DD  C9            		RET
                      	
  E4DE                	RBXC:
  E4DE  ED4B0CE5      		LD	BC,(LEFTX)
  E4E2  3A91E4        		LD	A,(IBM5+1)
  E4E5  A0            		AND	B
  E4E6  47            		LD	B,A
  E4E7  B1            		OR	C
  E4E8  C9            		RET
                      	
  E4E9                	RBXEND:
  E4E9  110000        	LEFT:	LD	DE,0
  E4EC  AF            		XOR	A
  E4ED  FD6E21        		LD	L,(IY+33)
  E4F0  FD6622        		LD	H,(IY+34)
  E4F3  19            		ADD	HL,DE
  E4F4  FD8E23        		ADC	A,(IY+35)
  E4F7  FD7521        		LD	(IY+33),L
  E4FA  FD7422        		LD	(IY+34),H
  E4FD  FD7723        		LD	(IY+35),A
  E500  EB            		EX	DE,HL		;HL=Read byte
  E501  C9            		RET
                      	
  E502                	CDERR:
  E502  FD5E21        		LD	E,(IY+33)	;CDE=Random record
  E505  FD5622        		LD	D,(IY+34)
  E508  FD4E23        		LD	C,(IY+35)
  E50B  C9            		RET
                      	
  E50C                	CPBUF:
  E50C  0000          	LEFTX:	DW	0
  E50E  0000          	DTAX:	DW	0
  E510  20            		DB	020H	;DS 7,20h
  E511  20            		DB	020H
  E512  20            		DB	020H
  E513  20            		DB	020H
  E514  20            		DB	020H
  E515  20            		DB	020H
  E516  20            		DB	020H
                      	;
                      		
                      	;	LSX-Dodgers DIO
                      	
  E517                	DRDX:
  E517  CD4DE5        		CALL	DRDY
  E51A  C8            		RET	Z
  E51B  CD37E5        		CALL	DRDX1
  E51E  D8            		RET	C
  E51F  E5            		PUSH	HL
  E520  C5            		PUSH	BC
  E521  D5            		PUSH	DE
  E522  2A7EEC        		LD	HL,(_DTBUF)
  E525  CD2EE7        		CALL	DRDC
  E528  DC48E5        		CALL	C,DRDNE
  E52B                	DRDXE1:
  E52B  D1            		POP	DE
  E52C  C1            		POP	BC
  E52D                	DRDXE2:
  E52D  E1            		POP	HL
  E52E  C9            		RET
                      	
  E52F                	DRDN:
  E52F  AF            		XOR	A
  E530  00            	DRDN1:	NOP
  E531  30E4          		JR	NC,DRDX
  E533                	DRDNX:
  E533  CD4DE5        		CALL	DRDY
  E536  C8            		RET	Z
  E537                	DRDX1:
  E537  CD5EE5        		CALL	DWTX
  E53A  ED53A6EC      		LD	(_DCLPS),DE
  E53E  3A88EC        		LD	A,(_DRV)
  E541  32A5EC        		LD	(_DBDRV),A
  E544  CDD9EC        		CALL	_CHGDRV
  E547  D0            		RET	NC
  E548                	DRDNE:
  E548  9F            		SBC	A,A
  E549  32A5EC        		LD	(_DBDRV),A
  E54C  C9            		RET
                      	
  E54D                	DRDY:
  E54D  E5            		PUSH	HL
  E54E  3A88EC        		LD	A,(_DRV)
  E551  21A5EC        		LD	HL,_DBDRV
  E554  AE            		XOR	(HL)
  E555  2005          		JR	NZ,DRDY1
                      	
  E557  2AA6EC        		LD	HL,(_DCLPS)
  E55A  ED52          		SBC	HL,DE		;CF=0
  E55C                	DRDY1:
  E55C  E1            		POP	HL
  E55D  C9            		RET
                      	
  E55E                	DWTX:
  E55E  3AA4EC        		LD	A,(_WTDBF)
  E561  B7            		OR	A
  E562  C8            		RET	Z
  E563  AF            		XOR	A
  E564  32A4EC        		LD	(_WTDBF),A
                      	
  E567  E5            		PUSH	HL
  E568  C5            		PUSH	BC
  E569  D5            		PUSH	DE
  E56A  3AA5EC        		LD	A,(_DBDRV)
  E56D  CDD9EC        		CALL	_CHGDRV
  E570  ED5BA6EC      		LD	DE,(_DCLPS)
  E574  2A7EEC        		LD	HL,(_DTBUF)
  E577  D43AE7        		CALL	NC,DWTC
  E57A  18AF          		JR	DRDXE1
                      	
  E57C                	RDFATX:
  E57C  E5            		PUSH	HL
  E57D  3A88EC        		LD	A,(_DRV)
  E580  21A3EC        		LD	HL,_FATDRV
  E583  AE            		XOR	(HL)
  E584  E67F          		AND	07FH
  E586  28D4          		JR	Z,DRDY1
                      	
  E588  C5            		PUSH	BC
  E589  D5            		PUSH	DE
  E58A  DDE5          		PUSH	IX
  E58C  CDA4E5        		CALL	WTFATX
  E58F  380F          		JR	C,RDFATE1
                      	
  E591  3A88EC        		LD	A,(_DRV)
  E594  32A3EC        		LD	(_FATDRV),A
  E597  CDE5EC        		CALL	_RDFAT
  E59A                	RDFATE2:
  E59A  3004          		JR	NC,RDFATE1
  E59C  9F            		SBC	A,A
  E59D  32A3EC        		LD	(_FATDRV),A
  E5A0                	RDFATE1:
  E5A0  DDE1          		POP	IX
  E5A2  1887          		JR	DRDXE1
                      	
  E5A4                	WTFATX:
  E5A4  3AA2EC        		LD	A,(_WTFATF)
  E5A7  B7            		OR	A
  E5A8  C8            		RET	Z
  E5A9  E5            		PUSH	HL
  E5AA  3AA3EC        		LD	A,(_FATDRV)
  E5AD  21A5EC        		LD	HL,_DBDRV
  E5B0  AE            		XOR	(HL)
  E5B1  E67F          		AND	07FH
  E5B3  CC5EE5        		CALL	Z,DWTX
  E5B6  38A4          		JR	C,DRDY1
  E5B8  C5            		PUSH	BC
  E5B9  D5            		PUSH	DE
  E5BA  DDE5          		PUSH	IX
  E5BC  CD8AE7        		CALL	WTFAT
  E5BF  AF            		XOR	A
  E5C0  32A2EC        		LD	(_WTFATF),A
  E5C3  18DB          		JR	RDFATE1
                      	
  E5C5                	NCL1:
  E5C5  7A            		LD	A,D
  E5C6  B3            		OR	E
  E5C7  37            		SCF
  E5C8  C8            		RET	Z
                      	
  E5C9  3A88EC        		LD	A,(_DRV)
  E5CC  CB5A          		BIT	3,D
  E5CE  2802          		JR	Z,NCL2
  E5D0  F680          		OR	080H
  E5D2                	NCL2:
  E5D2  E5            		PUSH	HL
  E5D3  21A3EC        		LD	HL,_FATDRV
  E5D6  BE            		CP	(HL)
  E5D7  2883          		JR	Z,DRDY1
                      	
  E5D9  C5            		PUSH	BC
  E5DA  D5            		PUSH	DE
  E5DB  DDE5          		PUSH	IX
  E5DD  F5            		PUSH	AF
  E5DE  CDA4E5        		CALL	WTFATX
  E5E1  C1            		POP	BC
  E5E2  38BC          		JR	C,RDFATE1
  E5E4  78            		LD	A,B
  E5E5  32A3EC        		LD	(_FATDRV),A
  E5E8  CD79E7        		CALL	RDFATS
  E5EB  18AD          		JR	RDFATE2
                      	
  E5ED                	NCL3:
  E5ED  CB9A          		RES	3,D
  E5EF  6B            		LD	L,E
  E5F0  62            		LD	H,D
  E5F1  CB3C          		SRL	H
  E5F3  CB1D          		RR	L
  E5F5  1F            		RRA
  E5F6  ED4B7CEC      		LD	BC,(_FATBF)
  E5FA  19            		ADD	HL,DE
  E5FB  09            		ADD	HL,BC
  E5FC  17            		RLA
  E5FD  C9            		RET
                      	
  E5FE                	GNCL:
  E5FE  CDC5E5        		CALL	NCL1		;GET NEW CLUSTER
  E601  D8            		RET	C
  E602  C5            		PUSH	BC
  E603  E5            		PUSH	HL
  E604  CDEDE5        		CALL	NCL3
  E607  3809          		JR	C,GNC1
  E609  5E            		LD	E,(HL)
  E60A  23            		INC	HL
  E60B  7E            		LD	A,(HL)
  E60C  E60F          		AND	00FH
  E60E  57            		LD	D,A
  E60F  E1            		POP	HL
  E610  C1            		POP	BC
  E611  C9            		RET
  E612                	GNC1:
  E612  7E            		LD	A,(HL)
  E613  23            		INC	HL
  E614  56            		LD	D,(HL)
  E615  0604          		LD	B,4
  E617                	GNC1L:
  E617  CB3A          		SRL	D
  E619  1F            		RRA
  E61A  10FB          		DJNZ	GNC1L
                      	
  E61C  5F            		LD	E,A
  E61D  E1            		POP	HL
  E61E  C1            		POP	BC
  E61F  A7            		AND	A
  E620  C9            		RET
                      	
  E621                	SNCL:
  E621  CDC5E5        		CALL	NCL1
  E624  D8            		RET	C
  E625  3E01          		LD	A,1
  E627  32A2EC        		LD	(_WTFATF),A
                      	;				SET NEW CLUSTER
  E62A  C5            		PUSH	BC
  E62B  D5            		PUSH	DE
  E62C  E5            		PUSH	HL
  E62D  E5            		PUSH	HL
  E62E  CDEDE5        		CALL	NCL3
  E631  D1            		POP	DE
                      	;CF=ODD
  E632  7E            		LD	A,(HL)
  E633  73            		LD	(HL),E
  E634  3806          		JR	C,SNC1
                      	;EVEN
                      	;M[0] = E
                      	;M[1] = (M[1] & 0xF0) | (D & 0x0F)
  E636  23            		INC	HL
  E637  ED67          		RRD		;M={A[3:0],E[3:0]}
  E639  7A            		LD	A,D
  E63A  1804          		JR	SNC11
  E63C                	SNC1:
                      	;ODD
                      	;HL[0] = (HL[0]&0x0F) | (E<<4)
                      	;HL[1] = DE>>4
  E63C  ED6F          		RLD		;M={D[3:0],E[7:4]}
  E63E  23            		INC	HL
  E63F  72            		LD	(HL),D	;M={D[3:0],E[7:4]}
  E640                	SNC11:
  E640  ED6F          		RLD		;M={M[7:4],D[3:0]}
  E642  E1            		POP	HL
  E643  D1            		POP	DE
  E644  C1            		POP	BC
  E645  B7            		OR	A
  E646  C9            		RET
                      	
  E647                	RDFAT0X:
  E647  CD79E7        		CALL	RDFATS
  E64A  D8            		RET	C
  E64B  DDBE01        		CP	(IX+1)
  E64E  C8            		RET	Z
  E64F  37            		SCF
  E650  C9            		RET
                      	
  E651                	RDFAT:
  E651  3A88EC        		LD	A,(_DRV)
  E654  CDA1E8        		CALL	CHGDRVR
  E657  D8            		RET	C
  E658  DD7E12        		LD	A,(IX+012H)
  E65B  FE87          		CP	087H
  E65D  20E8          		JR	NZ,RDFAT0X
                      	
  E65F  3E7F          		LD	A,07FH
  E661  3247E9        		LD	(CHECK),A	;A=07FH
  E664  DDCB0A46      		BIT	0,(IX+00AH)
  E668  284D          		JR	Z,X2HX
  E66A                	E2DX:
  E66A  21D7E8        		LD	HL,M2D
  E66D  CD46E7        		CALL	DRDF
  E670  383D          		JR	C,E2HX
  E672  FEFD          		CP	0FDH		;2D
  E674  C8            		RET	Z
  E675  FEF9          		CP	0F9H		;2DD9
  E677  CA21E7        		JP	Z,E2DD9
  E67A  FEFB          		CP	0FBH		;2DD8
  E67C  37            		SCF
  E67D  C0            		RET	NZ		;NOT 2DD
  E67E  21E5E8        		LD	HL,M2DD8
  E681                	CHGTYPE:
  E681  D5            		PUSH	DE
  E682  CD94E6        		CALL	CHGDV
  E685  3A84EC        		LD	A,(_DRIVE)
  E688  E603          		AND	3
  E68A  F680          		OR	080H
  E68C  6F            		LD	L,A
  E68D  26EC          		LD	H,_CYL0/256
  E68F  3EFF          		LD	A,0FFH
  E691  77            		LD	(HL),A
  E692  D1            		POP	DE
  E693  C9            		RET
                      	
  E694                	CHGDV:
  E694  DDE5          		PUSH	IX
  E696  D1            		POP	DE
  E697  EDA0          		LDI
  E699  EDA0          		LDI
  E69B  13            		INC	DE
  E69C  13            		INC	DE
  E69D  13            		INC	DE
  E69E  13            		INC	DE
  E69F  010C00        		LD	BC,12
  E6A2  EDB0          		LDIR
  E6A4                	CHGDV2:
  E6A4  3EFF          		LD	A,0FFH
  E6A6  3289EC        		LD	(_DSK),A
  E6A9  3A88EC        		LD	A,(_DRV)
  E6AC  C3D9EC        		JP	_CHGDRV
                      	
  E6AF                	E2HX:
  E6AF  3C            		INC	A
  E6B0  C8            		RET	Z
  E6B1  2147E9        		LD	HL,CHECK
  E6B4  CB06          		RLC	(HL)
  E6B6  D8            		RET	C
  E6B7                	X2HX:
  E6B7  210FE9        		LD	HL,M2HD
  E6BA  110000        		LD	DE,0
  E6BD  CD4AE7        		CALL	DRDD
  E6C0  300A          		JR	NC,X2HX1
  E6C2  3C            		INC	A
  E6C3  C8            		RET	Z
  E6C4  2147E9        		LD	HL,CHECK
  E6C7  CB06          		RLC	(HL)
  E6C9  D8            		RET	C
  E6CA  189E          		JR	E2DX
  E6CC                	X2HX1:
  E6CC  23            		INC	HL
  E6CD  7E            		LD	A,(HL)
  E6CE  06FE          		LD	B,0FEH
  E6D0  FE0C          		CP	00CH
  E6D2  2838          		JR	Z,X2HDE
  E6D4  06F8          		LD	B,0F8H
  E6D6  D620          		SUB	020H		;020H
  E6D8  2832          		JR	Z,X2HDE
  E6DA  3C            		INC	A		;01FH
  E6DB  282F          		JR	Z,X2HDE
  E6DD  3C            		INC	A		;01EH
  E6DE  2078          		JR	NZ,C2HX		;2HD/2HC/2HQ
  E6E0                	X2HS:
  E6E0  2139E9        		LD	HL,M2HS
  E6E3  CD12E7        		CALL	X2HSS
  E6E6  D8            		RET	C
  E6E7  2A7CEC        		LD	HL,(_FATBF)
  E6EA  23            		INC	HL
  E6EB  7E            		LD	A,(HL)		;FATBF+1
  E6EC  FE50          		CP	80
  E6EE  3F            		CCF
  E6EF  D0            		RET	NC
  E6F0  FE5A          		CP	90
  E6F2  D0            		RET	NC
  E6F3  DD770C        		LD	(IX+00CH),A
  E6F6  D650          		SUB	80
  E6F8  87            		ADD	A,A	;*2
  E6F9  4F            		LD	C,A
  E6FA  87            		ADD	A,A	;*4
  E6FB  87            		ADD	A,A	;*8
  E6FC  87            		ADD	A,A	;*16
  E6FD  81            		ADD	A,C	;*18
  E6FE  C698          		ADD	A,098H
  E700  DD7708        		LD	(IX+8),A
  E703  3E05          		LD	A,5
  E705  CE00          		ADC	A,0
  E707  DD7709        		LD	(IX+9),A
  E70A  1898          		JR	CHGDV2
  E70C                	X2HDE:
  E70C  212BE9        		LD	HL,M2HDE
  E70F  23            		INC	HL
  E710  70            		LD	(HL),B
  E711  2B            		DEC	HL
  E712                	X2HSS:
  E712  CD46E7        		CALL	DRDF
  E715  D8            		RET	C
  E716  DDBE01        		CP	(IX+1)
  E719  37            		SCF
  E71A  C0            		RET	NZ
  E71B  CD2AE7        		CALL	INCDRD
  E71E  300E          		JR	NC,DRDC
  E720  C9            		RET
                      	
  E721                	E2DD9:
  E721  21F3E8        		LD	HL,M2DD
  E724  CD81E6        		CALL	CHGTYPE
  E727  2A7CEC        		LD	HL,(_FATBF)
  E72A                	INCDRD:
  E72A  24            		INC	H
  E72B  24            		INC	H
  E72C  24            		INC	H
  E72D  24            		INC	H
  E72E                	DRDC:
  E72E  CDF1EC        		CALL	_DRD
  E731  D8            		RET	C
  E732  3A65DF        		LD	A,(DBLPAT)
  E735  B7            		OR	A
  E736  C2F1EC        		JP	NZ,_DRD
  E739  C9            		RET
                      	
  E73A                	DWTC:
  E73A  CDF4EC        		CALL	_DWT
  E73D  D8            		RET	C
  E73E  3A65DF        		LD	A,(DBLPAT)
  E741  B7            		OR	A
  E742  C2F4EC        		JP	NZ,_DWT
  E745  C9            		RET
                      	
  E746                	DRDF:
  E746  ED5B60E2      		LD	DE,(_FATPS)
  E74A                	DRDD:
  E74A  CD81E6        		CALL	CHGTYPE
  E74D  2A7CEC        		LD	HL,(_FATBF)
  E750  E5            		PUSH	HL
  E751  CD2EE7        		CALL	DRDC
  E754  E1            		POP	HL
  E755  D8            		RET	C
  E756  7E            		LD	A,(HL)
  E757  C9            		RET
                      	
  E758                	C2HX:
  E758  CD79E7        		CALL	RDFATS
  E75B  D8            		RET	C
  E75C  FEFE          		CP	0FEH
  E75E  C8            		RET	Z
  E75F  FEF0          		CP	0F0H
  E761  2810          		JR	Z,X2HQ
  E763  FEF9          		CP	0F9H
  E765  37            		SCF
  E766  C0            		RET	NZ
  E767  E5            		PUSH	HL
  E768  2101E9        		LD	HL,M2HC
  E76B                	X2HQ1:
  E76B  CD81E6        		CALL	CHGTYPE
  E76E  E1            		POP	HL
  E76F  0604          		LD	B,4
  E771  180A          		JR	RDFATL
  E773                	X2HQ:
  E773  E5            		PUSH	HL
  E774  211DE9        		LD	HL,M2HQ
  E777  18F2          		JR	X2HQ1
                      	
  E779                	RDFATS:
  E779  CDACE7        		CALL	FATS
  E77C  D8            		RET	C
  E77D                	RDFATL:
  E77D  C5            		PUSH	BC
  E77E  CDF1EC        		CALL	_DRD
  E781  C1            		POP	BC
  E782  D8            		RET	C
  E783  10F8          		DJNZ	RDFATL
  E785  2A7CEC        		LD	HL,(_FATBF)
  E788  7E            		LD	A,(HL)
  E789  C9            		RET
                      	
  E78A                	WTFAT:
  E78A  CDACE7        		CALL	FATS
  E78D  D4A3E7        		CALL	NC,WTFATL
  E790  D8            		RET	C
  E791  DDCB0F4E      		BIT	1,(IX+00FH)
  E795  C8            		RET	Z
  E796  CDB3E7        		CALL	FATS2
  E799  C5            		PUSH	BC
  E79A  DD4E00        		LD	C,(IX+0)
  E79D  0600          		LD	B,0
  E79F  EB            		EX	DE,HL
  E7A0  09            		ADD	HL,BC
  E7A1  EB            		EX	DE,HL
  E7A2  C1            		POP	BC
  E7A3                	WTFATL:
  E7A3  C5            		PUSH	BC
  E7A4  CDF4EC        		CALL	_DWT
  E7A7  C1            		POP	BC
  E7A8  D8            		RET	C
  E7A9  10F8          		DJNZ	WTFATL
  E7AB  C9            		RET
                      	;------------------------
                      	;FATÌZbgAbv
                      	;out
                      	;	B  : FATZN^
                      	;	DE : FATæªZN^Ô
                      	;	HL : FATobt@|C^
                      	;	CF : 1=hCuØèÖ¦G[
                      	;note
                      	;	FATTCYªFATobt@ð´¦éêÍ
                      	;	ÎÛNX^Ìæ==(_FATDRV).bit7ÉæÁÄ
                      	;	FATÌO¼3KBÆã¼3KBðØèÖ¦é
                      	;------------------------
  E7AC                	FATS:
  E7AC  3AA3EC        		LD	A,(_FATDRV)
  E7AF  CDA1E8        		CALL	CHGDRVR		;hCuØèÖ¦
  E7B2  D8            		RET	C
  E7B3                	FATS2:
  E7B3  ED5B60E2      		LD	DE,(_FATPS)	;fat sector pos
  E7B7  2A7CEC        		LD	HL,(_FATBF)
  E7BA  DD4600        		LD	B,(IX+0)	;DPB.FATLN
  E7BD  DD7E07        		LD	A,(IX+7)	;$29=512 / 0=1024
  E7C0  B7            		OR	A
  E7C1  3E06          		LD	A,6		;3072 / 512 FATobt@ÉÇÝßéNX^
  E7C3  2001          		JR	NZ,FATS512
  E7C5  1F            		RRA			;A=3 (30721024: 1NX^1024oCgÌê)
  E7C6                	FATS512:
  E7C6  B8            		CP	B
  E7C7  D0            		RET	NC		;DPB.FATS x sectorSize < fatBufSize
                      	;targetCluster
  E7C8  4F            		LD	C,A		;C = skipCount
  E7C9  3AA3EC        		LD	A,(_FATDRV)	;bit7 = (targetCluster >= 0x800)
  E7CC  87            		ADD	A,A		;CF=(_FATDRV).bit7
  E7CD  3006          		JR	NC,FATS3
                      	;(targerCluster>=0x800)
  E7CF                	FAT_SKP:
  E7CF  13            		INC	DE		;FATPS++
  E7D0  05            		DEC	B		;FATSIZE--
  E7D1  0D            		DEC	C		;skipCnt--
  E7D2  20FB          		JR	NZ,FAT_SKP
  E7D4  C9            		RET
  E7D5                	FATS3:
  E7D5  41            		LD	B,C		;3 or 6
  E7D6  AF            		XOR	A
  E7D7  C9            		RET
                      	
  E7D8                	CHGDRV:
  E7D8  E67F          		AND	07FH
  E7DA  E5            		PUSH	HL
  E7DB  2189EC        		LD	HL,_DSK
  E7DE  BE            		CP	(HL)
  E7DF  280A          		JR	Z,CHGDRVE
  E7E1                	CHGDRV1:
  E7E1  DDE5          		PUSH	IX
  E7E3  CDEDE7        		CALL	CHGDRV0
  E7E6  3A89EC        		LD	A,(_DSK)
  E7E9  DDE1          		POP	IX
  E7EB                	CHGDRVE:
  E7EB  E1            		POP	HL
  E7EC  C9            		RET
                      	
  E7ED                	CHGDRV0:
  E7ED  6F            		LD	L,A
  E7EE  CDDCEC        		CALL	_GETDPB
  E7F1  D8            		RET	C
                      	
  E7F2  7D            		LD	A,L
  E7F3  3289EC        		LD	(_DSK),A
                      	
  E7F6  F3            		DI
  E7F7  ED735EE8      		LD	(SPPAT2+1),SP
                      	
  E7FB  DDF9          		LD	SP,IX
                      	
  E7FD  E1            		POP	HL
  E7FE  E1            		POP	HL
  E7FF  22F2EC        		LD	(_DRD+1),HL
                      	
  E802  E1            		POP	HL
  E803  22F5EC        		LD	(_DWT+1),HL
                      	
  E806  E1            		POP	HL
  E807  2264DF        		LD	(CLSPAT+1),HL	;ADDCL
                      	
  E80A  E1            		POP	HL		;MAXCL
  E80B  7D            		LD	A,L
  E80C  3273DF        		LD	(CLPAT2+1),A
  E80F  7C            		LD	A,H
  E810  326FDF        		LD	(CLPAT1+1),A
  E813  2B            		DEC	HL
  E814  226FE1        		LD	(MAXCLP+1),HL
                      	
  E817  E1            		POP	HL		;H=MAXDIR L=FDMODE
  E818  7D            		LD	A,L
  E819  F6FE          		OR	0FEH
  E81B  32C2E9        		LD	(FDMODE+1),A
  E81E  07            		RLCA
  E81F  E603          		AND	3
  E821  32A9E9        		LD	(FSPAT+1),A
  E824  7C            		LD	A,H
  E825  3271DE        		LD	(RTEPAT+1),A
                      	
  E828  E1            		POP	HL
  E829  7D            		LD	A,L
  E82A  32A1EC        		LD	(_MAXCYL),A
  E82D  7C            		LD	A,H
  E82E  3251E9        		LD	(MAXSEC+1),A
                      	
  E831  E1            		POP	HL
  E832  2600          		LD	H,0
  E834  2260E2        		LD	(_FATPS),HL
                      	
  E837  E1            		POP	HL
  E838  7C            		LD	A,H
  E839  325EE9        		LD	(SECPAT+1),A
  E83C  AF            		XOR	A		;CF=0 É ÀÒ
  E83D  67            		LD	H,A
  E83E  2262E2        		LD	(_DIRPS),HL
                      	
  E841  E1            		POP	HL
  E842  7C            		LD	A,H
  E843  3284EC        		LD	(_DRIVE),A
                      	
  E846  E1            		POP	HL
  E847  E1            		POP	HL
  E848  7C            		LD	A,H
  E849  B5            		OR	L
  E84A  2003          		JR	NZ,OGNCL
  E84C  21FEE5        		LD	HL,GNCL
  E84F                	OGNCL:
  E84F  22F8EC        		LD	(_GNCL+1),HL
                      	
  E852  E1            		POP	HL
  E853  7C            		LD	A,H
  E854  B5            		OR	L
  E855  2003          		JR	NZ,OSNCL
  E857  2121E6        		LD	HL,SNCL
  E85A                	OSNCL:
  E85A  22FBEC        		LD	(_SNCL+1),HL
                      	
  E85D  310000        	SPPAT2:	LD	SP,0
  E860  FB            		EI
  E861  D5            		PUSH	DE
  E862  DDCB0F7E      		BIT	7,(IX+00FH)
  E866  280A          		JR	Z,NEC
                      	
  E868  111802        		LD	DE,00218H
  E86B  210000        		LD	HL,0
                      	
  E86E  3E03          		LD	A,3
  E870  1808          		JR	NEC1
  E872                	NEC:
  E872  11CB38        		LD	DE,038CBH	;SRL B
  E875  21CB3F        		LD	HL,03FCBH	;SRL A
                      	
  E878  3E03          		LD	A,3
  E87A                	NEC1:
  E87A  3291E4        		LD	(IBM5+1),A	;3 1
  E87D  3C            		INC	A		;4 2
  E87E  32B6E4        		LD	(IBM7+2),A
  E881  87            		ADD	A,A		;8 4
  E882  87            		ADD	A,A		;010H 8
  E883  87            		ADD	A,A		;020H 010H
  E884  32FEDD        		LD	(IBM1+1),A
  E887  87            		ADD	A,A		;040H 020H
  E888  87            		ADD	A,A		;080H 040H
  E889  87            		ADD	A,A		;000H 080H
  E88A  2F            		CPL			;0FFH 07FH
  E88B  324AD3        		LD	(IBM2+1),A
  E88E  ED534DE1      		LD	(IBM4),DE
  E892  22DAE4        		LD	(IBM8),HL
  E895  D1            		POP	DE
  E896  AF            		XOR	A
  E897  C9            		RET
                      	
  E898                	GETDPBD:
  E898  DDE3          		EX	(SP),IX
  E89A  DDE5          		PUSH	IX
  E89C  3A88EC        		LD	A,(_DRV)
  E89F  1807          		JR	GETDPB1
                      	
  E8A1                	CHGDRVR:
  E8A1  CDD9EC        		CALL	_CHGDRV
  E8A4  D8            		RET	C
  E8A5  3A89EC        		LD	A,(_DSK)
  E8A8                	GETDPB1:
  E8A8  C3DCEC        		JP	_GETDPB
                      	
  E8AB                	GETDPB:
  E8AB  FE08          		CP	8
  E8AD  3F            		CCF
  E8AE  D8            		RET	C
  E8AF  87            		ADD	A,A	;*2
  E8B0  87            		ADD	A,A	;*4
  E8B1  87            		ADD	A,A	;*8
  E8B2  87            		ADD	A,A	;*16
  E8B3  87            		ADD	A,A	;*32
                      	;	LD	IXL,A		;OHM-Z80ÅL}N
  E8B4  DD            		DB	0DDH		;Z80¢è`½ß
  E8B5  6F            		LD	L,A		;
                      	;	LD	IXH,DEVICE/256	;OHM-Z80ÅL}N
  E8B6  DD            		DB	0DDH		;Z80¢è`½ß
  E8B7  26ED          		LD	H,DEVICE/256	;
  E8B9  DD7E00        		LD	A,(IX)
  E8BC  FE01          		CP	001H		;A=0 THEN CF=1
  E8BE  C9            		RET
                      	
  E8BF                	FFLUSH:
  E8BF  F5            		PUSH	AF
  E8C0  3EFF          		LD	A,0FFH
  E8C2  323CE2        		LD	(SFILE),A
  E8C5  CD5EE5        		CALL	DWTX
  E8C8  3EFF          		LD	A,0FFH
  E8CA  32A5EC        		LD	(_DBDRV),A
  E8CD  CDA4E5        		CALL	WTFATX
  E8D0  3EFF          		LD	A,0FFH
  E8D2  32A3EC        		LD	(_FATDRV),A
  E8D5  F1            		POP	AF
  E8D6  C9            		RET
                      	
  E8D7                	M2D:
  E8D7  02FD          		DB	2,0FDH
  E8D9  08296401      		DW	02908H,356
  E8DD  FF0C2809010205		DB	0FFH,12,40,9,1,2,5,1
                      	
  E8E5                	M2DD8:
  E8E5  02FB          		DB	2,0FBH
  E8E7  08297C02      		DW	02908H,636
  E8EB  FF0C5008010205		DB	0FFH,12,80,8,1,2,5,1
                      	
  E8F3                	M2DD:
  E8F3  03F9          		DB	3,0F9H
  E8F5  0A29CB02      		DW	0290AH,715
  E8F9  FF0E5009010207		DB	0FFH,14,80,9,1,2,7,1
                      	
  E901                	M2HC:
  E901  07F9          		DB	7,0F9H
  E903  1B004509      		DW	27,2373
  E907  FE1D500F01820F		DB	0FEH,29,80,15,1,082H,15,1
                      	
  E90F                	M2HD:
  E90F  02FE          		DB	2,0FEH
  E911  0900C704      		DW	9,1223
  E915  FE0B4D08010205		DB	0FEH,11,77,8,1,2,5,1
                      	
  E91D                	M2HQ:
  E91D  09F0          		DB	9,0F0H
  E91F  1F001D0B      		DW	31,2845
  E923  FE245012018213		DB	0FEH,36,80,18,1,082H,19,1
                      	
  E92B                	M2HDE:
  E92B  03FE          		DB	3,0FEH
  E92D  0B009505      		DW	11,1429
  E931  FE0D5009010207		DB	0FEH,13,80,9,1,2,7,1
                      	
  E939                	M2HS:
  E939  03FB          		DB	3,0FBH
  E93B  08009805      		DW	8,1432
  E93F  FE0A5009010104		DB	0FEH,10,80,9,1,1,4,10
                      	
  E947  00            	CHECK:	DB	0
                      	
                      		
                      	;	LSX-Dodgers DISK
                      	
                      	
  E948                	SEEK:
  E948  7A            		LD	A,D
  E949  B3            		OR	E
  E94A  3E01          		LD	A,001H
  E94C  2812          		JR	Z,DIV3
                      	
  E94E  0610          		LD	B,16
  E950  0E00          	MAXSEC:	LD	C,000H
  E952  AF            		XOR	A
  E953  EB            		EX	DE,HL
  E954                	DIV1:
  E954  29            		ADD	HL,HL
  E955  8F            		ADC	A,A
  E956  B9            		CP	C
  E957  3802          		JR	C,DIV2
  E959  91            		SUB	C
  E95A  2C            		INC	L
  E95B                	DIV2:
  E95B  10F7          		DJNZ	DIV1
                      	
  E95D  C601          	SECPAT:	ADD	A,001H		;(Self-rewriting)
  E95F  55            		LD	D,L	;Quotient(TRACK)
  E960                	DIV3:
  E960  5F            		LD	E,A	;Remainder
  E961  CB3A          		SRL	D	;CYLINDER
  E963  9F            		SBC	A,A
  E964  E610          		AND	010H	;SIDE
  E966  4F            		LD	C,A
                      	
  E967  3A84EC        		LD	A,(_DRIVE)
  E96A  FE04          		CP	4
  E96C  3F            		CCF
  E96D  D8            		RET	C
  E96E  B1            		OR	C
  E96F  32EEE9        		LD	(MOPAT+1),A	;Motor off data
  E972  01FC0F        		LD	BC,00FFCH
  E975  F680          		OR	080H		;Mortor on
  E977  ED79          		OUT	(C),A
                      	
  E979  CDC0E9        		CALL	SETMODE
  E97C  D8            		RET	C
                      	
  E97D  CD03EA        		CALL	DRIVE
  E980  FEFF          		CP	0FFH		;A=0FFH Unknown CYLINDER
  E982  CCE2E9        		CALL	Z,FDCRES	;Restore
  E985  0EF9          		LD	C,0F9H
  E987  ED79          		OUT	(C),A		;Currrent CYLINDER
  E989  92            		SUB	D
  E98A  C8            		RET	Z		;No seek
                      	
  E98B  3A86EC        		LD	A,(_ISEEK)
  E98E  4F            		LD	C,A
                      	
  E98F  3AA1EC        		LD	A,(_MAXCYL)	;Max CYLINDER
  E992  3D            		DEC	A
  E993  BA            		CP	D		;Over CYLINDER
  E994  D8            		RET	C
                      	
  E995  B9            		CP	C		;for Built-in 2DD
  E996  3803          		JR	C,SETM2
  E998  78            		LD	A,B		;B=00FH
  E999  DBFE          		IN	A,(0FEH)		;2HD mode for 2DD seek
  E99B                	SETM2:
  E99B  78            		LD	A,B
  E99C  DBFD          		IN	A,(0FDH)		;MFM mode
                      	
  E99E  0EFB          		LD	C,0FBH
  E9A0  ED51          		OUT	(C),D
  E9A2  72            		LD	(HL),D
  E9A3  0E18          		LD	C,018H		;Seek
  E9A5                	FDCCMD2:
  E9A5  3A85EC        		LD	A,(_SEEKSP)
  E9A8  E6FF          	FSPAT:	AND	0FFH
  E9AA  B1            		OR	C
                      	
  E9AB                	FDCCMD:
  E9AB  CDF9E9        		CALL	COMSET
                      	
  E9AE  3A70EA        	@FDCPAT:LD	A,(FDCPAT+1)
  E9B1  E620          		AND	020H		;Write data Write track
  E9B3  3C            		INC	A
                      	
  E9B4                	SST:
  E9B4  0E00          		LD	C,0
  E9B6                	SST1:
  E9B6  0D            		DEC	C		; 4
  E9B7  20FD          		JR	NZ,SST1		;12 * 256 / 4 = About 1ms
  E9B9  3D            		DEC	A
  E9BA  20FA          		JR	NZ,SST1
                      	
  E9BC  3C            		INC	A		;A=1
  E9BD  CDCBE9        		CALL	READY
  E9C0                	SETMODE:
  E9C0  78            		LD	A,B		;B=00FH
  E9C1  DBFF          	FDMODE:	IN	A,(0FFH)		;Floppy mode(2D/2HD) (Self-rewriting)
                      	
  E9C3  78            		LD	A,B
  E9C4  DBFD          		IN	A,(0FDH)		;MFM mode
                      	
  E9C6  CDFDE9        		CALL	DELAY0		;Head select time
  E9C9  3E81          		LD	A,081H
  E9CB                	READY:
  E9CB  32D5E9        		LD	(WAITA+1),A
  E9CE  E5            		PUSH	HL
  E9CF  0EF8          		LD	C,0F8H
  E9D1  61            		LD	H,C
  E9D2                	READY2:
  E9D2  ED78          		IN	A,(C)
  E9D4  E681          	WAITA:	AND	081H		;NOT READY,BUSY
  E9D6  2808          		JR	Z,READYE
  E9D8  E3            		EX	(SP),HL		;wait
  E9D9  E3            		EX	(SP),HL		; //
  E9DA  2B            		DEC	HL
  E9DB  7C            		LD	A,H
  E9DC  B5            		OR	L
  E9DD  20F3          		JR	NZ,READY2
  E9DF  37            		SCF
  E9E0                	READYE:
  E9E0  E1            		POP	HL
  E9E1  C9            		RET
                      	
  E9E2                	FDCRES:
  E9E2  3600          		LD	(HL),0
  E9E4  0E08          		LD	C,8
  E9E6  18BD          		JR	FDCCMD2
                      	
  E9E8                	FDMOFF:
  E9E8  F5            		PUSH	AF
  E9E9  C5            		PUSH	BC
  E9EA  01FC0F        		LD	BC,00FFCH	;Motor off
  E9ED  3E00          	MOPAT:	LD	A,000H		;(Self-rewriting)
  E9EF  ED79          		OUT	(C),A
  E9F1  C1            		POP	BC
  E9F2  F1            		POP	AF
  E9F3  C9            		RET
                      	
  E9F4                	SECSET:
  E9F4  01FA0F        		LD	BC,00FFAH
  E9F7  ED59          		OUT	(C),E
  E9F9                	COMSET:
  E9F9  0EF8          		LD	C,0F8H
  E9FB  ED79          		OUT	(C),A
  E9FD                	DELAY0:
  E9FD  3E1A          		LD	A,26
  E9FF                	DELAY:
  E9FF  3D            		DEC	A
  EA00  20FD          		JR	NZ,DELAY
  EA02  C9            		RET
                      	
  EA03                	DRIVE:
  EA03  2A84EC        		LD	HL,(_DRIVE)
  EA06  26EC          		LD	H,_CYL0/256
  EA08  CBFD          		SET	7,L
  EA0A  7E            		LD	A,(HL)
  EA0B  C9            		RET
                      	
  EA0C                	RNF:
  EA0C  CD03EA        		CALL	DRIVE
  EA0F  36FF          		LD	(HL),0FFH
  EA11  C9            		RET
                      	
  EA12  0307          	DEMES:	DB	3,7
  EA14  A5446576696365		DB	"¥Device I/O Error!",5,3
  EA28  41626F72742052		DB	"Abort Retry Ignore?",5,3,0
                      	
  EA3E  02            	RETRY:	DB	2
                      	
                      	
                      	;	FLOPPY DISK DRIVER(DMA)
                      	
                      	
  EA3F                	WTTRK:
  EA3F  3EF4          		LD	A,0F4H
  EA41  01            		DB	1	;JR	WTTRK1
  EA42                	FDWT:
  EA42  3EA0          		LD	A,0A0H
  EA44                	WTTRK1:
  EA44  3270EA        		LD	(FDCPAT+1),A
  EA47  3E10          		LD	A,16
  EA49  F3            		DI
  EA4A  1808          		JR	DISK
                      	
  EA4C                	FDRD:
  EA4C  3E80          		LD	A,080H
  EA4E  00            		NOP
                      	
  EA4F  3270EA        		LD	(FDCPAT+1),A
  EA52  3E0E          		LD	A,14
                      	
  EA54                	DISK:
  EA54  3266EA        		LD	(DMAPAT+1),A
                      	
  EA57  22F0EA        		LD	(DMAD+11),HL
  EA5A                	DISKR:
  EA5A  3E02          		LD	A,2		;Retry count
  EA5C  323EEA        		LD	(RETRY),A
  EA5F                	DISK2:
  EA5F  D5            		PUSH	DE
  EA60  CD48E9        		CALL	SEEK
  EA63  3840          		JR	C,ERRF
                      	
  EA65  3E0E          	DMAPAT:	LD	A,14
  EA67  21E5EA        		LD	HL,DMAD
  EA6A  CDDBEA        		CALL	SETDMA
  EA6D  ED49          		OUT	(C),C		;OUT 01F87H,087H
  EA6F  3E80          	FDCPAT:	LD	A,080H		;FDC COMMAND(Self-rewriting)
  EA71  C5            		PUSH	BC
  EA72  CDF4E9        		CALL	SECSET
  EA75  2AF0EA        		LD	HL,(DMAD+11)
  EA78  23            		INC	HL
  EA79  1106BB        		LD	DE,0BB06H	;READ DMA
                      	
  EA7C  3E03          		LD	A,3
  EA7E  CDCBE9        		CALL	READY
  EA81  ED78          		IN	A,(C)
                      	
  EA83  C1            		POP	BC
  EA84  ED51          		OUT	(C),D
  EA86  ED59          		OUT	(C),E
  EA88  ED58          		IN	E,(C)
  EA8A  ED50          		IN	D,(C)
  EA8C  19            		ADD	HL,DE
  EA8D  D1            		POP	DE
  EA8E  13            		INC	DE
  EA8F  FB            		EI
  EA90  CDE8E9        		CALL	FDMOFF
  EA93  B7            		OR	A
  EA94  C8            		RET	Z
  EA95  1B            		DEC	DE
  EA96  CB67          		BIT	4,A
  EA98  C40CEA        		CALL	NZ,RNF
  EA9B                	DISKE2:
  EA9B  213EEA        		LD	HL,RETRY
  EA9E  35            		DEC	(HL)
  EA9F  20BE          		JR	NZ,DISK2
  EAA1  B7            		OR	A
  EAA2  2834          		JR	Z,ERR
  EAA4  D5            		PUSH	DE
  EAA5                	ERRF:
  EAA5  D1            		POP	DE
  EAA6                	DELP:
  EAA6  CD0CEA        		CALL	RNF
  EAA9  CDE8E9        		CALL	FDMOFF
  EAAC  3A85EC        		LD	A,(_SEEKSP)
  EAAF  87            		ADD	A,A
  EAB0  9F            		SBC	A,A
  EAB1  3825          		JR	C,ERR
  EAB3                	DELP1:
  EAB3  D5            		PUSH	DE
  EAB4  2112EA        		LD	HL,DEMES
  EAB7  CDF6D7        		CALL	MSX
  EABA  CD73D6        		CALL	KEYBC
  EABD                	DELP2:
  EABD  CD0EDC        		CALL	INKEY
  EAC0  28FB          		JR	Z,DELP2
                      	
  EAC2  D1            		POP	DE
  EAC3  CD75DF        		CALL	CAP
  EAC6  FE52          		CP	"R"
  EAC8  CA5AEA        		JP	Z,DISKR
  EACB  FE49          		CP	"I"
  EACD  2807          		JR	Z,IGNORE
  EACF  FE41          		CP	"A"
  EAD1  20E0          		JR	NZ,DELP1
  EAD3  C3F1D9        		JP	BOOT
  EAD6                	IGNORE:
  EAD6  3EFF          		LD	A,0FFH
  EAD8                	ERR:
  EAD8  BF            		CP	A
  EAD9  37            		SCF
  EADA  C9            		RET
                      	
  EADB                	SETDMA:
  EADB  01871F        		LD	BC,01F87H
  EADE                	SDMA:
  EADE  04            		INC	B
  EADF  EDA3          		OUTI
  EAE1  3D            		DEC	A
  EAE2  20FA          		JR	NZ,SDMA
  EAE4  C9            		RET
                      	
  EAE5  C37DFB0FFFFF2C	DMAD:	DB	0C3H,07DH,0FBH,00FH,0FFH,0FFH,02CH,010H		;X1turbo
  EAED  80928D0000CF01		DB	080H,092H,08DH,000H,000H,0CFH,001H,0CFH		;DISK DMA
                      	
                      	
                      	;	EMM DRIVER(DMA)
                      	
                      	
  EAF5                	EDWTC:
  EAF5  3E11          		LD	A,17
  EAF7  01            		DB	1
  EAF8                	EDRDC:
  EAF8  3E0F          		LD	A,15
  EAFA                	EDWTC1:
  EAFA  D5            		PUSH	DE
  EAFB  2237EB        		LD	(EDMAD+12),HL
  EAFE  EB            		EX	DE,HL
  EAFF  29            		ADD	HL,HL
  EB00  29            		ADD	HL,HL
  EB01  ED4BA0EC      		LD	BC,(_MAXCYL-1)
  EB05  0E00          		LD	C,0
  EB07  09            		ADD	HL,BC
  EB08  ED4B84EC      		LD	BC,(_DRIVE)
  EB0C  060D          		LD	B,00DH
  EB0E  ED49          		OUT	(C),C
  EB10  0C            		INC	C
  EB11  ED69          		OUT	(C),L
  EB13  0C            		INC	C
  EB14  ED61          		OUT	(C),H
                      	
  EB16  212BEB        		LD	HL,EDMAD
  EB19  CDDBEA        		CALL	SETDMA
  EB1C  3EB3          		LD	A,0B3H
  EB1E  ED79          		OUT	(C),A
  EB20  ED49          		OUT	(C),C		;OUT 01F87H,087H
  EB22  EB            		EX	DE,HL
  EB23  24            		INC	H
  EB24  24            		INC	H
  EB25  24            		INC	H
  EB26  24            		INC	H
  EB27  D1            		POP	DE
  EB28  13            		INC	DE
  EB29  AF            		XOR	A
  EB2A  C9            		RET
                      	
  EB2B  C37D030DFF032C	EDMAD:	DB	0C3H,07DH,003H,00DH,0FFH,003H,02CH,050H,002H
  EB34  809AAD0000CF01		DB	080H,09AH,0ADH,000H,000H,0CFH,001H,0CFH
                      	
                      	
                      	;	BANK RAM DISK DRIVER
                      	
                      	
  EB3C                	BDRDC:
  EB3C  ED735BEB      		LD	(BANKSP+1),SP
  EB40  3A5CEB        		LD	A,(BANKSP+2)
  EB43  87            		ADD	A,A
  EB44  3803          		JR	C,BDRDC1
  EB46  31D4FF        		LD	SP,EXTSP
  EB49                	BDRDC1:
  EB49  D5            		PUSH	DE
  EB4A  D9            		EXX
  EB4B  C5            		 PUSH	 BC
  EB4C  D5            		 PUSH	 DE
  EB4D  CD81EB        		 CALL	 BADR
  EB50  CD9EEB        		CALL	BTFR
  EB53  D9            		EXX
  EB54                	BDWTCE:
  EB54  D1            		 POP	 DE
  EB55  C1            		 POP	 BC
  EB56  D9            		 EXX
  EB57  D1            		POP	DE
  EB58  13            		INC	DE
  EB59  FB            		EI
  EB5A  310000        	BANKSP:	LD	SP,0
  EB5D  AF            		XOR	A
  EB5E  C9            		RET
                      	
  EB5F                	BDWTC:
  EB5F  ED735BEB      		LD	(BANKSP+1),SP
  EB63  3A5CEB        		LD	A,(BANKSP+2)
  EB66  87            		ADD	A,A
  EB67  3803          		JR	C,BDWTC1
  EB69  31D4FF        		LD	SP,EXTSP
  EB6C                	BDWTC1:
  EB6C  D5            		PUSH	DE
  EB6D  D9            		EXX
  EB6E  C5            		 PUSH	 BC
  EB6F  D5            		 PUSH	 DE
  EB70  CD81EB        		 CALL	 BADR
  EB73  D9            		EXX
  EB74  53            		 LD	D,E
  EB75  5F            		 LD	E,A
  EB76  D9            		 EXX
  EB77  EB            		EX	DE,HL
  EB78  CD9EEB        		CALL	BTFR
  EB7B  EB            		EX	DE,HL
  EB7C  D9            		EXX
  EB7D  ED51          		 OUT	 (C),D	 ;MAIN
  EB7F  18D3          		 JR	 BDWTCE
                      	
  EB81                	BADR:
  EB81  D9            		 EXX
  EB82  7B            		LD	A,E
  EB83  87            		ADD	A,A
  EB84  CB12          		RL	D
  EB86  87            		ADD	A,A
  EB87  CB12          		RL	D
  EB89  F5            		PUSH	AF
  EB8A  87            		ADD	A,A
  EB8B  7A            		LD	A,D
  EB8C  8F            		ADC	A,A
  EB8D  E60F          		AND	00FH
  EB8F  D9            		EXX
  EB90  01000B        		 LD	 BC,00B00H
  EB93  57            		 LD	 D,A	  ;BANK
  EB94  1E10          		 LD	 E,010H	  ;MAIN
  EB96  D9            		 EXX
  EB97  D1            		POP	DE
  EB98  0600          		LD	B,0
  EB9A  58            		LD	E,B
  EB9B  CBBA          		RES	7,D
  EB9D  C9            		RET
                      	
  EB9E                	BTFR:
  EB9E  D5            		PUSH	DE
  EB9F  F3            		DI
                      	
  EBA0                	BTFR1:
  EBA0  D9            		EXX
  EBA1  ED51          		 OUT	 (C),D	 ;BANK(MAIN)
  EBA3  D9            		 EXX
  EBA4  E3            		EX	(SP),HL
  EBA5  7E            		LD	A,(HL)
  EBA6  23            		INC	HL
  EBA7  4E            		LD	C,(HL)
  EBA8  23            		INC	HL
  EBA9  56            		LD	D,(HL)
  EBAA  23            		INC	HL
  EBAB  5E            		LD	E,(HL)
  EBAC  23            		INC	HL
  EBAD  E3            		EX	(SP),HL
  EBAE  D9            		EXX
  EBAF  ED59          		 OUT	 (C),E	 ;MAIN(BANK)
  EBB1  D9            		 EXX
  EBB2  77            		LD	(HL),A
  EBB3  23            		INC	HL
  EBB4  71            		LD	(HL),C
  EBB5  23            		INC	HL
  EBB6  72            		LD	(HL),D
  EBB7  23            		INC	HL
  EBB8  73            		LD	(HL),E
  EBB9  23            		INC	HL
  EBBA  10E4          		DJNZ	BTFR1
  EBBC  D1            		POP	DE
  EBBD  C9            		RET
                      	
                      	
                      	;	GRAPHIC RAM DISK DRIVER
                      	
                      	
  EBBE                	GDRDC:
  EBBE  CDE7EB        		CALL	GADR
  EBC1  D5            		PUSH	DE
  EBC2  110004        		LD	DE,0400H
  EBC5                	GDRDC1:
  EBC5  EDA2          		INI
  EBC7  04            		INC	B
  EBC8  03            		INC	BC
  EBC9  1D            		DEC	E
  EBCA  20F9          		JR	NZ,GDRDC1
  EBCC  15            		DEC	D
  EBCD  20F6          		JR	NZ,GDRDC1
  EBCF                	GDWTC2:
  EBCF  D1            		POP	DE
  EBD0  E6EF          		AND	0EFH		;BANK0
  EBD2  1821          		JR	S1FD0
                      	
  EBD4                	GDWTC:
  EBD4  CDE7EB        		CALL	GADR
  EBD7  D5            		PUSH	DE
  EBD8  110004        		LD	DE,0400H
  EBDB                	GDWTC1:
  EBDB  04            		INC	B
  EBDC  EDA3          		OUTI
  EBDE  03            		INC	BC
  EBDF  1D            		DEC	E
  EBE0  20F9          		JR	NZ,GDWTC1
  EBE2  15            		DEC	D
  EBE3  20F6          		JR	NZ,GDWTC1
  EBE5  18E8          		JR	GDWTC2
                      	
  EBE7                	GADR:
  EBE7  0E00          		LD	C,0
  EBE9  7B            		LD	A,E
  EBEA  87            		ADD	A,A
  EBEB  87            		ADD	A,A
  EBEC  C640          		ADD	A,040H
  EBEE  47            		LD	B,A
  EBEF  13            		INC	DE
  EBF0  3ABFEC        		LD	A,(WK1FD0)
  EBF3  F610          		OR	010H		;BANK1
  EBF5                	S1FD0:
  EBF5  C5            		PUSH	BC
  EBF6  32BFEC        		LD	(WK1FD0),A
  EBF9  01D01F        		LD	BC,01FD0H
  EBFC  ED79          		OUT	(C),A
  EBFE  C1            		POP	BC
  EBFF  C9            		RET
                      	
  1FE4                	@R	EQU	WTTRK-@WTTRK
                      	
  EC00                	PE:
                      	
                      	
                      		
                      	;	LSX-Dodgers SYSTEM CALL
                      	
  EC00                		ORG	0EC00H
                      	
  EC00                	STABLE:
                      	;0
  EC00  0000A7D6B3D6B9		DW	 00000H,_SYS01,_SYS02,_SYS03
  EC08  E9D600D720D7FA		DW	_SYS04,_SYS05,_SYS06,_SYS07
  EC10  28D76ED261D78D		DW	_SYS08,_SYS09,_SYS0A,_SYS0B
  EC18  7DD283D292D2A5		DW	_SYS0C,_SYS0D,_SYS0E,_SYS0F
                      	;1
  EC20  1AD367D3C3D3F9		DW	_SYS10,_SYS11,_SYS12,_SYS13
  EC28  01D422D442D43A		DW	_SYS14,_SYS15,_SYS16,_SYS17
  EC30  A9D4AED4B3D4B9		DW	_SYS18,_SYS19,_SYS1A,_SYS1B
  EC38  6CD2E9D46CD2ED		DW	_SYS1C,_SYS1D,_SYS1E,_SYS1F
                      	;2
  EC40  6CD279D491D4F2		DW	_SYS20,_SYS21,_SYS22,_SYS23
  EC48  11D566D29CE2C1		DW	_SYS24,_ERROR,_SYS26,_SYS27
  EC50  91D42CD5A3D72B		DW	_SYS28,_SYS29,_SYS2A,_SYS2B
  EC58  DDD72BDE6CD24F		DW	_SYS2C,_SYS2D,_SYS2E,_SYS2F
                      	;3
  EC60  49D5          		DW	_SYS30
                      	
                      		
                      	;	LSX-Dodgers WORK
                      	
  0004                	DDS	EQU	4
  EC62                	DDTB:
  EC62  434F4E20      		DB	"CON "
  EC66  5AD3          		DW	OPENDD
  EC68  41555820      		DB	"AUX "
  EC6C  5AD3          		DW	OPENDD
  EC6E  50524E20      		DB	"PRN "
  EC72  5AD3          		DW	OPENDD
  EC74  4E554C20      		DB	"NUL "
  EC78  5AD3          		DW	OPENDD
                      	
  EC7A                		DS	2
  EC7C  00EE          	_FATBF:	DW	FATBF
  EC7E  00FA          	_DTBUF:	DW	DTBUF
                      	
  EC80  FF            	_CYL0:	DB	0FFH	;Cylinder
  EC81  FF            	_CYL1:	DB	0FFH	;Cylinder
  EC82  FF            	_CYL2:	DB	0FFH	;Cylinder
  EC83  FF            	_CYL3:	DB	0FFH	;Cylinder
  EC84  00            	_DRIVE:	DB	0	;unit number
  EC85  00            	_SEEKSP:DB	0	;Seek speed
  EC86  FF            	_ISEEK:	DB	0FFH	;
  EC87  00            	_DVSW:	DB	0
  EC88  00            	_DRV:	DB	0
  EC89  FF            	_DSK:	DB	0FFH
  EC8A  8000          	_DTA:	DW	00080H
  EC8C  0000          	_CTC:	DW	0
  EC8E  0000          	_TXADR:	DW	0
  EC90  0000          	_KEYPS	DW	0
  EC92  00FF          	_KEYD	DW	0FF00H
  EC94  C210          	_KEYSP:	DW	010C2H
  EC96  07            	_COLORF:DB	7
  EC97  18            	_LINE:	DB	LINE
                      	
  EC98  0000          	_FCB:	DW	0
  EC9A  0000          	_FBPS:	DW	0	;SEARCH FILES
  EC9C  0000          	_FBAD:	DW	0	;    //
  EC9E  00            	_FBCNT:	DB	0	;    //
  EC9F  00            	_FILEN:	DB	0
  ECA0  00            	_DIRF:	DB	0
  ECA1  00            	_MAXCYL:DB	0
  ECA2  00            	_WTFATF:DB	0
  ECA3  FF            	_FATDRV:DB	0FFH
  ECA4  00            	_WTDBF:	DB	0
  ECA5  FF            	_DBDRV:	DB	0FFH
  ECA6  0000          	_DCLPS:	DW	0
                      	
  ECA8                		DS	8
                      	
  ECB0  6F5059381F0219	CRTCD:	DB	06FH,050H,059H,038H,01FH,002H,019H,01CH
  ECB8  0007          		DB	000H,007H
  ECBA  80F8B0FF      		DW	0-80*LINE,0-80
  ECBE  0C            		DB	00CH
  ECBF  A0            	WK1FD0:	DB	0A0H
                      	
  ECC0  D7D5          	CTC0:	DW	INTCTCE
  ECC2  D7D5          	CTC1:	DW	INTCTCE
  ECC4  FFD5          	CTC2:	DW	INTCTC2
  ECC6  D7D5          	CTC3:	DW	INTCTCE
  ECC8  97D5          	INTVEC:	DW	INT
                      	
                      	;	JUMP
                      	
  ECCA  C30EDC        	_INKEY:	JP	INKEY
  ECCD  C36ED8        	_PRINT:	JP	PRINT
  ECD0  C35CDB        	_SCRN:	JP	SCRN
  ECD3  C384DB        	_POS:	JP	POS
  ECD6  C3B3D9        	_LOC:	JP	LOC
  ECD9  C3D8E7        	_CHGDRV:JP	CHGDRV
  ECDC  C3ABE8        	_GETDPB:JP	GETDPB
  ECDF  C3BFE8        	_FFLUSH:JP	FFLUSH
  ECE2  C37CE5        	_RDFATX:JP	RDFATX
  ECE5  C351E6        	_RDFAT:	JP	RDFAT
  ECE8  C33FEA        	_WTTRK:	JP	WTTRK
  ECEB  C34CEA        	_FDRD:	JP	FDRD
  ECEE  C342EA        	_FDWT:	JP	FDWT
  ECF1  C3EBEC        	_DRD:	JP	_FDRD	;(Self-rewriting)
  ECF4  C3EEEC        	_DWT:	JP	_FDWT	;(Self-rewriting)
  ECF7  C3FEE5        	_GNCL:	JP	GNCL	;(Self-rewriting)
  ECFA  C321E6        	_SNCL:	JP	SNCL	;(Self-rewriting)
  ECFD  C32CCD        	_COMANL:JP	COMANL
                      	
  ED00                	WE:
                      	
                      		
                      	;	LSX-Dodgers DPB
                      	
  ED00                	DEVICE:
                      	
                      	;	A:
                      	
  ED00  02            	_FATLN_:	DB	2
  ED01  FD            	_FATID_:	DB	0FDH
  ED02  EBEC          	_DRDC_		DW	_FDRD
  ED04  EEEC          	_DWTC_		DW	_FDWT
  ED06  0829          	_ADDCL_:	DW	02908H	;H(029H=512,0=1024)L=CLADD
  ED08  6401          	_MAXCL_:	DW	356
  ED0A  FF            	_FDMODE_:	DB	0FFH	;0FFH=2D	0FEH=2HD
  ED0B  0C            	_MAXDIR_:	DB	12
  ED0C  28            	_MAXCYL_:	DB	40
  ED0D  09            	_MAXSEC_:	DB	9	;Number of sectors
  ED0E  01            	_FATPS_:	DB	1
  ED0F  02            	_FATS_:		DB	2
  ED10  05            	_DIRPS_:	DB	5
  ED11  01            	_MINSEC_:	DB	1	;Minimum sector
  ED12  87            	_DEVNO_:	DB	087H	;Device Number
  ED13  00            	_UNITNO_:	DB	0
  ED14  0000          			DW	0
  ED16  0000          	_GNCL_:		DW	0
  ED18  0000          	_SNCL_:		DW	0
  ED1A  0000          	_SDIR_:		DW	0
  ED1C  46444430      	_NAME_:	DB	"FDD0"
                      	
                      	;	B:
                      	
  ED20  02            		DB	2
  ED21  FD            		DB	0FDH
  ED22  EBEC          		DW	_FDRD
  ED24  EEEC          		DW	_FDWT
  ED26  0829          		DW	02908H	;H(029H=512,0=1024)L=CLADD
  ED28  6401          		DW	356
  ED2A  FF            		DB	0FFH	;0FFH=2D	0FEH=2HD
  ED2B  0C            		DB	12
  ED2C  28            		DB	40
  ED2D  09            		DB	9
  ED2E  01            		DB	1
  ED2F  02            		DB	2
  ED30  05            		DB	5
  ED31  01            		DB	1
  ED32  87            		DB	087H	;Device Number
  ED33  01            		DB	1
  ED34  0000          		DW	0
  ED36  0000          		DW	0
  ED38  0000          		DW	0
  ED3A  0000          		DW	0
  ED3C  46444431      		DB	"FDD1"
                      	
                      	;	C:
                      	
  ED40  02            		DB	2
  ED41  FD            		DB	0FDH
  ED42  EBEC          		DW	_FDRD
  ED44  EEEC          		DW	_FDWT
  ED46  0829          		DW	02908H	;H(029H=512,0=1024)L=CLADD
  ED48  6401          		DW	356
  ED4A  FF            		DB	0FFH	;0FFH=2D	0FEH=2HD
  ED4B  0C            		DB	12
  ED4C  28            		DB	40
  ED4D  09            		DB	9
  ED4E  01            		DB	1
  ED4F  02            		DB	2
  ED50  05            		DB	5
  ED51  01            		DB	1
  ED52  87            		DB	087H	;Device Number
  ED53  02            		DB	2
  ED54  0000          		DW	0
  ED56  0000          		DW	0
  ED58  0000          		DW	0
  ED5A  0000          		DW	0
  ED5C  46444432      		DB	"FDD2"
                      	
                      	;	D:
                      	
  ED60  02            		DB	2
  ED61  FD            		DB	0FDH
  ED62  EBEC          		DW	_FDRD
  ED64  EEEC          		DW	_FDWT
  ED66  0829          		DW	02908H	;H(029H=512,0=1024)L=CLADD
  ED68  6401          		DW	356
  ED6A  FF            		DB	0FFH	;0FFH=2D	0FEH=2HD
  ED6B  0C            		DB	12
  ED6C  28            		DB	40
  ED6D  09            		DB	9
  ED6E  01            		DB	1
  ED6F  02            		DB	2
  ED70  05            		DB	5
  ED71  01            		DB	1
  ED72  87            		DB	087H	;Device Number
  ED73  03            		DB	3
  ED74  0000          		DW	0
  ED76  0000          		DW	0
  ED78  0000          		DW	0
  ED7A  0000          		DW	0
  ED7C  46444433      		DB	"FDD3"
                      	
                      	;	E:
                      	
  ED80  00            	EMMFL:	DB	0
  ED81  FE            		DB	0FEH
  ED82  F8EA          	EMMRD:	DW	EDRDC
  ED84  F5EA          	EMMWR:	DW	EDWTC
  ED86  0900          		DW	9
  ED88  0000          	EMMCL:	DW	0
  ED8A  00            		DB	0
  ED8B  0B            		DB	11
  ED8C  00            	EMMBL:	DB	0
  ED8D  01            		DB	1
  ED8E  01            		DB	1
  ED8F  01            		DB	1
  ED90  05            		DB	5
  ED91  01            		DB	1
  ED92  06            		DB	6	;Device Number
  ED93  00            	EMMDV:	DB	0
  ED94  0000          		DW	0
  ED96  0000          		DW	0
  ED98  0000          		DW	0
  ED9A  0000          		DW	0
  ED9C  454D4D30      		DB	"EMM0"
                      	
                      	;	F:
                      	
  EDA0  00            	BANKFL:	DB	0
  EDA1  F9            		DB	0F9H
  EDA2  3CEB          		DW	BDRDC
  EDA4  5FEB          		DW	BDWTC
  EDA6  0300          		DW	3
  EDA8  0000          	BANKCL:	DW	0
  EDAA  00            		DB	0
  EDAB  05            		DB	5
  EDAC  00            		DB	0
  EDAD  01            		DB	1
  EDAE  00            		DB	0
  EDAF  01            		DB	1
  EDB0  01            		DB	1
  EDB1  01            		DB	1
  EDB2  0B            		DB	00BH	;Device Number
  EDB3  00            		DB	0
  EDB4  0000          		DW	0
  EDB6  0000          		DW	0
  EDB8  0000          		DW	0
  EDBA  0000          		DW	0
  EDBC  4252414D      		DB	"BRAM"
                      	
                      	;	G:
                      	
  EDC0  01            		DB	1
  EDC1  F9            		DB	0F9H
  EDC2  BEEB          		DW	GDRDC
  EDC4  D4EB          		DW	GDWTC
  EDC6  0000          		DW	0
  EDC8  3000          		DW	48
  EDCA  00            		DB	0
  EDCB  02            		DB	2
  EDCC  00            		DB	0
  EDCD  01            		DB	1
  EDCE  00            		DB	0
  EDCF  01            		DB	1
  EDD0  01            		DB	1
  EDD1  01            		DB	1
  EDD2  05            		DB	5	;Device Number
  EDD3  01            		DB	1
  EDD4  0000          		DW	0
  EDD6  0000          		DW	0
  EDD8  0000          		DW	0
  EDDA  0000          		DW	0
  EDDC  4752414D      		DB	"GRAM"
                      	
                      	
                      	
  EDE0  00            	LDEND:	DB	0
                      	
  EDE1                		END
