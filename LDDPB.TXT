・LSX-Dodgers
・DPB(ドライブパラメータブロック)	32バイト


<オフセット>	<サイズ>	<内容>

+$00 *2	1バイト	FAT領域のセクタ単位でのサイズ
				0の場合はこのドライブは使われていない。ただし、+$0Fのbit6が1の場合はFAT12ではないので例外

+$01	1バイト	メディアバイト


+$02 *2	2バイト	1セクタ読み込みルーチンの実行アドレス


+$04 *2	2バイト	1セクタ書き込みルーチンの実行アドレス


+$06	1バイト	データ格納領域の先頭論理セクタ番号
				(使用出来ない0クラスタと1クラスタ分ずらす:2 × 1クラスタの論理セクタ数)


+$07 *2	1バイト	1クラスタの論理セクタ数
        		1,2,4,8,16のみ可


+$08	2バイト	総クラスタ数
				(使用出来ない0クラスタと1クラスタを含む)


+$0A	1バイト	フロッピーディスクのモード
				$FF:2D/2DD
				$FE:2HD
				$00:フロッピー以外のデバイス


+$0B	1バイト	ルートディレクトリ領域の終了の論理セクタ番号+1


+$0C *1	1バイト	フロッピーディスクのシリンダ数


+$0D *1	1バイト	フロッピーディスクの1トラックのセクタ数


+$0E	1バイト	FAT領域の先頭論理セクタ番号


+$0F *2	1バイト	FAT情報と論理セクタのサイズ
				bit7:予備FAT領域
					1:使用する
					0:使用しない
				bit6:未確認フォーマット
					1:FAT12ではない
					0:FAT12
				bit2-bit0: 論理セクタのサイズ
					1:256バイト
					2:512バイト
					4:1024バイト


+$10	1バイト	ルートディレクトリ領域の先頭論理セクタ番号


+$11 *1	1バイト	フロッピーディスクのセクタの最小値


+$12	1バイト	デバイス番号
				$05:G-RAM
				$06:EMM
				$07:フロッピー	($87)
				$0B:B-RAM
				$7F:ユーザー
				(下位7ビット有効)


+$13	1バイト	デバイスドライバ内におけるユニット番号


+$14	2バイト	拡張機能の呼び出し先
    0の場合は標準機能を使用
  +0:FATの内容を読み出すルーチン
  +3:FATにデータを書き込むルーチン
  +6:FATのセットアップ
  JP GET_NEW_CLUSTER
  JP SET_NEW_CLUSTER
  JP SETUP_FAT
※この様に並んでいることを想定


+$16 *2	4バイト	未使用


+$1A	2バイト	カレントディレクトリのクラスタ番号
				0の場合はルートディレクトリ


+$1C	4バイト	デバイスの名前


*1  内蔵フロッピーディスクドライバ専用
		他のデバイスでは自由に使ってよい

*2 L-os Angelesと異なる部分

	※DPB備考

 バージョン1.30から+$07及び+$0Fの仕様が変わりました。
 DPBの構造はCP/M80ともMSX-DOSとも異なっています。

 MSX-DOSと同一形式のDPBの場合、機種IDのDPBレベルは0
 LSX形式の場合、機種IDのDPBレベルは1


+$02 	1セクタ読み込みルーチンの引数と戻り値

;READ SECTOR
;in
;	IX   : DPB
;	DE   : sector number
;	HL   : memory address
;out
;	CF   : 0=no error,1=error
;	DE   : next sector
;	HL   : next address


+$04	1セクタ書き込みルーチンの引数と戻り値

;WRITE SECTOR
;in
;	IX   : DPB
;	DE   : sector number
;	HL   : memory address
;out
;	CF   : 0=no error,1=error
;	DE   : next sector
;	HL   : next address

※現在の仕様ではセクタ番号が16ビットなので1セクタ1024バイトでもディスク容量は64MBが最大値になる。


+$14	拡張機能

;GET NEXT CLUSTER
;in
;	DE   : cluster number
;out
;	CF   : 0=no error,1=error
;	DE   : next cluster


;SET NEXT CLUSTER
;in
;	DE   : cluster number
;	HL   : next cluster
;out
;	CF   : 0=no error,1=error


;FATのセットアップ
;in
; IX : DPB
; DE : fat sector pos
; HL : memory address
;out
;	B  : FATセクタ数
;	DE : FAT先頭セクタ番号
;	HL : FATバッファポインタ
;	CF : 1=ドライブ切り替えエラー

eof
